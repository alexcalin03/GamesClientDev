"use strict";(self.webpackChunkgames_client_dev=self.webpackChunkgames_client_dev||[]).push([[397],{8397:(e,t,i)=>{var n=i(8507),s=i(7457),o=i(4458),r=i(7309);class a{constructor(e){this._lastTransform="",this._observer=null,this._tickerAttached=!1,this.updateTranslation=()=>{if(!this._canvas)return;const e=this._canvas.getBoundingClientRect(),t=this._canvas.width,i=this._canvas.height,n=e.width/t*this._renderer.resolution,s=e.height/i*this._renderer.resolution,o=`translate(${e.left}px, ${e.top}px) scale(${n}, ${s})`;o!==this._lastTransform&&(this._domElement.style.transform=o,this._lastTransform=o)},this._domElement=e.domElement,this._renderer=e.renderer,globalThis.OffscreenCanvas&&this._renderer.canvas instanceof OffscreenCanvas||(this._canvas=this._renderer.canvas,this._attachObserver())}get canvas(){return this._canvas}ensureAttached(){!this._domElement.parentNode&&this._canvas.parentNode&&(this._canvas.parentNode.appendChild(this._domElement),this.updateTranslation())}_attachObserver(){"ResizeObserver"in globalThis?(this._observer&&(this._observer.disconnect(),this._observer=null),this._observer=new ResizeObserver(e=>{for(const t of e){if(t.target!==this._canvas)continue;const e=this.canvas.width,i=this.canvas.height,n=t.contentRect.width/e*this._renderer.resolution,s=t.contentRect.height/i*this._renderer.resolution;(this._lastScaleX!==n||this._lastScaleY!==s)&&(this.updateTranslation(),this._lastScaleX=n,this._lastScaleY=s)}}),this._observer.observe(this._canvas)):this._tickerAttached||r.R.shared.add(this.updateTranslation,this,o.d.HIGH)}destroy(){this._observer?(this._observer.disconnect(),this._observer=null):this._tickerAttached&&r.R.shared.remove(this.updateTranslation),this._domElement=null,this._renderer=null,this._canvas=null,this._tickerAttached=!1,this._lastTransform="",this._lastScaleX=null,this._lastScaleY=null}}var h=i(5101);class l{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=l.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new h.b,this.page=new h.b,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,n,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var c=/iPhone/i,d=/iPod/i,p=/iPad/i,u=/\biOS-universal(?:.+)Mac\b/i,v=/\bAndroid(?:.+)Mobile\b/i,m=/Android/i,g=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,_=/Silk/i,b=/Windows Phone/i,y=/\bWindows(?:.+)ARM\b/i,E=/BlackBerry/i,f=/BB10/i,T=/Opera Mini/i,P=/\b(CriOS|Chrome)(?:.+)Mobile/i,w=/Mobile(?:.+)Firefox\b/i,M=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function A(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=t.userAgent,n=i.split("[FBAN");void 0!==n[1]&&(i=n[0]),void 0!==(n=i.split("Twitter"))[1]&&(i=n[0]);var s=function(e){return function(t){return t.test(e)}}(i),o={apple:{phone:s(c)&&!s(b),ipod:s(d),tablet:!s(c)&&(s(p)||M(t))&&!s(b),universal:s(u),device:(s(c)||s(d)||s(p)||s(u)||M(t))&&!s(b)},amazon:{phone:s(g),tablet:!s(g)&&s(_),device:s(g)||s(_)},android:{phone:!s(b)&&s(g)||!s(b)&&s(v),tablet:!s(b)&&!s(g)&&!s(v)&&(s(_)||s(m)),device:!s(b)&&(s(g)||s(_)||s(v)||s(m))||s(/\bokhttp\b/i)},windows:{phone:s(b),tablet:s(y),device:s(b)||s(y)},other:{blackberry:s(E),blackberry10:s(f),opera:s(T),firefox:s(w),chrome:s(P),device:s(E)||s(f)||s(T)||s(w)||s(P)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const O=(A.default??A)(globalThis.navigator);var D=i(9903);const I=class e{constructor(e,t=O){this._mobileInfo=t,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pools={},this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._isRunningTests=!1,this._boundOnKeyDown=this._onKeyDown.bind(this),this._boundOnMouseMove=this._onMouseMove.bind(this),this._hookDiv=null,(t.tablet||t.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}get div(){return this._div}_createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.position="absolute",this._div.style.top="0px",this._div.style.left="0px",this._div.style.pointerEvents="none",this._div.style.zIndex=2..toString(),this._canvasObserver=new a({domElement:this._div,renderer:this._renderer})),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._deactivateOnMouseMove&&globalThis.document.addEventListener("mousemove",this._boundOnMouseMove,!0);const e=this._renderer.view.canvas;if(e.parentNode)this._canvasObserver.ensureAttached(),this._initAccessibilitySetup();else{const t=new MutationObserver(()=>{e.parentNode&&(t.disconnect(),this._canvasObserver.ensureAttached(),this._initAccessibilitySetup())});t.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(this._isActive&&!this._isMobileAccessibility){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._boundOnKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;for(const e in this._pools)this._pools[e].forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),delete this._pools[e];this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pools={},this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const t=e.children;if(t)for(let e=0;e<t.length;e++)this._updateAccessibleObjects(t[e])}init(t){const i={accessibilityOptions:{...e.defaultOptions,...t?.accessibilityOptions||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault&&this._activate(),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount)return;if(this._androidUpdateCount=e+this._androidUpdateFrequency,!(this._renderer.renderingToScreen&&this._renderer.view.canvas||this._isRunningTests))return;const t=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const e of this._children)e._renderId===this._renderId&&t.add(this._children.indexOf(e))}for(let e=this._children.length-1;e>=0;e--){const i=this._children[e];t.has(e)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._getPool(i.accessibleType).push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,(0,D.d)(this._children,e,1))}this._renderer.renderingToScreen&&this._canvasObserver.ensureAttached();for(let e=0;e<this._children.length;e++){const t=this._children[e];if(!t._accessibleActive||!t._accessibleDiv)continue;const i=t._accessibleDiv,n=t.hitArea||t.getBounds().rectangle;if(t.hitArea){const e=t.worldTransform;i.style.left=`${e.tx+n.x*e.a}px`,i.style.top=`${e.ty+n.y*e.d}px`,i.style.width=n.width*e.a+"px",i.style.height=n.height*e.d+"px"}else this._capHitArea(n),i.style.left=`${n.x}px`,i.style.top=`${n.y}px`,i.style.width=`${n.width}px`,i.style.height=`${n.height}px`}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this._renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let t=this._getPool(e.accessibleType).pop();t?(t.innerHTML="",t.removeAttribute("title"),t.removeAttribute("aria-label"),t.tabIndex=0):("button"===e.accessibleType?t=document.createElement("button"):(t=document.createElement(e.accessibleType),t.style.cssText="\n                        color: transparent;\n                        pointer-events: none;\n                        padding: 0;\n                        margin: 0;\n                        border: 0;\n                        outline: 0;\n                        background: transparent;\n                        box-sizing: border-box;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                    ",e.accessibleText&&(t.innerText=e.accessibleText)),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title=`container ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e.interactive?t.tabIndex=e.tabIndex:t.tabIndex=0,this.debug&&this._updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv)}_dispatchEvent(e,t){const{container:i}=e.target,n=this._renderer.events.rootBoundary,s=Object.assign(new l(n),{target:i});n.rootTarget=this._renderer.lastObjectRendered,t.forEach(e=>n.dispatchEvent(s,e))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this._activateOnTab&&this._activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._canvasObserver?.destroy(),this._canvasObserver=null,this._div=null,this._pools=null,this._children=null,this._renderer=null,this._hookDiv=null,globalThis.removeEventListener("keydown",this._boundOnKeyDown),this._boundOnKeyDown=null,globalThis.document.removeEventListener("mousemove",this._boundOnMouseMove,!0),this._boundOnMouseMove=null}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}_getPool(e){return this._pools[e]||(this._pools[e]=[]),this._pools[e]}};I.extension={type:[n.Ag.WebGLSystem,n.Ag.WebGPUSystem],name:"accessibility"},I.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let x=I;n.XO.add(x),n.XO.mixin(s.mc,{accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1}),i(4732);var k=i(4486),L=i(268);const B=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){!this._tickerAdded&&this.domElement&&(r.R.system.add(this._tickerUpdate,this,o.d.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(r.R.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this._update())}destroy(){this.removeTickerListener(),this.events=null,this.domElement=null,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}};class S extends l{constructor(){super(...arguments),this.client=new h.b,this.movement=new h.b,this.offset=new h.b,this.global=new h.b,this.screen=new h.b}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,n,s,o,r,a,h,l,c,d,p,u,v){throw new Error("Method not implemented.")}}class C extends S{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class R extends S{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}R.DOM_DELTA_PIXEL=0,R.DOM_DELTA_LINE=1,R.DOM_DELTA_PAGE=2;const U=new h.b,X=new h.b;class F{constructor(e){this.dispatch=new k.A,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,n=t.length;i<n;i++)t[i].fn(e);else(0,L.R)(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){B.pauseUpdate=!0;const i=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,U.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let n=0,s=i.length-1;n<s;n++)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let n=i.length-2;n>=0;n--)if(e.currentTarget=i[n],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this._allInteractiveElements){if(0===i.length)return;e.eventPhase=e.BUBBLING_PHASE;const n=Array.isArray(t)?t:[t];for(let t=i.length-1;t>=0;t--)n.forEach(n=>{e.currentTarget=i[t],this.notifyTarget(e,n)})}propagationPath(e){const t=[e];for(let i=0;i<2048&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,i,n,s,o=!1){let r=!1;if(this._interactivePrune(e))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(B.pauseUpdate=!1),e.interactiveChildren&&e.children){const a=e.children;for(let h=a.length-1;h>=0;h--){const l=a[h],c=this.hitTestMoveRecursive(l,this._isInteractive(t)?t:l.eventMode,i,n,s,o||s(e,i));if(c){if(c.length>0&&!c[c.length-1].parent)continue;const t=e.isInteractive();(c.length>0||t)&&(t&&this._allInteractiveElements.push(e),c.push(e)),0===this._hitElements.length&&(this._hitElements=c),r=!0}}}const a=this._isInteractive(t),h=e.isInteractive();return h&&h&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:r?this._hitElements:a&&!s(e,i)&&n(e,i)?h?[e]:[]:null}hitTestRecursive(e,t,i,n,s){if(this._interactivePrune(e)||s(e,i))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(B.pauseUpdate=!1),e.interactiveChildren&&e.children){const o=e.children,r=i;for(let i=o.length-1;i>=0;i--){const a=o[i],h=this.hitTestRecursive(a,this._isInteractive(t)?t:a.eventMode,r,n,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;const t=e.isInteractive();return(h.length>0||t)&&h.push(e),h}}}const o=this._isInteractive(t),r=e.isInteractive();return o&&n(e,i)?r?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&e.visible&&e.renderable&&e.measurable)||"none"===e.eventMode||"passive"===e.eventMode&&!e.interactiveChildren}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,X),!e.hitArea.contains(X.x,X.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){const n=e.effects[i];if(n.containsPoint&&!n.containsPoint(t,this.hitTestFn))return!0}return!1}hitTestFn(e,t){return!!e.hitArea||!!e?.containsPoint&&(e.worldTransform.applyInverse(t,X),e.containsPoint(X))}notifyTarget(e,t){if(!e.currentTarget.isInteractive())return;t??(t=e.type);const i=`on${t}`;e.currentTarget[i]?.(e);const n=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this._notifyListeners(e,n),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i="mouse"===t.pointerType||"pen"===t.pointerType,n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&s!==t.target){const n="mousemove"===e.type?"mouseout":"pointerout",o=this.createPointerEvent(e,n,s);if(this.dispatchEvent(o,"pointerout"),i&&this.dispatchEvent(o,"mouseout"),!t.composedPath().includes(s)){const n=this.createPointerEvent(e,"pointerleave",s);for(n.eventPhase=n.AT_TARGET;n.target&&!t.composedPath().includes(n.target);)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;this.freeEvent(n)}this.freeEvent(o)}if(s!==t.target){const n="mousemove"===e.type?"mouseover":"pointerover",o=this.clonePointerEvent(t,n);this.dispatchEvent(o,"pointerover"),i&&this.dispatchEvent(o,"mouseover");let r=s?.parent;for(;r&&r!==this.rootTarget.parent&&r!==t.target;)r=r.parent;if(!r||r===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==s&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),i&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(o)}const o=[],r=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),r&&o.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),r&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),r&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),n="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),n&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const i="mouse"===e.pointerType||"pen"===e.pointerType,n=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",n);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",n);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType)this.dispatchEvent(i,"touchend");else if("mouse"===i.pointerType||"pen"===i.pointerType){const e=2===i.button;this.dispatchEvent(i,e?"rightup":"mouseup")}const n=this.trackingData(e.pointerId),s=this.findMountedTarget(n.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let t=s;for(;t&&!i.composedPath().includes(t);){if(i.currentTarget=t,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType)this.notifyTarget(i,"touchendoutside");else if("mouse"===i.pointerType||"pen"===i.pointerType){const e=2===i.button;this.notifyTarget(i,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete n.pressTargetsByButton[e.button],o=t}if(o){const s=this.clonePointerEvent(i,"click");s.target=o,s.path=null,n.clicksByButton[e.button]||(n.clicksByButton[e.button]={clickCount:0,target:s.target,timeStamp:t});const r=n.clicksByButton[e.button];if(r.target===s.target&&t-r.timeStamp<200?++r.clickCount:r.clickCount=1,r.target=s.target,r.timeStamp=t,s.detail=r.clickCount,"mouse"===s.pointerType){const e=2===s.button;this.dispatchEvent(s,e?"rightclick":"click")}else"touch"===s.pointerType&&this.dispatchEvent(s,"tap");this.dispatchEvent(s,"pointertap"),this.freeEvent(s)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof C))return void(0,L.R)("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),n=this.createPointerEvent(e);if(i){let s=i;for(;s;)n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType?this.notifyTarget(n,"touchendoutside"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.notifyTarget(n,2===n.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(n)}mapWheel(e){if(!(e instanceof R))return void(0,L.R)("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const n=this.allocateEvent(C);return this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=i??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],"string"==typeof t&&(n.type=t),n}createWheelEvent(e){const t=this.allocateEvent(R);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(C);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof C&&t instanceof C&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof S&&t instanceof S&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.defaultPrevented=!1,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}_notifyListeners(e,t){const i=e.currentTarget._events[t];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(t,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let n=0,s=i.length;n<s&&!e.propagationImmediatelyStopped;n++)i[n].once&&e.currentTarget.removeListener(t,i[n].fn,void 0,!0),i[n].fn.call(i[n].context,e)}}const Y={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},N=class e{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new F(null),B.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new C(null),this._rootWheelEvent=new R(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,i)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=i),e[t]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{canvas:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,e._defaultEventMode=t.eventMode??"passive",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){B.destroy(),this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this._currentCursor===e)return;this._currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let e=0,i=t.length;e<i;e++){const i=t[e],n=this._bootstrapEvent(this._rootPointerEvent,i);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,B.pointerMoved();const t=this._normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){const i=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",n=this._normalizeToPointerData(e);for(let e=0,t=n.length;e<t;e++){const t=this._bootstrapEvent(this._rootPointerEvent,n[e]);t.type+=i,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this._normalizeToPointerData(e);for(let e=0,i=t.length;e<i;e++){const i=this._bootstrapEvent(this._rootPointerEvent,t[e]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this._removeEvents(),this.domElement=e,B.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;B.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;B.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,t,i){const n=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(t-n.left)*(this.domElement.width/n.width)*s,e.y=(i-n.top)*(this.domElement.height/n.height)*s}_normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,n=e.changedTouches.length;i<n;i++){const n=e.changedTouches[i];void 0===n.button&&(n.button=0),void 0===n.buttons&&(n.buttons=1),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const i=e;void 0===i.isPrimary&&(i.isPrimary=!0),void 0===i.width&&(i.width=1),void 0===i.height&&(i.height=1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="mouse"),void 0===i.pointerId&&(i.pointerId=1),void 0===i.pressure&&(i.pressure=.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this._rootWheelEvent;return this._transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}_bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this._transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Y[e.type]||e.type),e}_transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};N.extension={name:"events",type:[n.Ag.WebGLSystem,n.Ag.CanvasSystem,n.Ag.WebGPUSystem],priority:-1},N.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let G=N;const W={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return"dynamic"===this.eventMode||"static"===this.eventMode},set interactive(e){this.eventMode=e?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??G.defaultEventMode},set eventMode(e){this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const n="boolean"==typeof i&&i||"object"==typeof i&&i.capture,s="object"==typeof i?i.signal:void 0,o="object"==typeof i&&!0===i.once,r="function"==typeof t?void 0:t;e=n?`${e}capture`:e;const a="function"==typeof t?t:t.handleEvent,h=this;s&&s.addEventListener("abort",()=>{h.off(e,a,r)}),o?h.once(e,a,r):h.on(e,a,r)},removeEventListener(e,t,i){const n="function"==typeof t?void 0:t;e="boolean"==typeof i&&i||"object"==typeof i&&i.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof l))throw new Error("Container cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};n.XO.add(G),n.XO.mixin(s.mc,W);class ${constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._renderer.runners.init.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}init(){this._canvasObserver=new a({domElement:this._domElement,renderer:this._renderer})}addRenderable(e,t){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){const e=this._attachedDomElements;if(0!==e.length){this._canvasObserver.ensureAttached();for(let t=0;t<e.length;t++){const i=e[t],n=i.element;if(!i.parent||i.globalDisplayStatus<7)n?.remove(),e.splice(t,1),t--;else{this._domElement.contains(n)||(n.style.position="absolute",n.style.pointerEvents="auto",this._domElement.appendChild(n));const e=i.worldTransform,t=i._anchor,s=i.width*t.x,o=i.height*t.y;n.style.transformOrigin=`${s}px ${o}px`,n.style.transform=`matrix(${e.a}, ${e.b}, ${e.c}, ${e.d}, ${e.tx-s}, ${e.ty-o})`,n.style.opacity=i.groupAlpha.toString()}}}else this._domElement.remove()}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++){const t=this._attachedDomElements[e];t.element?.remove()}this._attachedDomElements.length=0,this._domElement.remove(),this._canvasObserver.destroy(),this._renderer=null}}$.extension={type:[n.Ag.WebGLPipes,n.Ag.WebGPUPipes,n.Ag.CanvasPipes],name:"dom"},n.XO.add($),i(6312),i(5753),i(8928),i(5285),i(9305),i(5148),i(23),i(2623),i(8723),i(7252),i(3859)}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S21CLFlBQVlXLFlBQVk0ZSxJQUUvQixNQUFNN1MsRUFBS3NYLEVBQWFyWCxlQUNsQjRYLEVBQVNQLEVBQWFRLFFBQ3RCQyxFQUFLVCxFQUFhMWtCLE1BQVFpbEIsRUFBT3poQixFQUNqQzRoQixFQUFLVixFQUFheGtCLE9BQVMra0IsRUFBT3ZoQixFQUN4Q3VjLEVBQVF0ZixNQUFNMGtCLGdCQUFrQixHQUFHRixPQUFRQyxNQUMzQ25GLEVBQVF0ZixNQUFNQyxVQUFZLFVBQVV3TSxFQUFHRyxNQUFNSCxFQUFHa0osTUFBTWxKLEVBQUdrWSxNQUFNbFksRUFBR0ssTUFBTUwsRUFBR0UsR0FBSzZYLE1BQU8vWCxFQUFHSSxHQUFLNFgsS0FDL0ZuRixFQUFRdGYsTUFBTTRrQixRQUFVYixFQUFhYyxXQUFXMWIsVUFDbEQsQ0FDRixDQXZCQSxNQUZFdkssS0FBS21CLFlBQVkwQixRQTBCckIsQ0FFQSxPQUFBRCxHQUNFNUMsS0FBS2EsVUFBVTBLLFFBQVFDLFdBQVczSSxPQUFPN0MsTUFDekMsSUFBSyxJQUFJd00sRUFBSSxFQUFHQSxFQUFJeE0sS0FBS2lsQixxQkFBcUJ4Z0IsT0FBUStILElBQUssQ0FDekQsTUFBTTJZLEVBQWVubEIsS0FBS2lsQixxQkFBcUJ6WSxHQUMvQzJZLEVBQWF6RSxTQUFTN2QsUUFDeEIsQ0FDQTdDLEtBQUtpbEIscUJBQXFCeGdCLE9BQVMsRUFDbkN6RSxLQUFLbUIsWUFBWTBCLFNBQ2pCN0MsS0FBS2dMLGdCQUFnQnBJLFVBQ3JCNUMsS0FBS2EsVUFBWSxJQUNuQixFQU1GbWtCLEVBQVFyVSxVQUFZLENBQ2xCckMsS0FBTSxDQUNKLEtBQWM0WCxXQUNkLEtBQWNDLFlBQ2QsS0FBY0MsYUFFaEJ0VixLQUFNLE9DcEdSLEtBQVdwTyxJQUFJc2lCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2RvbS9DYW52YXNPYnNlcnZlci5tanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkRXZlbnQubWpzIiwid2VicGFjazovL2dhbWVzLWNsaWVudC1kZXYvLi9ub2RlX21vZHVsZXMvaXNtb2JpbGVqcy9lc20vaXNNb2JpbGUuanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi91dGlscy9icm93c2VyL2lzTW9iaWxlLm1qcyIsIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2FjY2Vzc2liaWxpdHkvQWNjZXNzaWJpbGl0eVN5c3RlbS5tanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9hY2Nlc3NpYmlsaXR5L2luaXQubWpzIiwid2VicGFjazovL2dhbWVzLWNsaWVudC1kZXYvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvYWNjZXNzaWJpbGl0eS9hY2Nlc3NpYmlsaXR5VGFyZ2V0Lm1qcyIsIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudFRpY2tlci5tanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkTW91c2VFdmVudC5tanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkUG9pbnRlckV2ZW50Lm1qcyIsIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9GZWRlcmF0ZWRXaGVlbEV2ZW50Lm1qcyIsIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudEJvdW5kYXJ5Lm1qcyIsIndlYnBhY2s6Ly9nYW1lcy1jbGllbnQtZGV2Ly4vbm9kZV9tb2R1bGVzL3BpeGkuanMvbGliL2V2ZW50cy9FdmVudFN5c3RlbS5tanMiLCJ3ZWJwYWNrOi8vZ2FtZXMtY2xpZW50LWRldi8uL25vZGVfbW9kdWxlcy9waXhpLmpzL2xpYi9ldmVudHMvRmVkZXJhdGVkRXZlbnRUYXJnZXQubWpzIiwid2VicGFjazovL2dhbWVzLWNsaWVudC1kZXYvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZXZlbnRzL2luaXQubWpzIiwid2VicGFjazovL2dhbWVzLWNsaWVudC1kZXYvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZG9tL0RPTVBpcGUubWpzIiwid2VicGFjazovL2dhbWVzLWNsaWVudC1kZXYvLi9ub2RlX21vZHVsZXMvcGl4aS5qcy9saWIvZG9tL2luaXQubWpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVQREFURV9QUklPUklUWSB9IGZyb20gJy4uL3RpY2tlci9jb25zdC5tanMnO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSAnLi4vdGlja2VyL1RpY2tlci5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIENhbnZhc09ic2VydmVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIC8qKiBBIGNhY2hlZCB2YWx1ZSBvZiB0aGUgbGFzdCB0cmFuc2Zvcm0gYXBwbGllZCB0byB0aGUgRE9NIGVsZW1lbnQuICovXG4gICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IFwiXCI7XG4gICAgLyoqIEEgUmVzaXplT2JzZXJ2ZXIgaW5zdGFuY2UgdG8gb2JzZXJ2ZSBjaGFuZ2VzIGluIHRoZSBjYW52YXMgc2l6ZS4gKi9cbiAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgLyoqIEEgZmxhZyB0byBpbmRpY2F0ZSB3aGV0aGVyIHRoZSBvYnNlcnZlciBpcyBhdHRhY2hlZCB0byB0aGUgVGlja2VyIGZvciBjb250aW51b3VzIHVwZGF0ZXMuICovXG4gICAgdGhpcy5fdGlja2VyQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB0cmFuc2Zvcm0gb2YgdGhlIERPTSBlbGVtZW50IGJhc2VkIG9uIHRoZSBjYW52YXMgc2l6ZSBhbmQgcG9zaXRpb24uXG4gICAgICogVGhpcyBtZXRob2QgY2FsY3VsYXRlcyB0aGUgc2NhbGUgYW5kIHRyYW5zbGF0aW9uIG5lZWRlZCB0byBrZWVwIHRoZSBET00gZWxlbWVudCBpbiBzeW5jIHdpdGggdGhlIGNhbnZhcy5cbiAgICAgKi9cbiAgICB0aGlzLnVwZGF0ZVRyYW5zbGF0aW9uID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl9jYW52YXMpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLl9jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICBjb25zdCBjb250ZW50V2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGg7XG4gICAgICBjb25zdCBjb250ZW50SGVpZ2h0ID0gdGhpcy5fY2FudmFzLmhlaWdodDtcbiAgICAgIGNvbnN0IHN4ID0gcmVjdC53aWR0aCAvIGNvbnRlbnRXaWR0aCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICBjb25zdCBzeSA9IHJlY3QuaGVpZ2h0IC8gY29udGVudEhlaWdodCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICBjb25zdCB0eCA9IHJlY3QubGVmdDtcbiAgICAgIGNvbnN0IHR5ID0gcmVjdC50b3A7XG4gICAgICBjb25zdCBuZXdUcmFuc2Zvcm0gPSBgdHJhbnNsYXRlKCR7dHh9cHgsICR7dHl9cHgpIHNjYWxlKCR7c3h9LCAke3N5fSlgO1xuICAgICAgaWYgKG5ld1RyYW5zZm9ybSAhPT0gdGhpcy5fbGFzdFRyYW5zZm9ybSkge1xuICAgICAgICB0aGlzLl9kb21FbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IG5ld1RyYW5zZm9ybTtcbiAgICAgICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IG5ld1RyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuX2RvbUVsZW1lbnQgPSBvcHRpb25zLmRvbUVsZW1lbnQ7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSBvcHRpb25zLnJlbmRlcmVyO1xuICAgIGlmIChnbG9iYWxUaGlzLk9mZnNjcmVlbkNhbnZhcyAmJiB0aGlzLl9yZW5kZXJlci5jYW52YXMgaW5zdGFuY2VvZiBPZmZzY3JlZW5DYW52YXMpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5fY2FudmFzID0gdGhpcy5fcmVuZGVyZXIuY2FudmFzO1xuICAgIHRoaXMuX2F0dGFjaE9ic2VydmVyKCk7XG4gIH1cbiAgLyoqIFRoZSBjYW52YXMgZWxlbWVudCB0aGF0IHRoaXMgQ2FudmFzT2JzZXJ2ZXIgaXMgYXNzb2NpYXRlZCB3aXRoLiAqL1xuICBnZXQgY2FudmFzKCkge1xuICAgIHJldHVybiB0aGlzLl9jYW52YXM7XG4gIH1cbiAgLyoqIEF0dGFjaGVzIHRoZSBET00gZWxlbWVudCB0byB0aGUgY2FudmFzIHBhcmVudCBpZiBpdCBpcyBub3QgYWxyZWFkeSBhdHRhY2hlZC4gKi9cbiAgZW5zdXJlQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9kb21FbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5fY2FudmFzLnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuX2NhbnZhcy5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuX2RvbUVsZW1lbnQpO1xuICAgICAgdGhpcy51cGRhdGVUcmFuc2xhdGlvbigpO1xuICAgIH1cbiAgfVxuICAvKiogU2V0cyB1cCBhIFJlc2l6ZU9ic2VydmVyIGlmIGF2YWlsYWJsZS4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIERPTSBlbGVtZW50IGlzIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBjYW52YXMgc2l6ZSAuICovXG4gIF9hdHRhY2hPYnNlcnZlcigpIHtcbiAgICBpZiAoXCJSZXNpemVPYnNlcnZlclwiIGluIGdsb2JhbFRoaXMpIHtcbiAgICAgIGlmICh0aGlzLl9vYnNlcnZlcikge1xuICAgICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRoaXMuX29ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZW50cnkgb2YgZW50cmllcykge1xuICAgICAgICAgIGlmIChlbnRyeS50YXJnZXQgIT09IHRoaXMuX2NhbnZhcykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IGNvbnRlbnRXaWR0aCA9IHRoaXMuY2FudmFzLndpZHRoO1xuICAgICAgICAgIGNvbnN0IGNvbnRlbnRIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgY29uc3Qgc3ggPSBlbnRyeS5jb250ZW50UmVjdC53aWR0aCAvIGNvbnRlbnRXaWR0aCAqIHRoaXMuX3JlbmRlcmVyLnJlc29sdXRpb247XG4gICAgICAgICAgY29uc3Qgc3kgPSBlbnRyeS5jb250ZW50UmVjdC5oZWlnaHQgLyBjb250ZW50SGVpZ2h0ICogdGhpcy5fcmVuZGVyZXIucmVzb2x1dGlvbjtcbiAgICAgICAgICBjb25zdCBuZWVkc1VwZGF0ZSA9IHRoaXMuX2xhc3RTY2FsZVggIT09IHN4IHx8IHRoaXMuX2xhc3RTY2FsZVkgIT09IHN5O1xuICAgICAgICAgIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVUcmFuc2xhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNjYWxlWCA9IHN4O1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNjYWxlWSA9IHN5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLl9vYnNlcnZlci5vYnNlcnZlKHRoaXMuX2NhbnZhcyk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5fdGlja2VyQXR0YWNoZWQpIHtcbiAgICAgIFRpY2tlci5zaGFyZWQuYWRkKHRoaXMudXBkYXRlVHJhbnNsYXRpb24sIHRoaXMsIFVQREFURV9QUklPUklUWS5ISUdIKTtcbiAgICB9XG4gIH1cbiAgLyoqIERlc3Ryb3lzIHRoZSBDYW52YXNPYnNlcnZlciBpbnN0YW5jZSwgY2xlYW5pbmcgdXAgb2JzZXJ2ZXJzIGFuZCBUaWNrZXIuICovXG4gIGRlc3Ryb3koKSB7XG4gICAgaWYgKHRoaXMuX29ic2VydmVyKSB7XG4gICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgfSBlbHNlIGlmICh0aGlzLl90aWNrZXJBdHRhY2hlZCkge1xuICAgICAgVGlja2VyLnNoYXJlZC5yZW1vdmUodGhpcy51cGRhdGVUcmFuc2xhdGlvbik7XG4gICAgfVxuICAgIHRoaXMuX2RvbUVsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9jYW52YXMgPSBudWxsO1xuICAgIHRoaXMuX3RpY2tlckF0dGFjaGVkID0gZmFsc2U7XG4gICAgdGhpcy5fbGFzdFRyYW5zZm9ybSA9IFwiXCI7XG4gICAgdGhpcy5fbGFzdFNjYWxlWCA9IG51bGw7XG4gICAgdGhpcy5fbGFzdFNjYWxlWSA9IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2FudmFzT2JzZXJ2ZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUNhbnZhc09ic2VydmVyLm1qcy5tYXBcbiIsImltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vbWF0aHMvcG9pbnQvUG9pbnQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBGZWRlcmF0ZWRFdmVudCB7XG4gIC8qKlxuICAgKiBAcGFyYW0gbWFuYWdlciAtIFRoZSBldmVudCBib3VuZGFyeSB3aGljaCBtYW5hZ2VzIHRoaXMgZXZlbnQuIFByb3BhZ2F0aW9uIGNhbiBvbmx5IG9jY3VyXG4gICAqICB3aXRoaW4gdGhlIGJvdW5kYXJ5J3MganVyaXNkaWN0aW9uLlxuICAgKi9cbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIC8qKiBGbGFncyB3aGV0aGVyIHRoaXMgZXZlbnQgYnViYmxlcy4gVGhpcyB3aWxsIHRha2UgZWZmZWN0IG9ubHkgaWYgaXQgaXMgc2V0IGJlZm9yZSBwcm9wYWdhdGlvbi4gKi9cbiAgICB0aGlzLmJ1YmJsZXMgPSB0cnVlO1xuICAgIC8qKiBAZGVwcmVjYXRlZCBzaW5jZSA3LjAuMCAqL1xuICAgIHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBGbGFncyB3aGV0aGVyIHRoaXMgZXZlbnQgY2FuIGJlIGNhbmNlbGVkIHVzaW5nIHtAbGluayBGZWRlcmF0ZWRFdmVudC5wcmV2ZW50RGVmYXVsdH0uIFRoaXMgaXMgYWx3YXlzXG4gICAgICogZmFsc2UgKGZvciBub3cpLlxuICAgICAqL1xuICAgIHRoaXMuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIEZsYWcgYWRkZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBET00gYEV2ZW50YC4gSXQgaXMgbm90IHVzZWQgaW4gdGhlIEZlZGVyYXRlZCBFdmVudHNcbiAgICAgKiBBUEkuXG4gICAgICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2RvbS1ldmVudC1jb21wb3NlZFxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICB0aGlzLmNvbXBvc2VkID0gZmFsc2U7XG4gICAgLyoqIEZsYWdzIHdoZXRoZXIgdGhlIGRlZmF1bHQgcmVzcG9uc2Ugb2YgdGhlIHVzZXIgYWdlbnQgd2FzIHByZXZlbnQgdGhyb3VnaCB0aGlzIGV2ZW50LiAqL1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuICAgIC8qKlxuICAgICAqIFRoZSBwcm9wYWdhdGlvbiBwaGFzZS5cbiAgICAgKiBAZGVmYXVsdCB7QGxpbmsgRmVkZXJhdGVkRXZlbnQuTk9ORX1cbiAgICAgKi9cbiAgICB0aGlzLmV2ZW50UGhhc2UgPSBGZWRlcmF0ZWRFdmVudC5wcm90b3R5cGUuTk9ORTtcbiAgICAvKiogRmxhZ3Mgd2hldGhlciBwcm9wYWdhdGlvbiB3YXMgc3RvcHBlZC4gKi9cbiAgICB0aGlzLnByb3BhZ2F0aW9uU3RvcHBlZCA9IGZhbHNlO1xuICAgIC8qKiBGbGFncyB3aGV0aGVyIHByb3BhZ2F0aW9uIHdhcyBpbW1lZGlhdGVseSBzdG9wcGVkLiAqL1xuICAgIHRoaXMucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQgPSBmYWxzZTtcbiAgICAvKiogVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBldmVudCByZWxhdGl2ZSB0byB0aGUgbmVhcmVzdCBET00gbGF5ZXIuIFRoaXMgaXMgYSBub24tc3RhbmRhcmQgcHJvcGVydHkuICovXG4gICAgdGhpcy5sYXllciA9IG5ldyBQb2ludCgpO1xuICAgIC8qKiBUaGUgY29vcmRpbmF0ZXMgb2YgdGhlIGV2ZW50IHJlbGF0aXZlIHRvIHRoZSBET00gZG9jdW1lbnQuIFRoaXMgaXMgYSBub24tc3RhbmRhcmQgcHJvcGVydHkuICovXG4gICAgdGhpcy5wYWdlID0gbmV3IFBvaW50KCk7XG4gICAgLyoqXG4gICAgICogVGhlIGV2ZW50IHByb3BhZ2F0aW9uIHBoYXNlIE5PTkUgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZXZlbnQgaXMgbm90IGluIGFueSBwaGFzZS5cbiAgICAgKiBAZGVmYXVsdCAwXG4gICAgICogQGFkdmFuY2VkXG4gICAgICovXG4gICAgdGhpcy5OT05FID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQ0FQVFVSSU5HX1BIQVNFIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIGV2ZW50IGlzIGluIHRoZSBjYXB0dXJpbmcgcGhhc2UuXG4gICAgICogQGRlZmF1bHQgMVxuICAgICAqIEBhZHZhbmNlZFxuICAgICAqL1xuICAgIHRoaXMuQ0FQVFVSSU5HX1BIQVNFID0gMTtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQVRfVEFSR0VUIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIGV2ZW50IGlzIGF0IHRoZSB0YXJnZXQuXG4gICAgICogQGRlZmF1bHQgMlxuICAgICAqIEBhZHZhbmNlZFxuICAgICAqL1xuICAgIHRoaXMuQVRfVEFSR0VUID0gMjtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcHJvcGFnYXRpb24gcGhhc2UgQlVCQkxJTkdfUEhBU0UgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgZXZlbnQgaXMgaW4gdGhlIGJ1YmJsaW5nIHBoYXNlLlxuICAgICAqIEBkZWZhdWx0IDNcbiAgICAgKiBAYWR2YW5jZWRcbiAgICAgKi9cbiAgICB0aGlzLkJVQkJMSU5HX1BIQVNFID0gMztcbiAgICB0aGlzLm1hbmFnZXIgPSBtYW5hZ2VyO1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGxheWVyWCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllci54O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGxheWVyWSgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllci55O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IHBhZ2VYKCkge1xuICAgIHJldHVybiB0aGlzLnBhZ2UueDtcbiAgfVxuICAvKiogQHJlYWRvbmx5ICovXG4gIGdldCBwYWdlWSgpIHtcbiAgICByZXR1cm4gdGhpcy5wYWdlLnk7XG4gIH1cbiAgLyoqXG4gICAqIEZhbGxiYWNrIGZvciB0aGUgZGVwcmVjYXRlZCBgSW50ZXJhY3Rpb25FdmVudC5kYXRhYC5cbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNy4wLjBcbiAgICovXG4gIGdldCBkYXRhKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIC8qKlxuICAgKiBUaGUgcHJvcGFnYXRpb24gcGF0aCBmb3IgdGhpcyBldmVudC4gQWxpYXMgZm9yIHtAbGluayBFdmVudEJvdW5kYXJ5LnByb3BhZ2F0aW9uUGF0aH0uXG4gICAqIEBhZHZhbmNlZFxuICAgKi9cbiAgY29tcG9zZWRQYXRoKCkge1xuICAgIGlmICh0aGlzLm1hbmFnZXIgJiYgKCF0aGlzLnBhdGggfHwgdGhpcy5wYXRoW3RoaXMucGF0aC5sZW5ndGggLSAxXSAhPT0gdGhpcy50YXJnZXQpKSB7XG4gICAgICB0aGlzLnBhdGggPSB0aGlzLnRhcmdldCA/IHRoaXMubWFuYWdlci5wcm9wYWdhdGlvblBhdGgodGhpcy50YXJnZXQpIDogW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhdGg7XG4gIH1cbiAgLyoqXG4gICAqIFVuaW1wbGVtZW50ZWQgbWV0aG9kIGluY2x1ZGVkIGZvciBpbXBsZW1lbnRpbmcgdGhlIERPTSBpbnRlcmZhY2UgYEV2ZW50YC4gSXQgd2lsbCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgKiBAZGVwcmVjYXRlZFxuICAgKiBAaWdub3JlXG4gICAqIEBwYXJhbSBfdHlwZVxuICAgKiBAcGFyYW0gX2J1YmJsZXNcbiAgICogQHBhcmFtIF9jYW5jZWxhYmxlXG4gICAqL1xuICBpbml0RXZlbnQoX3R5cGUsIF9idWJibGVzLCBfY2FuY2VsYWJsZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImluaXRFdmVudCgpIGlzIGEgbGVnYWN5IERPTSBBUEkuIEl0IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGUgRmVkZXJhdGVkIEV2ZW50cyBBUEkuXCIpO1xuICB9XG4gIC8qKlxuICAgKiBVbmltcGxlbWVudGVkIG1ldGhvZCBpbmNsdWRlZCBmb3IgaW1wbGVtZW50aW5nIHRoZSBET00gaW50ZXJmYWNlIGBVSUV2ZW50YC4gSXQgd2lsbCB0aHJvdyBhbiBgRXJyb3JgLlxuICAgKiBAaWdub3JlXG4gICAqIEBkZXByZWNhdGVkXG4gICAqIEBwYXJhbSBfdHlwZUFyZ1xuICAgKiBAcGFyYW0gX2J1YmJsZXNBcmdcbiAgICogQHBhcmFtIF9jYW5jZWxhYmxlQXJnXG4gICAqIEBwYXJhbSBfdmlld0FyZ1xuICAgKiBAcGFyYW0gX2RldGFpbEFyZ1xuICAgKi9cbiAgaW5pdFVJRXZlbnQoX3R5cGVBcmcsIF9idWJibGVzQXJnLCBfY2FuY2VsYWJsZUFyZywgX3ZpZXdBcmcsIF9kZXRhaWxBcmcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJpbml0VUlFdmVudCgpIGlzIGEgbGVnYWN5IERPTSBBUEkuIEl0IGlzIG5vdCBpbXBsZW1lbnRlZCBpbiB0aGUgRmVkZXJhdGVkIEV2ZW50cyBBUEkuXCIpO1xuICB9XG4gIC8qKlxuICAgKiBQcmV2ZW50IGRlZmF1bHQgYmVoYXZpb3Igb2YgYm90aCBQaXhpSlMgYW5kIHRoZSB1c2VyIGFnZW50LlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBzcHJpdGUub24oJ2NsaWNrJywgKGV2ZW50KSA9PiB7XG4gICAqICAgICAvLyBQcmV2ZW50IGJvdGggYnJvd3NlcidzIGRlZmF1bHQgY2xpY2sgYmVoYXZpb3JcbiAgICogICAgIC8vIGFuZCBQaXhpSlMncyBkZWZhdWx0IGhhbmRsaW5nXG4gICAqICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgKlxuICAgKiAgICAgLy8gQ3VzdG9tIGhhbmRsaW5nXG4gICAqICAgICBjdXN0b21DbGlja0hhbmRsZXIoKTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAcmVtYXJrc1xuICAgKiAtIE9ubHkgd29ya3MgaWYgdGhlIG5hdGl2ZSBldmVudCBpcyBjYW5jZWxhYmxlXG4gICAqIC0gRG9lcyBub3Qgc3RvcCBldmVudCBwcm9wYWdhdGlvblxuICAgKi9cbiAgcHJldmVudERlZmF1bHQoKSB7XG4gICAgaWYgKHRoaXMubmF0aXZlRXZlbnQgaW5zdGFuY2VvZiBFdmVudCAmJiB0aGlzLm5hdGl2ZUV2ZW50LmNhbmNlbGFibGUpIHtcbiAgICAgIHRoaXMubmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgdGhpcy5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0aGlzIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gYW55IGFkZGl0aW9uYWwgbGlzdGVuZXJzLCBpbmNsdWRpbmcgdGhvc2VcbiAgICogb24gdGhlIGN1cnJlbnQgdGFyZ2V0IGFuZCBhbnkgZm9sbG93aW5nIHRhcmdldHMgaW4gdGhlIHByb3BhZ2F0aW9uIHBhdGguXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnRhaW5lci5vbigncG9pbnRlcmRvd24nLCAoZXZlbnQpID0+IHtcbiAgICogICAgIC8vIFN0b3AgYWxsIGZ1cnRoZXIgZXZlbnQgaGFuZGxpbmdcbiAgICogICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgKlxuICAgKiAgICAgLy8gVGhlc2UgaGFuZGxlcnMgd29uJ3QgYmUgY2FsbGVkOlxuICAgKiAgICAgLy8gLSBPdGhlciBwb2ludGVyZG93biBsaXN0ZW5lcnMgb24gdGhpcyBjb250YWluZXJcbiAgICogICAgIC8vIC0gQW55IHBvaW50ZXJkb3duIGxpc3RlbmVycyBvbiBwYXJlbnQgY29udGFpbmVyc1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gSW1tZWRpYXRlbHkgc3RvcHMgYWxsIGV2ZW50IHByb3BhZ2F0aW9uXG4gICAqIC0gUHJldmVudHMgb3RoZXIgbGlzdGVuZXJzIG9uIHNhbWUgdGFyZ2V0IGZyb20gYmVpbmcgY2FsbGVkXG4gICAqIC0gTW9yZSBhZ2dyZXNzaXZlIHRoYW4gc3RvcFByb3BhZ2F0aW9uKClcbiAgICovXG4gIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICB0aGlzLnByb3BhZ2F0aW9uSW1tZWRpYXRlbHlTdG9wcGVkID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogU3RvcCB0aGlzIGV2ZW50IGZyb20gcHJvcGFnYXRpbmcgdG8gdGhlIG5leHQgdGFyZ2V0IGluIHRoZSBwcm9wYWdhdGlvbiBwYXRoLlxuICAgKiBUaGUgcmVzdCBvZiB0aGUgbGlzdGVuZXJzIG9uIHRoZSBjdXJyZW50IHRhcmdldCB3aWxsIHN0aWxsIGJlIG5vdGlmaWVkLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiBjaGlsZC5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICAgIC8vIEhhbmRsZSBldmVudCBvbiBjaGlsZFxuICAgKiAgICAgdXBkYXRlQ2hpbGQoKTtcbiAgICpcbiAgICogICAgIC8vIFByZXZlbnQgcGFyZW50IGhhbmRsZXJzIGZyb20gYmVpbmcgY2FsbGVkXG4gICAqICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICogfSk7XG4gICAqXG4gICAqIC8vIFRoaXMgd29uJ3QgYmUgY2FsbGVkIGlmIGNoaWxkIGhhbmRsZXMgdGhlIGV2ZW50XG4gICAqIHBhcmVudC5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQpID0+IHtcbiAgICogICAgIHVwZGF0ZVBhcmVudCgpO1xuICAgKiB9KTtcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gU3RvcHMgZXZlbnQgYnViYmxpbmcgdG8gcGFyZW50IGNvbnRhaW5lcnNcbiAgICogLSBEb2VzIG5vdCBwcmV2ZW50IG90aGVyIGxpc3RlbmVycyBvbiBzYW1lIHRhcmdldFxuICAgKiAtIExlc3MgYWdncmVzc2l2ZSB0aGFuIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG4gICAqL1xuICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgdGhpcy5wcm9wYWdhdGlvblN0b3BwZWQgPSB0cnVlO1xuICB9XG59XG5cbmV4cG9ydCB7IEZlZGVyYXRlZEV2ZW50IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GZWRlcmF0ZWRFdmVudC5tanMubWFwXG4iLCJ2YXIgYXBwbGVJcGhvbmUgPSAvaVBob25lL2k7XG52YXIgYXBwbGVJcG9kID0gL2lQb2QvaTtcbnZhciBhcHBsZVRhYmxldCA9IC9pUGFkL2k7XG52YXIgYXBwbGVVbml2ZXJzYWwgPSAvXFxiaU9TLXVuaXZlcnNhbCg/Oi4rKU1hY1xcYi9pO1xudmFyIGFuZHJvaWRQaG9uZSA9IC9cXGJBbmRyb2lkKD86LispTW9iaWxlXFxiL2k7XG52YXIgYW5kcm9pZFRhYmxldCA9IC9BbmRyb2lkL2k7XG52YXIgYW1hem9uUGhvbmUgPSAvKD86U0Q0OTMwVVJ8XFxiU2lsayg/Oi4rKU1vYmlsZVxcYikvaTtcbnZhciBhbWF6b25UYWJsZXQgPSAvU2lsay9pO1xudmFyIHdpbmRvd3NQaG9uZSA9IC9XaW5kb3dzIFBob25lL2k7XG52YXIgd2luZG93c1RhYmxldCA9IC9cXGJXaW5kb3dzKD86LispQVJNXFxiL2k7XG52YXIgb3RoZXJCbGFja0JlcnJ5ID0gL0JsYWNrQmVycnkvaTtcbnZhciBvdGhlckJsYWNrQmVycnkxMCA9IC9CQjEwL2k7XG52YXIgb3RoZXJPcGVyYSA9IC9PcGVyYSBNaW5pL2k7XG52YXIgb3RoZXJDaHJvbWUgPSAvXFxiKENyaU9TfENocm9tZSkoPzouKylNb2JpbGUvaTtcbnZhciBvdGhlckZpcmVmb3ggPSAvTW9iaWxlKD86LispRmlyZWZveFxcYi9pO1xudmFyIGlzQXBwbGVUYWJsZXRPbklvczEzID0gZnVuY3Rpb24gKG5hdmlnYXRvcikge1xuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgbmF2aWdhdG9yLnBsYXRmb3JtID09PSAnTWFjSW50ZWwnICYmXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPT09ICdudW1iZXInICYmXG4gICAgICAgIG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDEgJiZcbiAgICAgICAgdHlwZW9mIE1TU3RyZWFtID09PSAndW5kZWZpbmVkJyk7XG59O1xuZnVuY3Rpb24gY3JlYXRlTWF0Y2godXNlckFnZW50KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZWdleCkgeyByZXR1cm4gcmVnZXgudGVzdCh1c2VyQWdlbnQpOyB9O1xufVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNNb2JpbGUocGFyYW0pIHtcbiAgICB2YXIgbmF2ID0ge1xuICAgICAgICB1c2VyQWdlbnQ6ICcnLFxuICAgICAgICBwbGF0Zm9ybTogJycsXG4gICAgICAgIG1heFRvdWNoUG9pbnRzOiAwXG4gICAgfTtcbiAgICBpZiAoIXBhcmFtICYmIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIG5hdiA9IHtcbiAgICAgICAgICAgIHVzZXJBZ2VudDogbmF2aWdhdG9yLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBuYXZpZ2F0b3IucGxhdGZvcm0sXG4gICAgICAgICAgICBtYXhUb3VjaFBvaW50czogbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzIHx8IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgICAgICBuYXYudXNlckFnZW50ID0gcGFyYW07XG4gICAgfVxuICAgIGVsc2UgaWYgKHBhcmFtICYmIHBhcmFtLnVzZXJBZ2VudCkge1xuICAgICAgICBuYXYgPSB7XG4gICAgICAgICAgICB1c2VyQWdlbnQ6IHBhcmFtLnVzZXJBZ2VudCxcbiAgICAgICAgICAgIHBsYXRmb3JtOiBwYXJhbS5wbGF0Zm9ybSxcbiAgICAgICAgICAgIG1heFRvdWNoUG9pbnRzOiBwYXJhbS5tYXhUb3VjaFBvaW50cyB8fCAwXG4gICAgICAgIH07XG4gICAgfVxuICAgIHZhciB1c2VyQWdlbnQgPSBuYXYudXNlckFnZW50O1xuICAgIHZhciB0bXAgPSB1c2VyQWdlbnQuc3BsaXQoJ1tGQkFOJyk7XG4gICAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVzZXJBZ2VudCA9IHRtcFswXTtcbiAgICB9XG4gICAgdG1wID0gdXNlckFnZW50LnNwbGl0KCdUd2l0dGVyJyk7XG4gICAgaWYgKHR5cGVvZiB0bXBbMV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVzZXJBZ2VudCA9IHRtcFswXTtcbiAgICB9XG4gICAgdmFyIG1hdGNoID0gY3JlYXRlTWF0Y2godXNlckFnZW50KTtcbiAgICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICBhcHBsZToge1xuICAgICAgICAgICAgcGhvbmU6IG1hdGNoKGFwcGxlSXBob25lKSAmJiAhbWF0Y2god2luZG93c1Bob25lKSxcbiAgICAgICAgICAgIGlwb2Q6IG1hdGNoKGFwcGxlSXBvZCksXG4gICAgICAgICAgICB0YWJsZXQ6ICFtYXRjaChhcHBsZUlwaG9uZSkgJiZcbiAgICAgICAgICAgICAgICAobWF0Y2goYXBwbGVUYWJsZXQpIHx8IGlzQXBwbGVUYWJsZXRPbklvczEzKG5hdikpICYmXG4gICAgICAgICAgICAgICAgIW1hdGNoKHdpbmRvd3NQaG9uZSksXG4gICAgICAgICAgICB1bml2ZXJzYWw6IG1hdGNoKGFwcGxlVW5pdmVyc2FsKSxcbiAgICAgICAgICAgIGRldmljZTogKG1hdGNoKGFwcGxlSXBob25lKSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKGFwcGxlSXBvZCkgfHxcbiAgICAgICAgICAgICAgICBtYXRjaChhcHBsZVRhYmxldCkgfHxcbiAgICAgICAgICAgICAgICBtYXRjaChhcHBsZVVuaXZlcnNhbCkgfHxcbiAgICAgICAgICAgICAgICBpc0FwcGxlVGFibGV0T25Jb3MxMyhuYXYpKSAmJlxuICAgICAgICAgICAgICAgICFtYXRjaCh3aW5kb3dzUGhvbmUpXG4gICAgICAgIH0sXG4gICAgICAgIGFtYXpvbjoge1xuICAgICAgICAgICAgcGhvbmU6IG1hdGNoKGFtYXpvblBob25lKSxcbiAgICAgICAgICAgIHRhYmxldDogIW1hdGNoKGFtYXpvblBob25lKSAmJiBtYXRjaChhbWF6b25UYWJsZXQpLFxuICAgICAgICAgICAgZGV2aWNlOiBtYXRjaChhbWF6b25QaG9uZSkgfHwgbWF0Y2goYW1hem9uVGFibGV0KVxuICAgICAgICB9LFxuICAgICAgICBhbmRyb2lkOiB7XG4gICAgICAgICAgICBwaG9uZTogKCFtYXRjaCh3aW5kb3dzUGhvbmUpICYmIG1hdGNoKGFtYXpvblBob25lKSkgfHxcbiAgICAgICAgICAgICAgICAoIW1hdGNoKHdpbmRvd3NQaG9uZSkgJiYgbWF0Y2goYW5kcm9pZFBob25lKSksXG4gICAgICAgICAgICB0YWJsZXQ6ICFtYXRjaCh3aW5kb3dzUGhvbmUpICYmXG4gICAgICAgICAgICAgICAgIW1hdGNoKGFtYXpvblBob25lKSAmJlxuICAgICAgICAgICAgICAgICFtYXRjaChhbmRyb2lkUGhvbmUpICYmXG4gICAgICAgICAgICAgICAgKG1hdGNoKGFtYXpvblRhYmxldCkgfHwgbWF0Y2goYW5kcm9pZFRhYmxldCkpLFxuICAgICAgICAgICAgZGV2aWNlOiAoIW1hdGNoKHdpbmRvd3NQaG9uZSkgJiZcbiAgICAgICAgICAgICAgICAobWF0Y2goYW1hem9uUGhvbmUpIHx8XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoKGFtYXpvblRhYmxldCkgfHxcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2goYW5kcm9pZFBob25lKSB8fFxuICAgICAgICAgICAgICAgICAgICBtYXRjaChhbmRyb2lkVGFibGV0KSkpIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2goL1xcYm9raHR0cFxcYi9pKVxuICAgICAgICB9LFxuICAgICAgICB3aW5kb3dzOiB7XG4gICAgICAgICAgICBwaG9uZTogbWF0Y2god2luZG93c1Bob25lKSxcbiAgICAgICAgICAgIHRhYmxldDogbWF0Y2god2luZG93c1RhYmxldCksXG4gICAgICAgICAgICBkZXZpY2U6IG1hdGNoKHdpbmRvd3NQaG9uZSkgfHwgbWF0Y2god2luZG93c1RhYmxldClcbiAgICAgICAgfSxcbiAgICAgICAgb3RoZXI6IHtcbiAgICAgICAgICAgIGJsYWNrYmVycnk6IG1hdGNoKG90aGVyQmxhY2tCZXJyeSksXG4gICAgICAgICAgICBibGFja2JlcnJ5MTA6IG1hdGNoKG90aGVyQmxhY2tCZXJyeTEwKSxcbiAgICAgICAgICAgIG9wZXJhOiBtYXRjaChvdGhlck9wZXJhKSxcbiAgICAgICAgICAgIGZpcmVmb3g6IG1hdGNoKG90aGVyRmlyZWZveCksXG4gICAgICAgICAgICBjaHJvbWU6IG1hdGNoKG90aGVyQ2hyb21lKSxcbiAgICAgICAgICAgIGRldmljZTogbWF0Y2gob3RoZXJCbGFja0JlcnJ5KSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyQmxhY2tCZXJyeTEwKSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyT3BlcmEpIHx8XG4gICAgICAgICAgICAgICAgbWF0Y2gob3RoZXJGaXJlZm94KSB8fFxuICAgICAgICAgICAgICAgIG1hdGNoKG90aGVyQ2hyb21lKVxuICAgICAgICB9LFxuICAgICAgICBhbnk6IGZhbHNlLFxuICAgICAgICBwaG9uZTogZmFsc2UsXG4gICAgICAgIHRhYmxldDogZmFsc2VcbiAgICB9O1xuICAgIHJlc3VsdC5hbnkgPVxuICAgICAgICByZXN1bHQuYXBwbGUuZGV2aWNlIHx8XG4gICAgICAgICAgICByZXN1bHQuYW5kcm9pZC5kZXZpY2UgfHxcbiAgICAgICAgICAgIHJlc3VsdC53aW5kb3dzLmRldmljZSB8fFxuICAgICAgICAgICAgcmVzdWx0Lm90aGVyLmRldmljZTtcbiAgICByZXN1bHQucGhvbmUgPVxuICAgICAgICByZXN1bHQuYXBwbGUucGhvbmUgfHwgcmVzdWx0LmFuZHJvaWQucGhvbmUgfHwgcmVzdWx0LndpbmRvd3MucGhvbmU7XG4gICAgcmVzdWx0LnRhYmxldCA9XG4gICAgICAgIHJlc3VsdC5hcHBsZS50YWJsZXQgfHwgcmVzdWx0LmFuZHJvaWQudGFibGV0IHx8IHJlc3VsdC53aW5kb3dzLnRhYmxldDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNNb2JpbGUuanMubWFwIiwiaW1wb3J0IGlzTW9iaWxlSnMgZnJvbSAnaXNtb2JpbGVqcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgaXNNb2JpbGVDYWxsID0gaXNNb2JpbGVKcy5kZWZhdWx0ID8/IGlzTW9iaWxlSnM7XG5jb25zdCBpc01vYmlsZSA9IGlzTW9iaWxlQ2FsbChnbG9iYWxUaGlzLm5hdmlnYXRvcik7XG5cbmV4cG9ydCB7IGlzTW9iaWxlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc01vYmlsZS5tanMubWFwXG4iLCJpbXBvcnQgeyBDYW52YXNPYnNlcnZlciB9IGZyb20gJy4uL2RvbS9DYW52YXNPYnNlcnZlci5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkRXZlbnQgfSBmcm9tICcuLi9ldmVudHMvRmVkZXJhdGVkRXZlbnQubWpzJztcbmltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IGlzTW9iaWxlIH0gZnJvbSAnLi4vdXRpbHMvYnJvd3Nlci9pc01vYmlsZS5tanMnO1xuaW1wb3J0IHsgcmVtb3ZlSXRlbXMgfSBmcm9tICcuLi91dGlscy9kYXRhL3JlbW92ZUl0ZW1zLm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgS0VZX0NPREVfVEFCID0gOTtcbmNvbnN0IERJVl9UT1VDSF9TSVpFID0gMTAwO1xuY29uc3QgRElWX1RPVUNIX1BPU19YID0gMDtcbmNvbnN0IERJVl9UT1VDSF9QT1NfWSA9IDA7XG5jb25zdCBESVZfVE9VQ0hfWklOREVYID0gMjtcbmNvbnN0IERJVl9IT09LX1NJWkUgPSAxO1xuY29uc3QgRElWX0hPT0tfUE9TX1ggPSAtMWUzO1xuY29uc3QgRElWX0hPT0tfUE9TX1kgPSAtMWUzO1xuY29uc3QgRElWX0hPT0tfWklOREVYID0gMjtcbmNvbnN0IF9BY2Nlc3NpYmlsaXR5U3lzdGVtID0gY2xhc3MgX0FjY2Vzc2liaWxpdHlTeXN0ZW0ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUganNkb2MvcmVxdWlyZS1wYXJhbVxuICAvKipcbiAgICogQHBhcmFtIHtXZWJHTFJlbmRlcmVyfFdlYkdQVVJlbmRlcmVyfSByZW5kZXJlciAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjdXJyZW50IHJlbmRlcmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgX21vYmlsZUluZm8gPSBpc01vYmlsZSkge1xuICAgIHRoaXMuX21vYmlsZUluZm8gPSBfbW9iaWxlSW5mbztcbiAgICAvKiogV2hldGhlciBhY2Nlc3NpYmlsaXR5IGRpdnMgYXJlIHZpc2libGUgZm9yIGRlYnVnZ2luZyAqL1xuICAgIHRoaXMuZGVidWcgPSBmYWxzZTtcbiAgICAvKiogV2hldGhlciB0byBhY3RpdmF0ZSBvbiB0YWIga2V5IHByZXNzICovXG4gICAgdGhpcy5fYWN0aXZhdGVPblRhYiA9IHRydWU7XG4gICAgLyoqIFdoZXRoZXIgdG8gZGVhY3RpdmF0ZSBhY2Nlc3NpYmlsaXR5IHdoZW4gbW91c2UgbW92ZXMgKi9cbiAgICB0aGlzLl9kZWFjdGl2YXRlT25Nb3VzZU1vdmUgPSB0cnVlO1xuICAgIC8qKiBJbnRlcm5hbCB2YXJpYWJsZSwgc2VlIGlzQWN0aXZlIGdldHRlci4gKi9cbiAgICB0aGlzLl9pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIC8qKiBJbnRlcm5hbCB2YXJpYWJsZSwgc2VlIGlzTW9iaWxlQWNjZXNzaWJpbGl0eSBnZXR0ZXIuICovXG4gICAgdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5ID0gZmFsc2U7XG4gICAgLyoqIFRoaXMgaXMgdGhlIGRvbSBlbGVtZW50IHRoYXQgd2lsbCBzaXQgb3ZlciB0aGUgUGl4aUpTIGVsZW1lbnQuIFRoaXMgaXMgd2hlcmUgdGhlIGRpdiBvdmVybGF5cyB3aWxsIGdvLiAqL1xuICAgIHRoaXMuX2RpdiA9IG51bGw7XG4gICAgLyoqIEEgc2ltcGxlIHBvb2wgZm9yIHN0b3JpbmcgZGl2cy4gKi9cbiAgICB0aGlzLl9wb29scyA9IHt9O1xuICAgIC8qKiBUaGlzIGlzIGEgdGljayB1c2VkIHRvIGNoZWNrIGlmIGFuIG9iamVjdCBpcyBubyBsb25nZXIgYmVpbmcgcmVuZGVyZWQuICovXG4gICAgdGhpcy5fcmVuZGVySWQgPSAwO1xuICAgIC8qKiBUaGUgYXJyYXkgb2YgY3VycmVudGx5IGFjdGl2ZSBhY2Nlc3NpYmxlIGl0ZW1zLiAqL1xuICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG4gICAgLyoqIENvdW50IHRvIHRocm90dGxlIGRpdiB1cGRhdGVzIG9uIGFuZHJvaWQgZGV2aWNlcy4gKi9cbiAgICB0aGlzLl9hbmRyb2lkVXBkYXRlQ291bnQgPSAwO1xuICAgIC8qKiAgVGhlIGZyZXF1ZW5jeSB0byB1cGRhdGUgdGhlIGRpdiBlbGVtZW50cy4gKi9cbiAgICB0aGlzLl9hbmRyb2lkVXBkYXRlRnJlcXVlbmN5ID0gNTAwO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJlZmVyLXJlYWRvbmx5XG4gICAgdGhpcy5faXNSdW5uaW5nVGVzdHMgPSBmYWxzZTtcbiAgICAvKiogQm91bmQgZnVuY3Rpb24gcmVmZXJlbmNlcyBmb3IgcHJvcGVyIGV2ZW50IGxpc3RlbmVyIHJlbW92YWwgKi9cbiAgICB0aGlzLl9ib3VuZE9uS2V5RG93biA9IHRoaXMuX29uS2V5RG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2JvdW5kT25Nb3VzZU1vdmUgPSB0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hvb2tEaXYgPSBudWxsO1xuICAgIGlmIChfbW9iaWxlSW5mby50YWJsZXQgfHwgX21vYmlsZUluZm8ucGhvbmUpIHtcbiAgICAgIHRoaXMuX2NyZWF0ZVRvdWNoSG9vaygpO1xuICAgIH1cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICB9XG4gIC8qKlxuICAgKiBWYWx1ZSBvZiBgdHJ1ZWAgaWYgYWNjZXNzaWJpbGl0eSBpcyBjdXJyZW50bHkgYWN0aXZlIGFuZCBhY2Nlc3NpYmlsaXR5IGxheWVycyBhcmUgc2hvd2luZy5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLl9pc0FjdGl2ZTtcbiAgfVxuICAvKipcbiAgICogVmFsdWUgb2YgYHRydWVgIGlmIGFjY2Vzc2liaWxpdHkgaXMgZW5hYmxlZCBmb3IgdG91Y2ggZGV2aWNlcy5cbiAgICogQHR5cGUge2Jvb2xlYW59XG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IGlzTW9iaWxlQWNjZXNzaWJpbGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5O1xuICB9XG4gIC8qKlxuICAgKiBCdXR0b24gZWxlbWVudCBmb3IgaGFuZGxpbmcgdG91Y2ggaG9va3MuXG4gICAqIEByZWFkb25seVxuICAgKi9cbiAgZ2V0IGhvb2tEaXYoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hvb2tEaXY7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBET00gZWxlbWVudCB0aGF0IHdpbGwgc2l0IG92ZXIgdGhlIFBpeGlKUyBlbGVtZW50LiBUaGlzIGlzIHdoZXJlIHRoZSBkaXYgb3ZlcmxheXMgd2lsbCBnby5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgZGl2KCkge1xuICAgIHJldHVybiB0aGlzLl9kaXY7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgdGhlIHRvdWNoIGhvb2tzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2NyZWF0ZVRvdWNoSG9vaygpIHtcbiAgICBjb25zdCBob29rRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBob29rRGl2LnN0eWxlLndpZHRoID0gYCR7RElWX0hPT0tfU0laRX1weGA7XG4gICAgaG9va0Rpdi5zdHlsZS5oZWlnaHQgPSBgJHtESVZfSE9PS19TSVpFfXB4YDtcbiAgICBob29rRGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuICAgIGhvb2tEaXYuc3R5bGUudG9wID0gYCR7RElWX0hPT0tfUE9TX1h9cHhgO1xuICAgIGhvb2tEaXYuc3R5bGUubGVmdCA9IGAke0RJVl9IT09LX1BPU19ZfXB4YDtcbiAgICBob29rRGl2LnN0eWxlLnpJbmRleCA9IERJVl9IT09LX1pJTkRFWC50b1N0cmluZygpO1xuICAgIGhvb2tEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gXCIjRkYwMDAwXCI7XG4gICAgaG9va0Rpdi50aXRsZSA9IFwic2VsZWN0IHRvIGVuYWJsZSBhY2Nlc3NpYmlsaXR5IGZvciB0aGlzIGNvbnRlbnRcIjtcbiAgICBob29rRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9pc01vYmlsZUFjY2Vzc2liaWxpdHkgPSB0cnVlO1xuICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcbiAgICAgIHRoaXMuX2Rlc3Ryb3lUb3VjaEhvb2soKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGhvb2tEaXYpO1xuICAgIHRoaXMuX2hvb2tEaXYgPSBob29rRGl2O1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgdG91Y2ggaG9va3MuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfZGVzdHJveVRvdWNoSG9vaygpIHtcbiAgICBpZiAoIXRoaXMuX2hvb2tEaXYpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh0aGlzLl9ob29rRGl2KTtcbiAgICB0aGlzLl9ob29rRGl2ID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogQWN0aXZhdGluZyB3aWxsIGNhdXNlIHRoZSBBY2Nlc3NpYmlsaXR5IGxheWVyIHRvIGJlIHNob3duLlxuICAgKiBUaGlzIGlzIGNhbGxlZCB3aGVuIGEgdXNlciBwcmVzc2VzIHRoZSB0YWIga2V5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2FjdGl2YXRlKCkge1xuICAgIGlmICh0aGlzLl9pc0FjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9pc0FjdGl2ZSA9IHRydWU7XG4gICAgaWYgKCF0aGlzLl9kaXYpIHtcbiAgICAgIHRoaXMuX2RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB0aGlzLl9kaXYuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICB0aGlzLl9kaXYuc3R5bGUudG9wID0gYCR7RElWX1RPVUNIX1BPU19YfXB4YDtcbiAgICAgIHRoaXMuX2Rpdi5zdHlsZS5sZWZ0ID0gYCR7RElWX1RPVUNIX1BPU19ZfXB4YDtcbiAgICAgIHRoaXMuX2Rpdi5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJub25lXCI7XG4gICAgICB0aGlzLl9kaXYuc3R5bGUuekluZGV4ID0gRElWX1RPVUNIX1pJTkRFWC50b1N0cmluZygpO1xuICAgICAgdGhpcy5fY2FudmFzT2JzZXJ2ZXIgPSBuZXcgQ2FudmFzT2JzZXJ2ZXIoe1xuICAgICAgICBkb21FbGVtZW50OiB0aGlzLl9kaXYsXG4gICAgICAgIHJlbmRlcmVyOiB0aGlzLl9yZW5kZXJlclxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9hY3RpdmF0ZU9uVGFiKSB7XG4gICAgICBnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kT25LZXlEb3duLCBmYWxzZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9kZWFjdGl2YXRlT25Nb3VzZU1vdmUpIHtcbiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9ib3VuZE9uTW91c2VNb3ZlLCB0cnVlKTtcbiAgICB9XG4gICAgY29uc3QgY2FudmFzID0gdGhpcy5fcmVuZGVyZXIudmlldy5jYW52YXM7XG4gICAgaWYgKCFjYW52YXMucGFyZW50Tm9kZSkge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgIGlmIChjYW52YXMucGFyZW50Tm9kZSkge1xuICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5lbnN1cmVBdHRhY2hlZCgpO1xuICAgICAgICAgIHRoaXMuX2luaXRBY2Nlc3NpYmlsaXR5U2V0dXAoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9jYW52YXNPYnNlcnZlci5lbnN1cmVBdHRhY2hlZCgpO1xuICAgICAgdGhpcy5faW5pdEFjY2Vzc2liaWxpdHlTZXR1cCgpO1xuICAgIH1cbiAgfVxuICAvLyBOZXcgbWV0aG9kIHRvIGhhbmRsZSBpbml0aWFsaXphdGlvbiBhZnRlciBkaXYgaXMgcmVhZHlcbiAgX2luaXRBY2Nlc3NpYmlsaXR5U2V0dXAoKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIucnVubmVycy5wb3N0cmVuZGVyLmFkZCh0aGlzKTtcbiAgICBpZiAodGhpcy5fcmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkKSB7XG4gICAgICB0aGlzLl91cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyh0aGlzLl9yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRGVhY3RpdmF0ZXMgdGhlIGFjY2Vzc2liaWxpdHkgc3lzdGVtLiBSZW1vdmVzIGxpc3RlbmVycyBhbmQgYWNjZXNzaWJpbGl0eSBlbGVtZW50cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9kZWFjdGl2YXRlKCkge1xuICAgIGlmICghdGhpcy5faXNBY3RpdmUgfHwgdGhpcy5faXNNb2JpbGVBY2Nlc3NpYmlsaXR5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2JvdW5kT25Nb3VzZU1vdmUsIHRydWUpO1xuICAgIGlmICh0aGlzLl9hY3RpdmF0ZU9uVGFiKSB7XG4gICAgICBnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kT25LZXlEb3duLCBmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlcmVyLnJ1bm5lcnMucG9zdHJlbmRlci5yZW1vdmUodGhpcyk7XG4gICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLl9jaGlsZHJlbikge1xuICAgICAgaWYgKGNoaWxkLl9hY2Nlc3NpYmxlRGl2ICYmIGNoaWxkLl9hY2Nlc3NpYmxlRGl2LnBhcmVudE5vZGUpIHtcbiAgICAgICAgY2hpbGQuX2FjY2Vzc2libGVEaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjaGlsZC5fYWNjZXNzaWJsZURpdik7XG4gICAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlRGl2ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNoaWxkLl9hY2Nlc3NpYmxlQWN0aXZlID0gZmFsc2U7XG4gICAgfVxuICAgIGZvciAoY29uc3QgYWNjZXNzaWJsZVR5cGUgaW4gdGhpcy5fcG9vbHMpIHtcbiAgICAgIGNvbnN0IHBvb2wgPSB0aGlzLl9wb29sc1thY2Nlc3NpYmxlVHlwZV07XG4gICAgICBwb29sLmZvckVhY2goKGRpdikgPT4ge1xuICAgICAgICBpZiAoZGl2LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBkaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkaXYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGRlbGV0ZSB0aGlzLl9wb29sc1thY2Nlc3NpYmxlVHlwZV07XG4gICAgfVxuICAgIGlmICh0aGlzLl9kaXYgJiYgdGhpcy5fZGl2LnBhcmVudE5vZGUpIHtcbiAgICAgIHRoaXMuX2Rpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2Rpdik7XG4gICAgfVxuICAgIHRoaXMuX3Bvb2xzID0ge307XG4gICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgfVxuICAvKipcbiAgICogVGhpcyByZWN1cnNpdmUgZnVuY3Rpb24gd2lsbCBydW4gdGhyb3VnaCB0aGUgc2NlbmUgZ3JhcGggYW5kIGFkZCBhbnkgbmV3IGFjY2Vzc2libGUgb2JqZWN0cyB0byB0aGUgRE9NIGxheWVyLlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge0NvbnRhaW5lcn0gY29udGFpbmVyIC0gVGhlIENvbnRhaW5lciB0byBjaGVjay5cbiAgICovXG4gIF91cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyhjb250YWluZXIpIHtcbiAgICBpZiAoIWNvbnRhaW5lci52aXNpYmxlIHx8ICFjb250YWluZXIuYWNjZXNzaWJsZUNoaWxkcmVuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjb250YWluZXIuYWNjZXNzaWJsZSkge1xuICAgICAgaWYgKCFjb250YWluZXIuX2FjY2Vzc2libGVBY3RpdmUpIHtcbiAgICAgICAgdGhpcy5fYWRkQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5fcmVuZGVySWQgPSB0aGlzLl9yZW5kZXJJZDtcbiAgICB9XG4gICAgY29uc3QgY2hpbGRyZW4gPSBjb250YWluZXIuY2hpbGRyZW47XG4gICAgaWYgKGNoaWxkcmVuKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUFjY2Vzc2libGVPYmplY3RzKGNoaWxkcmVuW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFJ1bm5lciBpbml0IGNhbGxlZCwgdmlldyBpcyBhdmFpbGFibGUgYXQgdGhpcyBwb2ludC5cbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaW5pdChvcHRpb25zKSB7XG4gICAgY29uc3QgZGVmYXVsdE9wdHMgPSBfQWNjZXNzaWJpbGl0eVN5c3RlbS5kZWZhdWx0T3B0aW9ucztcbiAgICBjb25zdCBtZXJnZWRPcHRpb25zID0ge1xuICAgICAgYWNjZXNzaWJpbGl0eU9wdGlvbnM6IHtcbiAgICAgICAgLi4uZGVmYXVsdE9wdHMsXG4gICAgICAgIC4uLm9wdGlvbnM/LmFjY2Vzc2liaWxpdHlPcHRpb25zIHx8IHt9XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmRlYnVnID0gbWVyZ2VkT3B0aW9ucy5hY2Nlc3NpYmlsaXR5T3B0aW9ucy5kZWJ1ZztcbiAgICB0aGlzLl9hY3RpdmF0ZU9uVGFiID0gbWVyZ2VkT3B0aW9ucy5hY2Nlc3NpYmlsaXR5T3B0aW9ucy5hY3RpdmF0ZU9uVGFiO1xuICAgIHRoaXMuX2RlYWN0aXZhdGVPbk1vdXNlTW92ZSA9IG1lcmdlZE9wdGlvbnMuYWNjZXNzaWJpbGl0eU9wdGlvbnMuZGVhY3RpdmF0ZU9uTW91c2VNb3ZlO1xuICAgIGlmIChtZXJnZWRPcHRpb25zLmFjY2Vzc2liaWxpdHlPcHRpb25zLmVuYWJsZWRCeURlZmF1bHQpIHtcbiAgICAgIHRoaXMuX2FjdGl2YXRlKCk7XG4gICAgfVxuICAgIHRoaXMuX3JlbmRlcmVyLnJ1bm5lcnMucG9zdHJlbmRlci5yZW1vdmUodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIGFjY2Vzc2liaWxpdHkgbGF5ZXIgZHVyaW5nIHJlbmRlcmluZy5cbiAgICogLSBSZW1vdmVzIGRpdnMgZm9yIGNvbnRhaW5lcnMgbm8gbG9uZ2VyIGluIHRoZSBzY2VuZVxuICAgKiAtIFVwZGF0ZXMgdGhlIHBvc2l0aW9uIGFuZCBkaW1lbnNpb25zIG9mIHRoZSByb290IGRpdlxuICAgKiAtIFVwZGF0ZXMgcG9zaXRpb25zIG9mIGFjdGl2ZSBhY2Nlc3NpYmlsaXR5IGRpdnNcbiAgICogT25seSBmaXJlcyB3aGlsZSB0aGUgYWNjZXNzaWJpbGl0eSBzeXN0ZW0gaXMgYWN0aXZlLlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBwb3N0cmVuZGVyKCkge1xuICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGlmICh0aGlzLl9tb2JpbGVJbmZvLmFuZHJvaWQuZGV2aWNlICYmIG5vdyA8IHRoaXMuX2FuZHJvaWRVcGRhdGVDb3VudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9hbmRyb2lkVXBkYXRlQ291bnQgPSBub3cgKyB0aGlzLl9hbmRyb2lkVXBkYXRlRnJlcXVlbmN5O1xuICAgIGlmICgoIXRoaXMuX3JlbmRlcmVyLnJlbmRlcmluZ1RvU2NyZWVuIHx8ICF0aGlzLl9yZW5kZXJlci52aWV3LmNhbnZhcykgJiYgIXRoaXMuX2lzUnVubmluZ1Rlc3RzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGFjdGl2ZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG4gICAgaWYgKHRoaXMuX3JlbmRlcmVyLmxhc3RPYmplY3RSZW5kZXJlZCkge1xuICAgICAgdGhpcy5fdXBkYXRlQWNjZXNzaWJsZU9iamVjdHModGhpcy5fcmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkKTtcbiAgICAgIGZvciAoY29uc3QgY2hpbGQgb2YgdGhpcy5fY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGNoaWxkLl9yZW5kZXJJZCA9PT0gdGhpcy5fcmVuZGVySWQpIHtcbiAgICAgICAgICBhY3RpdmVJZHMuYWRkKHRoaXMuX2NoaWxkcmVuLmluZGV4T2YoY2hpbGQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gdGhpcy5fY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5fY2hpbGRyZW5baV07XG4gICAgICBpZiAoIWFjdGl2ZUlkcy5oYXMoaSkpIHtcbiAgICAgICAgaWYgKGNoaWxkLl9hY2Nlc3NpYmxlRGl2ICYmIGNoaWxkLl9hY2Nlc3NpYmxlRGl2LnBhcmVudE5vZGUpIHtcbiAgICAgICAgICBjaGlsZC5fYWNjZXNzaWJsZURpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGNoaWxkLl9hY2Nlc3NpYmxlRGl2KTtcbiAgICAgICAgICBjb25zdCBwb29sID0gdGhpcy5fZ2V0UG9vbChjaGlsZC5hY2Nlc3NpYmxlVHlwZSk7XG4gICAgICAgICAgcG9vbC5wdXNoKGNoaWxkLl9hY2Nlc3NpYmxlRGl2KTtcbiAgICAgICAgICBjaGlsZC5fYWNjZXNzaWJsZURpdiA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY2hpbGQuX2FjY2Vzc2libGVBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgcmVtb3ZlSXRlbXModGhpcy5fY2hpbGRyZW4sIGksIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fcmVuZGVyZXIucmVuZGVyaW5nVG9TY3JlZW4pIHtcbiAgICAgIHRoaXMuX2NhbnZhc09ic2VydmVyLmVuc3VyZUF0dGFjaGVkKCk7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5fY2hpbGRyZW5baV07XG4gICAgICBpZiAoIWNoaWxkLl9hY2Nlc3NpYmxlQWN0aXZlIHx8ICFjaGlsZC5fYWNjZXNzaWJsZURpdikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRpdiA9IGNoaWxkLl9hY2Nlc3NpYmxlRGl2O1xuICAgICAgY29uc3QgaGl0QXJlYSA9IGNoaWxkLmhpdEFyZWEgfHwgY2hpbGQuZ2V0Qm91bmRzKCkucmVjdGFuZ2xlO1xuICAgICAgaWYgKGNoaWxkLmhpdEFyZWEpIHtcbiAgICAgICAgY29uc3Qgd3QgPSBjaGlsZC53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgZGl2LnN0eWxlLmxlZnQgPSBgJHt3dC50eCArIGhpdEFyZWEueCAqIHd0LmF9cHhgO1xuICAgICAgICBkaXYuc3R5bGUudG9wID0gYCR7d3QudHkgKyBoaXRBcmVhLnkgKiB3dC5kfXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLndpZHRoID0gYCR7aGl0QXJlYS53aWR0aCAqIHd0LmF9cHhgO1xuICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7aGl0QXJlYS5oZWlnaHQgKiB3dC5kfXB4YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2NhcEhpdEFyZWEoaGl0QXJlYSk7XG4gICAgICAgIGRpdi5zdHlsZS5sZWZ0ID0gYCR7aGl0QXJlYS54fXB4YDtcbiAgICAgICAgZGl2LnN0eWxlLnRvcCA9IGAke2hpdEFyZWEueX1weGA7XG4gICAgICAgIGRpdi5zdHlsZS53aWR0aCA9IGAke2hpdEFyZWEud2lkdGh9cHhgO1xuICAgICAgICBkaXYuc3R5bGUuaGVpZ2h0ID0gYCR7aGl0QXJlYS5oZWlnaHR9cHhgO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9yZW5kZXJJZCsrO1xuICB9XG4gIC8qKlxuICAgKiBwcml2YXRlIGZ1bmN0aW9uIHRoYXQgd2lsbCB2aXN1YWxseSBhZGQgdGhlIGluZm9ybWF0aW9uIHRvIHRoZVxuICAgKiBhY2Nlc3NpYmlsaXR5IGRpdlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBkaXYgLVxuICAgKi9cbiAgX3VwZGF0ZURlYnVnSFRNTChkaXYpIHtcbiAgICBkaXYuaW5uZXJIVE1MID0gYHR5cGU6ICR7ZGl2LnR5cGV9PC9icj4gdGl0bGUgOiAke2Rpdi50aXRsZX08L2JyPiB0YWJJbmRleDogJHtkaXYudGFiSW5kZXh9YDtcbiAgfVxuICAvKipcbiAgICogQWRqdXN0IHRoZSBoaXQgYXJlYSBiYXNlZCBvbiB0aGUgYm91bmRzIG9mIGEgZGlzcGxheSBvYmplY3RcbiAgICogQHBhcmFtIHtSZWN0YW5nbGV9IGhpdEFyZWEgLSBCb3VuZHMgb2YgdGhlIGNoaWxkXG4gICAqL1xuICBfY2FwSGl0QXJlYShoaXRBcmVhKSB7XG4gICAgaWYgKGhpdEFyZWEueCA8IDApIHtcbiAgICAgIGhpdEFyZWEud2lkdGggKz0gaGl0QXJlYS54O1xuICAgICAgaGl0QXJlYS54ID0gMDtcbiAgICB9XG4gICAgaWYgKGhpdEFyZWEueSA8IDApIHtcbiAgICAgIGhpdEFyZWEuaGVpZ2h0ICs9IGhpdEFyZWEueTtcbiAgICAgIGhpdEFyZWEueSA9IDA7XG4gICAgfVxuICAgIGNvbnN0IHsgd2lkdGg6IHZpZXdXaWR0aCwgaGVpZ2h0OiB2aWV3SGVpZ2h0IH0gPSB0aGlzLl9yZW5kZXJlcjtcbiAgICBpZiAoaGl0QXJlYS54ICsgaGl0QXJlYS53aWR0aCA+IHZpZXdXaWR0aCkge1xuICAgICAgaGl0QXJlYS53aWR0aCA9IHZpZXdXaWR0aCAtIGhpdEFyZWEueDtcbiAgICB9XG4gICAgaWYgKGhpdEFyZWEueSArIGhpdEFyZWEuaGVpZ2h0ID4gdmlld0hlaWdodCkge1xuICAgICAgaGl0QXJlYS5oZWlnaHQgPSB2aWV3SGVpZ2h0IC0gaGl0QXJlYS55O1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBvciByZXVzZXMgYSBkaXYgZWxlbWVudCBmb3IgYSBDb250YWluZXIgYW5kIGFkZHMgaXQgdG8gdGhlIGFjY2Vzc2liaWxpdHkgbGF5ZXIuXG4gICAqIFNldHMgdXAgQVJJQSBhdHRyaWJ1dGVzLCBldmVudCBsaXN0ZW5lcnMsIGFuZCBwb3NpdGlvbmluZyBiYXNlZCBvbiB0aGUgY29udGFpbmVyJ3MgcHJvcGVydGllcy5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtDb250YWluZXJ9IGNvbnRhaW5lciAtIFRoZSBjaGlsZCB0byBtYWtlIGFjY2Vzc2libGUuXG4gICAqL1xuICBfYWRkQ2hpbGQoY29udGFpbmVyKSB7XG4gICAgY29uc3QgcG9vbCA9IHRoaXMuX2dldFBvb2woY29udGFpbmVyLmFjY2Vzc2libGVUeXBlKTtcbiAgICBsZXQgZGl2ID0gcG9vbC5wb3AoKTtcbiAgICBpZiAoZGl2KSB7XG4gICAgICBkaXYuaW5uZXJIVE1MID0gXCJcIjtcbiAgICAgIGRpdi5yZW1vdmVBdHRyaWJ1dGUoXCJ0aXRsZVwiKTtcbiAgICAgIGRpdi5yZW1vdmVBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpO1xuICAgICAgZGl2LnRhYkluZGV4ID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRhaW5lci5hY2Nlc3NpYmxlVHlwZSA9PT0gXCJidXR0b25cIikge1xuICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChjb250YWluZXIuYWNjZXNzaWJsZVR5cGUpO1xuICAgICAgICBkaXYuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmU6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgICAgICAgICAgLW1zLXVzZXItc2VsZWN0OiBub25lO1xuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgICBpZiAoY29udGFpbmVyLmFjY2Vzc2libGVUZXh0KSB7XG4gICAgICAgICAgZGl2LmlubmVyVGV4dCA9IGNvbnRhaW5lci5hY2Nlc3NpYmxlVGV4dDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZGl2LnN0eWxlLndpZHRoID0gYCR7RElWX1RPVUNIX1NJWkV9cHhgO1xuICAgICAgZGl2LnN0eWxlLmhlaWdodCA9IGAke0RJVl9UT1VDSF9TSVpFfXB4YDtcbiAgICAgIGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmRlYnVnID8gXCJyZ2JhKDI1NSwyNTUsMjU1LDAuNSlcIiA6IFwidHJhbnNwYXJlbnRcIjtcbiAgICAgIGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICAgIGRpdi5zdHlsZS56SW5kZXggPSBESVZfVE9VQ0hfWklOREVYLnRvU3RyaW5nKCk7XG4gICAgICBkaXYuc3R5bGUuYm9yZGVyU3R5bGUgPSBcIm5vbmVcIjtcbiAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJjaHJvbWVcIikpIHtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiLCBcIm9mZlwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIik7XG4gICAgICB9XG4gICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvcnY6LipHZWNrb1xcLy8pKSB7XG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJhcmlhLXJlbGV2YW50XCIsIFwiYWRkaXRpb25zXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZShcImFyaWEtcmVsZXZhbnRcIiwgXCJ0ZXh0XCIpO1xuICAgICAgfVxuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9vbkNsaWNrLmJpbmQodGhpcykpO1xuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLl9vbkZvY3VzLmJpbmQodGhpcykpO1xuICAgICAgZGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCB0aGlzLl9vbkZvY3VzT3V0LmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBkaXYuc3R5bGUucG9pbnRlckV2ZW50cyA9IGNvbnRhaW5lci5hY2Nlc3NpYmxlUG9pbnRlckV2ZW50cztcbiAgICBkaXYudHlwZSA9IGNvbnRhaW5lci5hY2Nlc3NpYmxlVHlwZTtcbiAgICBpZiAoY29udGFpbmVyLmFjY2Vzc2libGVUaXRsZSAmJiBjb250YWluZXIuYWNjZXNzaWJsZVRpdGxlICE9PSBudWxsKSB7XG4gICAgICBkaXYudGl0bGUgPSBjb250YWluZXIuYWNjZXNzaWJsZVRpdGxlO1xuICAgIH0gZWxzZSBpZiAoIWNvbnRhaW5lci5hY2Nlc3NpYmxlSGludCB8fCBjb250YWluZXIuYWNjZXNzaWJsZUhpbnQgPT09IG51bGwpIHtcbiAgICAgIGRpdi50aXRsZSA9IGBjb250YWluZXIgJHtjb250YWluZXIudGFiSW5kZXh9YDtcbiAgICB9XG4gICAgaWYgKGNvbnRhaW5lci5hY2Nlc3NpYmxlSGludCAmJiBjb250YWluZXIuYWNjZXNzaWJsZUhpbnQgIT09IG51bGwpIHtcbiAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGNvbnRhaW5lci5hY2Nlc3NpYmxlSGludCk7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIuaW50ZXJhY3RpdmUpIHtcbiAgICAgIGRpdi50YWJJbmRleCA9IGNvbnRhaW5lci50YWJJbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGl2LnRhYkluZGV4ID0gMDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZGVidWcpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZURlYnVnSFRNTChkaXYpO1xuICAgIH1cbiAgICBjb250YWluZXIuX2FjY2Vzc2libGVBY3RpdmUgPSB0cnVlO1xuICAgIGNvbnRhaW5lci5fYWNjZXNzaWJsZURpdiA9IGRpdjtcbiAgICBkaXYuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgIHRoaXMuX2NoaWxkcmVuLnB1c2goY29udGFpbmVyKTtcbiAgICB0aGlzLl9kaXYuYXBwZW5kQ2hpbGQoY29udGFpbmVyLl9hY2Nlc3NpYmxlRGl2KTtcbiAgfVxuICAvKipcbiAgICogRGlzcGF0Y2ggZXZlbnRzIHdpdGggdGhlIEV2ZW50U3lzdGVtLlxuICAgKiBAcGFyYW0gZVxuICAgKiBAcGFyYW0gdHlwZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2Rpc3BhdGNoRXZlbnQoZSwgdHlwZSkge1xuICAgIGNvbnN0IHsgY29udGFpbmVyOiB0YXJnZXQgfSA9IGUudGFyZ2V0O1xuICAgIGNvbnN0IGJvdW5kYXJ5ID0gdGhpcy5fcmVuZGVyZXIuZXZlbnRzLnJvb3RCb3VuZGFyeTtcbiAgICBjb25zdCBldmVudCA9IE9iamVjdC5hc3NpZ24obmV3IEZlZGVyYXRlZEV2ZW50KGJvdW5kYXJ5KSwgeyB0YXJnZXQgfSk7XG4gICAgYm91bmRhcnkucm9vdFRhcmdldCA9IHRoaXMuX3JlbmRlcmVyLmxhc3RPYmplY3RSZW5kZXJlZDtcbiAgICB0eXBlLmZvckVhY2goKHR5cGUyKSA9PiBib3VuZGFyeS5kaXNwYXRjaEV2ZW50KGV2ZW50LCB0eXBlMikpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSBkaXYgYnV0dG9uIHByZXNzIHRvIHBpeGkncyBFdmVudFN5c3RlbSAoY2xpY2spXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZSAtIFRoZSBjbGljayBldmVudC5cbiAgICovXG4gIF9vbkNsaWNrKGUpIHtcbiAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGUsIFtcImNsaWNrXCIsIFwicG9pbnRlcnRhcFwiLCBcInRhcFwiXSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIGRpdiBmb2N1cyBldmVudHMgdG8gcGl4aSdzIEV2ZW50U3lzdGVtIChtb3VzZW92ZXIpXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7Rm9jdXNFdmVudH0gZSAtIFRoZSBmb2N1cyBldmVudC5cbiAgICovXG4gIF9vbkZvY3VzKGUpIHtcbiAgICBpZiAoIWUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImFyaWEtbGl2ZVwiKSkge1xuICAgICAgZS50YXJnZXQuc2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIsIFwiYXNzZXJ0aXZlXCIpO1xuICAgIH1cbiAgICB0aGlzLl9kaXNwYXRjaEV2ZW50KGUsIFtcIm1vdXNlb3ZlclwiXSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIGRpdiBmb2N1cyBldmVudHMgdG8gcGl4aSdzIEV2ZW50U3lzdGVtIChtb3VzZW91dClcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtGb2N1c0V2ZW50fSBlIC0gVGhlIGZvY3Vzb3V0IGV2ZW50LlxuICAgKi9cbiAgX29uRm9jdXNPdXQoZSkge1xuICAgIGlmICghZS50YXJnZXQuZ2V0QXR0cmlidXRlKFwiYXJpYS1saXZlXCIpKSB7XG4gICAgICBlLnRhcmdldC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIik7XG4gICAgfVxuICAgIHRoaXMuX2Rpc3BhdGNoRXZlbnQoZSwgW1wibW91c2VvdXRcIl0pO1xuICB9XG4gIC8qKlxuICAgKiBJcyBjYWxsZWQgd2hlbiBhIGtleSBpcyBwcmVzc2VkXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZSAtIFRoZSBrZXlkb3duIGV2ZW50LlxuICAgKi9cbiAgX29uS2V5RG93bihlKSB7XG4gICAgaWYgKGUua2V5Q29kZSAhPT0gS0VZX0NPREVfVEFCIHx8ICF0aGlzLl9hY3RpdmF0ZU9uVGFiKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2FjdGl2YXRlKCk7XG4gIH1cbiAgLyoqXG4gICAqIElzIGNhbGxlZCB3aGVuIHRoZSBtb3VzZSBtb3ZlcyBhY3Jvc3MgdGhlIHJlbmRlcmVyIGVsZW1lbnRcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlIC0gVGhlIG1vdXNlIGV2ZW50LlxuICAgKi9cbiAgX29uTW91c2VNb3ZlKGUpIHtcbiAgICBpZiAoZS5tb3ZlbWVudFggPT09IDAgJiYgZS5tb3ZlbWVudFkgPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICB9XG4gIC8qKlxuICAgKiBEZXN0cm95cyB0aGUgYWNjZXNzaWJpbGl0eSBzeXN0ZW0uIFJlbW92ZXMgYWxsIGVsZW1lbnRzIGFuZCBsaXN0ZW5lcnMuXG4gICAqID4gWyFJTVBPUlRBTlRdIFRoaXMgaXMgdHlwaWNhbGx5IGNhbGxlZCBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlIHtAbGluayBBcHBsaWNhdGlvbn0gaXMgZGVzdHJveWVkLlxuICAgKiA+IEEgdHlwaWNhbGx5IHVzZXIgc2hvdWxkIG5vdCBuZWVkIHRvIGNhbGwgdGhpcyBtZXRob2QgZGlyZWN0bHkuXG4gICAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMuX2RlYWN0aXZhdGUoKTtcbiAgICB0aGlzLl9kZXN0cm95VG91Y2hIb29rKCk7XG4gICAgdGhpcy5fY2FudmFzT2JzZXJ2ZXI/LmRlc3Ryb3koKTtcbiAgICB0aGlzLl9jYW52YXNPYnNlcnZlciA9IG51bGw7XG4gICAgdGhpcy5fZGl2ID0gbnVsbDtcbiAgICB0aGlzLl9wb29scyA9IG51bGw7XG4gICAgdGhpcy5fY2hpbGRyZW4gPSBudWxsO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9ob29rRGl2ID0gbnVsbDtcbiAgICBnbG9iYWxUaGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2JvdW5kT25LZXlEb3duKTtcbiAgICB0aGlzLl9ib3VuZE9uS2V5RG93biA9IG51bGw7XG4gICAgZ2xvYmFsVGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2JvdW5kT25Nb3VzZU1vdmUsIHRydWUpO1xuICAgIHRoaXMuX2JvdW5kT25Nb3VzZU1vdmUgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBFbmFibGVzIG9yIGRpc2FibGVzIHRoZSBhY2Nlc3NpYmlsaXR5IHN5c3RlbS5cbiAgICogQHBhcmFtIGVuYWJsZWQgLSBXaGV0aGVyIHRvIGVuYWJsZSBvciBkaXNhYmxlIGFjY2Vzc2liaWxpdHkuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGpzXG4gICAqIGFwcC5yZW5kZXJlci5hY2Nlc3NpYmlsaXR5LnNldEFjY2Vzc2liaWxpdHlFbmFibGVkKHRydWUpOyAvLyBFbmFibGUgYWNjZXNzaWJpbGl0eVxuICAgKiBhcHAucmVuZGVyZXIuYWNjZXNzaWJpbGl0eS5zZXRBY2Nlc3NpYmlsaXR5RW5hYmxlZChmYWxzZSk7IC8vIERpc2FibGUgYWNjZXNzaWJpbGl0eVxuICAgKiBgYGBcbiAgICovXG4gIHNldEFjY2Vzc2liaWxpdHlFbmFibGVkKGVuYWJsZWQpIHtcbiAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgdGhpcy5fYWN0aXZhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuICBfZ2V0UG9vbChhY2Nlc3NpYmxlVHlwZSkge1xuICAgIGlmICghdGhpcy5fcG9vbHNbYWNjZXNzaWJsZVR5cGVdKSB7XG4gICAgICB0aGlzLl9wb29sc1thY2Nlc3NpYmxlVHlwZV0gPSBbXTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Bvb2xzW2FjY2Vzc2libGVUeXBlXTtcbiAgfVxufTtcbi8qKiBAaWdub3JlICovXG5fQWNjZXNzaWJpbGl0eVN5c3RlbS5leHRlbnNpb24gPSB7XG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVU3lzdGVtXG4gIF0sXG4gIG5hbWU6IFwiYWNjZXNzaWJpbGl0eVwiXG59O1xuLyoqXG4gKiBUaGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIHN5c3RlbS5cbiAqIFlvdSBjYW4gc2V0IHRoZXNlIGJlZm9yZSBpbml0aWFsaXppbmcgdGhlIHtAbGluayBBcHBsaWNhdGlvbn0gdG8gY2hhbmdlIHRoZSBkZWZhdWx0IGJlaGF2aW9yLlxuICogQGV4YW1wbGVcbiAqIGBgYGpzXG4gKiBpbXBvcnQgeyBBY2Nlc3NpYmlsaXR5U3lzdGVtIH0gZnJvbSAncGl4aS5qcyc7XG4gKlxuICogQWNjZXNzaWJpbGl0eVN5c3RlbS5kZWZhdWx0T3B0aW9ucy5lbmFibGVkQnlEZWZhdWx0ID0gdHJ1ZTtcbiAqXG4gKiBjb25zdCBhcHAgPSBuZXcgQXBwbGljYXRpb24oKVxuICogYXBwLmluaXQoKVxuICogYGBgXG4gKi9cbl9BY2Nlc3NpYmlsaXR5U3lzdGVtLmRlZmF1bHRPcHRpb25zID0ge1xuICAvKipcbiAgICogV2hldGhlciB0byBlbmFibGUgYWNjZXNzaWJpbGl0eSBmZWF0dXJlcyBvbiBpbml0aWFsaXphdGlvblxuICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgKi9cbiAgZW5hYmxlZEJ5RGVmYXVsdDogZmFsc2UsXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHZpc3VhbGx5IHNob3cgdGhlIGFjY2Vzc2liaWxpdHkgZGl2cyBmb3IgZGVidWdnaW5nXG4gICAqIEBkZWZhdWx0IGZhbHNlXG4gICAqL1xuICBkZWJ1ZzogZmFsc2UsXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFjdGl2YXRlIGFjY2Vzc2liaWxpdHkgd2hlbiB0YWIga2V5IGlzIHByZXNzZWRcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgYWN0aXZhdGVPblRhYjogdHJ1ZSxcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGVhY3RpdmF0ZSBhY2Nlc3NpYmlsaXR5IHdoZW4gbW91c2UgbW92ZXNcbiAgICogQGRlZmF1bHQgdHJ1ZVxuICAgKi9cbiAgZGVhY3RpdmF0ZU9uTW91c2VNb3ZlOiB0cnVlXG59O1xubGV0IEFjY2Vzc2liaWxpdHlTeXN0ZW0gPSBfQWNjZXNzaWJpbGl0eVN5c3RlbTtcblxuZXhwb3J0IHsgQWNjZXNzaWJpbGl0eVN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9QWNjZXNzaWJpbGl0eVN5c3RlbS5tanMubWFwXG4iLCJpbXBvcnQgeyBleHRlbnNpb25zIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tICcuLi9zY2VuZS9jb250YWluZXIvQ29udGFpbmVyLm1qcyc7XG5pbXBvcnQgeyBBY2Nlc3NpYmlsaXR5U3lzdGVtIH0gZnJvbSAnLi9BY2Nlc3NpYmlsaXR5U3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBhY2Nlc3NpYmlsaXR5VGFyZ2V0IH0gZnJvbSAnLi9hY2Nlc3NpYmlsaXR5VGFyZ2V0Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuZXh0ZW5zaW9ucy5hZGQoQWNjZXNzaWJpbGl0eVN5c3RlbSk7XG5leHRlbnNpb25zLm1peGluKENvbnRhaW5lciwgYWNjZXNzaWJpbGl0eVRhcmdldCk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbml0Lm1qcy5tYXBcbiIsIlwidXNlIHN0cmljdFwiO1xuY29uc3QgYWNjZXNzaWJpbGl0eVRhcmdldCA9IHtcbiAgYWNjZXNzaWJsZTogZmFsc2UsXG4gIGFjY2Vzc2libGVUaXRsZTogbnVsbCxcbiAgYWNjZXNzaWJsZUhpbnQ6IG51bGwsXG4gIHRhYkluZGV4OiAwLFxuICBhY2Nlc3NpYmxlVHlwZTogXCJidXR0b25cIixcbiAgYWNjZXNzaWJsZVRleHQ6IG51bGwsXG4gIGFjY2Vzc2libGVQb2ludGVyRXZlbnRzOiBcImF1dG9cIixcbiAgYWNjZXNzaWJsZUNoaWxkcmVuOiB0cnVlLFxuICBfYWNjZXNzaWJsZUFjdGl2ZTogZmFsc2UsXG4gIF9hY2Nlc3NpYmxlRGl2OiBudWxsLFxuICBfcmVuZGVySWQ6IC0xXG59O1xuXG5leHBvcnQgeyBhY2Nlc3NpYmlsaXR5VGFyZ2V0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hY2Nlc3NpYmlsaXR5VGFyZ2V0Lm1qcy5tYXBcbiIsImltcG9ydCB7IFVQREFURV9QUklPUklUWSB9IGZyb20gJy4uL3RpY2tlci9jb25zdC5tanMnO1xuaW1wb3J0IHsgVGlja2VyIH0gZnJvbSAnLi4vdGlja2VyL1RpY2tlci5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEV2ZW50c1RpY2tlckNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIFRoZSBmcmVxdWVuY3kgdGhhdCBmYWtlIGV2ZW50cyB3aWxsIGJlIGZpcmVkLiAqL1xuICAgIHRoaXMuaW50ZXJhY3Rpb25GcmVxdWVuY3kgPSAxMDtcbiAgICB0aGlzLl9kZWx0YVRpbWUgPSAwO1xuICAgIHRoaXMuX2RpZE1vdmUgPSBmYWxzZTtcbiAgICB0aGlzLl90aWNrZXJBZGRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3BhdXNlVXBkYXRlID0gdHJ1ZTtcbiAgfVxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGV2ZW50IHRpY2tlci5cbiAgICogQHBhcmFtIGV2ZW50cyAtIFRoZSBldmVudCBzeXN0ZW0uXG4gICAqL1xuICBpbml0KGV2ZW50cykge1xuICAgIHRoaXMucmVtb3ZlVGlja2VyTGlzdGVuZXIoKTtcbiAgICB0aGlzLmV2ZW50cyA9IGV2ZW50cztcbiAgICB0aGlzLmludGVyYWN0aW9uRnJlcXVlbmN5ID0gMTA7XG4gICAgdGhpcy5fZGVsdGFUaW1lID0gMDtcbiAgICB0aGlzLl9kaWRNb3ZlID0gZmFsc2U7XG4gICAgdGhpcy5fdGlja2VyQWRkZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wYXVzZVVwZGF0ZSA9IHRydWU7XG4gIH1cbiAgLyoqIFdoZXRoZXIgdG8gcGF1c2UgdGhlIHVwZGF0ZSBjaGVja3Mgb3Igbm90LiAqL1xuICBnZXQgcGF1c2VVcGRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3BhdXNlVXBkYXRlO1xuICB9XG4gIHNldCBwYXVzZVVwZGF0ZShwYXVzZWQpIHtcbiAgICB0aGlzLl9wYXVzZVVwZGF0ZSA9IHBhdXNlZDtcbiAgfVxuICAvKiogQWRkcyB0aGUgdGlja2VyIGxpc3RlbmVyLiAqL1xuICBhZGRUaWNrZXJMaXN0ZW5lcigpIHtcbiAgICBpZiAodGhpcy5fdGlja2VyQWRkZWQgfHwgIXRoaXMuZG9tRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBUaWNrZXIuc3lzdGVtLmFkZCh0aGlzLl90aWNrZXJVcGRhdGUsIHRoaXMsIFVQREFURV9QUklPUklUWS5JTlRFUkFDVElPTik7XG4gICAgdGhpcy5fdGlja2VyQWRkZWQgPSB0cnVlO1xuICB9XG4gIC8qKiBSZW1vdmVzIHRoZSB0aWNrZXIgbGlzdGVuZXIuICovXG4gIHJlbW92ZVRpY2tlckxpc3RlbmVyKCkge1xuICAgIGlmICghdGhpcy5fdGlja2VyQWRkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgVGlja2VyLnN5c3RlbS5yZW1vdmUodGhpcy5fdGlja2VyVXBkYXRlLCB0aGlzKTtcbiAgICB0aGlzLl90aWNrZXJBZGRlZCA9IGZhbHNlO1xuICB9XG4gIC8qKiBTZXRzIGZsYWcgdG8gbm90IGZpcmUgZXh0cmEgZXZlbnRzIHdoZW4gdGhlIHVzZXIgaGFzIGFscmVhZHkgbW92ZWQgdGhlcmUgbW91c2UgKi9cbiAgcG9pbnRlck1vdmVkKCkge1xuICAgIHRoaXMuX2RpZE1vdmUgPSB0cnVlO1xuICB9XG4gIC8qKiBVcGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzLiAqL1xuICBfdXBkYXRlKCkge1xuICAgIGlmICghdGhpcy5kb21FbGVtZW50IHx8IHRoaXMuX3BhdXNlVXBkYXRlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9kaWRNb3ZlKSB7XG4gICAgICB0aGlzLl9kaWRNb3ZlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJvb3RQb2ludGVyRXZlbnQgPSB0aGlzLmV2ZW50c1tcIl9yb290UG9pbnRlckV2ZW50XCJdO1xuICAgIGlmICh0aGlzLmV2ZW50cy5zdXBwb3J0c1RvdWNoRXZlbnRzICYmIHJvb3RQb2ludGVyRXZlbnQucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnbG9iYWxUaGlzLmRvY3VtZW50LmRpc3BhdGNoRXZlbnQodGhpcy5ldmVudHMuc3VwcG9ydHNQb2ludGVyRXZlbnRzID8gbmV3IFBvaW50ZXJFdmVudChcInBvaW50ZXJtb3ZlXCIsIHtcbiAgICAgIGNsaWVudFg6IHJvb3RQb2ludGVyRXZlbnQuY2xpZW50WCxcbiAgICAgIGNsaWVudFk6IHJvb3RQb2ludGVyRXZlbnQuY2xpZW50WSxcbiAgICAgIHBvaW50ZXJUeXBlOiByb290UG9pbnRlckV2ZW50LnBvaW50ZXJUeXBlLFxuICAgICAgcG9pbnRlcklkOiByb290UG9pbnRlckV2ZW50LnBvaW50ZXJJZFxuICAgIH0pIDogbmV3IE1vdXNlRXZlbnQoXCJtb3VzZW1vdmVcIiwge1xuICAgICAgY2xpZW50WDogcm9vdFBvaW50ZXJFdmVudC5jbGllbnRYLFxuICAgICAgY2xpZW50WTogcm9vdFBvaW50ZXJFdmVudC5jbGllbnRZXG4gICAgfSkpO1xuICB9XG4gIC8qKlxuICAgKiBVcGRhdGVzIHRoZSBzdGF0ZSBvZiBpbnRlcmFjdGl2ZSBvYmplY3RzIGlmIGF0IGxlYXN0IHtAbGluayBpbnRlcmFjdGlvbkZyZXF1ZW5jeX1cbiAgICogbWlsbGlzZWNvbmRzIGhhdmUgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IGludm9jYXRpb24uXG4gICAqXG4gICAqIEludm9rZWQgYnkgYSB0aHJvdHRsZWQgdGlja2VyIHVwZGF0ZSBmcm9tIHtAbGluayBUaWNrZXIuc3lzdGVtfS5cbiAgICogQHBhcmFtIHRpY2tlciAtIFRoZSB0aHJvdHRsZWQgdGlja2VyLlxuICAgKi9cbiAgX3RpY2tlclVwZGF0ZSh0aWNrZXIpIHtcbiAgICB0aGlzLl9kZWx0YVRpbWUgKz0gdGlja2VyLmRlbHRhVGltZTtcbiAgICBpZiAodGhpcy5fZGVsdGFUaW1lIDwgdGhpcy5pbnRlcmFjdGlvbkZyZXF1ZW5jeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9kZWx0YVRpbWUgPSAwO1xuICAgIHRoaXMuX3VwZGF0ZSgpO1xuICB9XG4gIC8qKiBEZXN0cm95cyB0aGUgZXZlbnQgdGlja2VyLiAqL1xuICBkZXN0cm95KCkge1xuICAgIHRoaXMucmVtb3ZlVGlja2VyTGlzdGVuZXIoKTtcbiAgICB0aGlzLmV2ZW50cyA9IG51bGw7XG4gICAgdGhpcy5kb21FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9kZWx0YVRpbWUgPSAwO1xuICAgIHRoaXMuX2RpZE1vdmUgPSBmYWxzZTtcbiAgICB0aGlzLl90aWNrZXJBZGRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3BhdXNlVXBkYXRlID0gdHJ1ZTtcbiAgfVxufVxuY29uc3QgRXZlbnRzVGlja2VyID0gbmV3IEV2ZW50c1RpY2tlckNsYXNzKCk7XG5cbmV4cG9ydCB7IEV2ZW50c1RpY2tlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRUaWNrZXIubWpzLm1hcFxuIiwiaW1wb3J0IHsgUG9pbnQgfSBmcm9tICcuLi9tYXRocy9wb2ludC9Qb2ludC5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZEV2ZW50Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY2xhc3MgRmVkZXJhdGVkTW91c2VFdmVudCBleHRlbmRzIEZlZGVyYXRlZEV2ZW50IHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAvKiogVGhlIGNvb3JkaW5hdGVzIG9mIHRoZSBtb3VzZSBldmVudCByZWxhdGl2ZSB0byB0aGUgY2FudmFzLiAqL1xuICAgIHRoaXMuY2xpZW50ID0gbmV3IFBvaW50KCk7XG4gICAgLyoqIFRoZSBtb3ZlbWVudCBpbiB0aGlzIHBvaW50ZXIgcmVsYXRpdmUgdG8gdGhlIGxhc3QgYG1vdXNlbW92ZWAgZXZlbnQuICovXG4gICAgdGhpcy5tb3ZlbWVudCA9IG5ldyBQb2ludCgpO1xuICAgIC8qKiBUaGUgb2Zmc2V0IG9mIHRoZSBwb2ludGVyIGNvb3JkaW5hdGVzIHcuci50LiB0YXJnZXQgQ29udGFpbmVyIGluIHdvcmxkIHNwYWNlLiBUaGlzIGlzIG5vdCBzdXBwb3J0ZWQgYXQgdGhlIG1vbWVudC4gKi9cbiAgICB0aGlzLm9mZnNldCA9IG5ldyBQb2ludCgpO1xuICAgIC8qKiBUaGUgcG9pbnRlciBjb29yZGluYXRlcyBpbiB3b3JsZCBzcGFjZS4gKi9cbiAgICB0aGlzLmdsb2JhbCA9IG5ldyBQb2ludCgpO1xuICAgIC8qKlxuICAgICAqIFRoZSBwb2ludGVyIGNvb3JkaW5hdGVzIGluIHRoZSByZW5kZXJlcidzIHtAbGluayBBYnN0cmFjdFJlbmRlcmVyLnNjcmVlbiBzY3JlZW59LiBUaGlzIGhhcyBzbGlnaHRseVxuICAgICAqIGRpZmZlcmVudCBzZW1hbnRpY3MgdGhhbiBuYXRpdmUgUG9pbnRlckV2ZW50IHNjcmVlblgvc2NyZWVuWS5cbiAgICAgKi9cbiAgICB0aGlzLnNjcmVlbiA9IG5ldyBQb2ludCgpO1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGNsaWVudFgoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2xpZW50Lng7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgY2xpZW50WSgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnQueTtcbiAgfVxuICAvKipcbiAgICogQWxpYXMgZm9yIHtAbGluayBGZWRlcmF0ZWRNb3VzZUV2ZW50LmNsaWVudFggdGhpcy5jbGllbnRYfS5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgeCgpIHtcbiAgICByZXR1cm4gdGhpcy5jbGllbnRYO1xuICB9XG4gIC8qKlxuICAgKiBBbGlhcyBmb3Ige0BsaW5rIEZlZGVyYXRlZE1vdXNlRXZlbnQuY2xpZW50WSB0aGlzLmNsaWVudFl9LlxuICAgKiBAcmVhZG9ubHlcbiAgICovXG4gIGdldCB5KCkge1xuICAgIHJldHVybiB0aGlzLmNsaWVudFk7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgbW92ZW1lbnRYKCkge1xuICAgIHJldHVybiB0aGlzLm1vdmVtZW50Lng7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgbW92ZW1lbnRZKCkge1xuICAgIHJldHVybiB0aGlzLm1vdmVtZW50Lnk7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgb2Zmc2V0WCgpIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXQueDtcbiAgfVxuICAvKiogQHJlYWRvbmx5ICovXG4gIGdldCBvZmZzZXRZKCkge1xuICAgIHJldHVybiB0aGlzLm9mZnNldC55O1xuICB9XG4gIC8qKiBAcmVhZG9ubHkgKi9cbiAgZ2V0IGdsb2JhbFgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2xvYmFsLng7XG4gIH1cbiAgLyoqIEByZWFkb25seSAqL1xuICBnZXQgZ2xvYmFsWSgpIHtcbiAgICByZXR1cm4gdGhpcy5nbG9iYWwueTtcbiAgfVxuICAvKipcbiAgICogVGhlIHBvaW50ZXIgY29vcmRpbmF0ZXMgaW4gdGhlIHJlbmRlcmVyJ3Mgc2NyZWVuLiBBbGlhcyBmb3IgYHNjcmVlbi54YC5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgc2NyZWVuWCgpIHtcbiAgICByZXR1cm4gdGhpcy5zY3JlZW4ueDtcbiAgfVxuICAvKipcbiAgICogVGhlIHBvaW50ZXIgY29vcmRpbmF0ZXMgaW4gdGhlIHJlbmRlcmVyJ3Mgc2NyZWVuLiBBbGlhcyBmb3IgYHNjcmVlbi55YC5cbiAgICogQHJlYWRvbmx5XG4gICAqL1xuICBnZXQgc2NyZWVuWSgpIHtcbiAgICByZXR1cm4gdGhpcy5zY3JlZW4ueTtcbiAgfVxuICAvKipcbiAgICogQ29udmVydHMgZ2xvYmFsIGNvb3JkaW5hdGVzIGludG8gY29udGFpbmVyLWxvY2FsIGNvb3JkaW5hdGVzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCB0cmFuc2Zvcm1zIGNvb3JkaW5hdGVzIGZyb20gd29ybGQgc3BhY2UgdG8gYSBjb250YWluZXIncyBsb2NhbCBzcGFjZSxcbiAgICogdXNlZnVsIGZvciBwcmVjaXNlIHBvc2l0aW9uaW5nIGFuZCBoaXQgdGVzdGluZy5cbiAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBDb250YWluZXIgdG8gZ2V0IGxvY2FsIGNvb3JkaW5hdGVzIGZvclxuICAgKiBAcGFyYW0gcG9pbnQgLSBPcHRpb25hbCBQb2ludCBvYmplY3QgdG8gc3RvcmUgdGhlIHJlc3VsdC4gSWYgbm90IHByb3ZpZGVkLCBhIG5ldyBQb2ludCB3aWxsIGJlIGNyZWF0ZWRcbiAgICogQHBhcmFtIGdsb2JhbFBvcyAtIE9wdGlvbmFsIGN1c3RvbSBnbG9iYWwgY29vcmRpbmF0ZXMuIElmIG5vdCBwcm92aWRlZCwgdGhlIGV2ZW50J3MgZ2xvYmFsIHBvc2l0aW9uIGlzIHVzZWRcbiAgICogQHJldHVybnMgVGhlIGxvY2FsIGNvb3JkaW5hdGVzIGFzIGEgUG9pbnQgb2JqZWN0XG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIEJhc2ljIHVzYWdlIC0gZ2V0IGxvY2FsIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIGEgY29udGFpbmVyXG4gICAqIHNwcml0ZS5vbigncG9pbnRlcm1vdmUnLCAoZXZlbnQ6IEZlZGVyYXRlZE1vdXNlRXZlbnQpID0+IHtcbiAgICogICAgIC8vIEdldCBwb3NpdGlvbiByZWxhdGl2ZSB0byB0aGUgc3ByaXRlXG4gICAqICAgICBjb25zdCBsb2NhbFBvcyA9IGV2ZW50LmdldExvY2FsUG9zaXRpb24oc3ByaXRlKTtcbiAgICogICAgIGNvbnNvbGUubG9nKCdMb2NhbCBwb3NpdGlvbjonLCBsb2NhbFBvcy54LCBsb2NhbFBvcy55KTtcbiAgICogfSk7XG4gICAqIC8vIFVzaW5nIGN1c3RvbSBnbG9iYWwgY29vcmRpbmF0ZXNcbiAgICogY29uc3QgY3VzdG9tR2xvYmFsID0gbmV3IFBvaW50KDEwMCwgMTAwKTtcbiAgICogc3ByaXRlLm9uKCdwb2ludGVybW92ZScsIChldmVudDogRmVkZXJhdGVkTW91c2VFdmVudCkgPT4ge1xuICAgKiAgICAgLy8gVHJhbnNmb3JtIGN1c3RvbSBjb29yZGluYXRlc1xuICAgKiAgICAgY29uc3QgbG9jYWxQb3MgPSBldmVudC5nZXRMb2NhbFBvc2l0aW9uKHNwcml0ZSwgdW5kZWZpbmVkLCBjdXN0b21HbG9iYWwpO1xuICAgKiAgICAgY29uc29sZS5sb2coJ0N1c3RvbSBsb2NhbCBwb3NpdGlvbjonLCBsb2NhbFBvcy54LCBsb2NhbFBvcy55KTtcbiAgICogfSk7XG4gICAqIGBgYFxuICAgKiBAc2VlIHtAbGluayBDb250YWluZXIud29ybGRUcmFuc2Zvcm19IEZvciB0aGUgdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gICAqIEBzZWUge0BsaW5rIFBvaW50fSBGb3IgdGhlIHBvaW50IGNsYXNzIHVzZWQgdG8gc3RvcmUgY29vcmRpbmF0ZXNcbiAgICovXG4gIGdldExvY2FsUG9zaXRpb24oY29udGFpbmVyLCBwb2ludCwgZ2xvYmFsUG9zKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2UoZ2xvYmFsUG9zIHx8IHRoaXMuZ2xvYmFsLCBwb2ludCk7XG4gIH1cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIG1vZGlmaWVyIGtleSB3YXMgcHJlc3NlZCB3aGVuIHRoaXMgZXZlbnQgbmF0aXZlbHkgb2NjdXJyZWQuXG4gICAqIEBwYXJhbSBrZXkgLSBUaGUgbW9kaWZpZXIga2V5LlxuICAgKi9cbiAgZ2V0TW9kaWZpZXJTdGF0ZShrZXkpIHtcbiAgICByZXR1cm4gXCJnZXRNb2RpZmllclN0YXRlXCIgaW4gdGhpcy5uYXRpdmVFdmVudCAmJiB0aGlzLm5hdGl2ZUV2ZW50LmdldE1vZGlmaWVyU3RhdGUoa2V5KTtcbiAgfVxuICAvKipcbiAgICogTm90IHN1cHBvcnRlZC5cbiAgICogQHBhcmFtIF90eXBlQXJnXG4gICAqIEBwYXJhbSBfY2FuQnViYmxlQXJnXG4gICAqIEBwYXJhbSBfY2FuY2VsYWJsZUFyZ1xuICAgKiBAcGFyYW0gX3ZpZXdBcmdcbiAgICogQHBhcmFtIF9kZXRhaWxBcmdcbiAgICogQHBhcmFtIF9zY3JlZW5YQXJnXG4gICAqIEBwYXJhbSBfc2NyZWVuWUFyZ1xuICAgKiBAcGFyYW0gX2NsaWVudFhBcmdcbiAgICogQHBhcmFtIF9jbGllbnRZQXJnXG4gICAqIEBwYXJhbSBfY3RybEtleUFyZ1xuICAgKiBAcGFyYW0gX2FsdEtleUFyZ1xuICAgKiBAcGFyYW0gX3NoaWZ0S2V5QXJnXG4gICAqIEBwYXJhbSBfbWV0YUtleUFyZ1xuICAgKiBAcGFyYW0gX2J1dHRvbkFyZ1xuICAgKiBAcGFyYW0gX3JlbGF0ZWRUYXJnZXRBcmdcbiAgICogQGRlcHJlY2F0ZWQgc2luY2UgNy4wLjBcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1wYXJhbXNcbiAgaW5pdE1vdXNlRXZlbnQoX3R5cGVBcmcsIF9jYW5CdWJibGVBcmcsIF9jYW5jZWxhYmxlQXJnLCBfdmlld0FyZywgX2RldGFpbEFyZywgX3NjcmVlblhBcmcsIF9zY3JlZW5ZQXJnLCBfY2xpZW50WEFyZywgX2NsaWVudFlBcmcsIF9jdHJsS2V5QXJnLCBfYWx0S2V5QXJnLCBfc2hpZnRLZXlBcmcsIF9tZXRhS2V5QXJnLCBfYnV0dG9uQXJnLCBfcmVsYXRlZFRhcmdldEFyZykge1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IEZlZGVyYXRlZE1vdXNlRXZlbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlZGVyYXRlZE1vdXNlRXZlbnQubWpzLm1hcFxuIiwiaW1wb3J0IHsgRmVkZXJhdGVkTW91c2VFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkTW91c2VFdmVudC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmNsYXNzIEZlZGVyYXRlZFBvaW50ZXJFdmVudCBleHRlbmRzIEZlZGVyYXRlZE1vdXNlRXZlbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgIC8qKlxuICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgcG9pbnRlcidzIGNvbnRhY3QgYWxvbmcgdGhlIHgtYXhpcywgbWVhc3VyZWQgaW4gQ1NTIHBpeGVscy5cbiAgICAgKiByYWRpdXNYIG9mIFRvdWNoRXZlbnRzIHdpbGwgYmUgcmVwcmVzZW50ZWQgYnkgdGhpcyB2YWx1ZS5cbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Qb2ludGVyRXZlbnQvd2lkdGhcbiAgICAgKi9cbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICAvKipcbiAgICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBwb2ludGVyJ3MgY29udGFjdCBhbG9uZyB0aGUgeS1heGlzLCBtZWFzdXJlZCBpbiBDU1MgcGl4ZWxzLlxuICAgICAqIHJhZGl1c1kgb2YgVG91Y2hFdmVudHMgd2lsbCBiZSByZXByZXNlbnRlZCBieSB0aGlzIHZhbHVlLlxuICAgICAqIEBzZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1BvaW50ZXJFdmVudC9oZWlnaHRcbiAgICAgKi9cbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHRoZSBwb2ludGVyIGRldmljZSB0aGF0IGNyZWF0ZWQgdGhlIGV2ZW50IGlzIHRoZSBwcmltYXJ5IHBvaW50ZXIuXG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvUG9pbnRlckV2ZW50L2lzUHJpbWFyeVxuICAgICAqL1xuICAgIHRoaXMuaXNQcmltYXJ5ID0gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE9ubHkgaW5jbHVkZWQgZm9yIGNvbXBsZXRlbmVzcyBmb3Igbm93XG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGdldENvYWxlc2NlZEV2ZW50cygpIHtcbiAgICBpZiAodGhpcy50eXBlID09PSBcInBvaW50ZXJtb3ZlXCIgfHwgdGhpcy50eXBlID09PSBcIm1vdXNlbW92ZVwiIHx8IHRoaXMudHlwZSA9PT0gXCJ0b3VjaG1vdmVcIikge1xuICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9XG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIC8qKlxuICAgKiBPbmx5IGluY2x1ZGVkIGZvciBjb21wbGV0ZW5lc3MgZm9yIG5vd1xuICAgKiBAaWdub3JlXG4gICAqL1xuICBnZXRQcmVkaWN0ZWRFdmVudHMoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiZ2V0UHJlZGljdGVkRXZlbnRzIGlzIG5vdCBzdXBwb3J0ZWQhXCIpO1xuICB9XG59XG5cbmV4cG9ydCB7IEZlZGVyYXRlZFBvaW50ZXJFdmVudCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RmVkZXJhdGVkUG9pbnRlckV2ZW50Lm1qcy5tYXBcbiIsImltcG9ydCB7IEZlZGVyYXRlZE1vdXNlRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZE1vdXNlRXZlbnQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBGZWRlcmF0ZWRXaGVlbEV2ZW50IGV4dGVuZHMgRmVkZXJhdGVkTW91c2VFdmVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgLyoqXG4gICAgICogVW5pdHMgc3BlY2lmaWVkIGluIHBpeGVscy5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdGhpcy5ET01fREVMVEFfUElYRUwgPSAwO1xuICAgIC8qKlxuICAgICAqIFVuaXRzIHNwZWNpZmllZCBpbiBsaW5lcy5cbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgdGhpcy5ET01fREVMVEFfTElORSA9IDE7XG4gICAgLyoqXG4gICAgICogVW5pdHMgc3BlY2lmaWVkIGluIHBhZ2VzLlxuICAgICAqIEBpZ25vcmVcbiAgICAgKi9cbiAgICB0aGlzLkRPTV9ERUxUQV9QQUdFID0gMjtcbiAgfVxufVxuLyoqXG4gKiBVbml0cyBzcGVjaWZpZWQgaW4gcGl4ZWxzLlxuICogQGlnbm9yZVxuICovXG5GZWRlcmF0ZWRXaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCA9IDA7XG4vKipcbiAqIFVuaXRzIHNwZWNpZmllZCBpbiBsaW5lcy5cbiAqIEBpZ25vcmVcbiAqL1xuRmVkZXJhdGVkV2hlZWxFdmVudC5ET01fREVMVEFfTElORSA9IDE7XG4vKipcbiAqIFVuaXRzIHNwZWNpZmllZCBpbiBwYWdlcy5cbiAqIEBpZ25vcmVcbiAqL1xuRmVkZXJhdGVkV2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSA9IDI7XG5cbmV4cG9ydCB7IEZlZGVyYXRlZFdoZWVsRXZlbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlZGVyYXRlZFdoZWVsRXZlbnQubWpzLm1hcFxuIiwiaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICdldmVudGVtaXR0ZXIzJztcbmltcG9ydCB7IFBvaW50IH0gZnJvbSAnLi4vbWF0aHMvcG9pbnQvUG9pbnQubWpzJztcbmltcG9ydCB7IHdhcm4gfSBmcm9tICcuLi91dGlscy9sb2dnaW5nL3dhcm4ubWpzJztcbmltcG9ydCB7IEV2ZW50c1RpY2tlciB9IGZyb20gJy4vRXZlbnRUaWNrZXIubWpzJztcbmltcG9ydCB7IEZlZGVyYXRlZE1vdXNlRXZlbnQgfSBmcm9tICcuL0ZlZGVyYXRlZE1vdXNlRXZlbnQubWpzJztcbmltcG9ydCB7IEZlZGVyYXRlZFBvaW50ZXJFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkUG9pbnRlckV2ZW50Lm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRXaGVlbEV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRXaGVlbEV2ZW50Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgUFJPUEFHQVRJT05fTElNSVQgPSAyMDQ4O1xuY29uc3QgdGVtcEhpdExvY2F0aW9uID0gbmV3IFBvaW50KCk7XG5jb25zdCB0ZW1wTG9jYWxNYXBwaW5nID0gbmV3IFBvaW50KCk7XG5jbGFzcyBFdmVudEJvdW5kYXJ5IHtcbiAgLyoqXG4gICAqIEBwYXJhbSByb290VGFyZ2V0IC0gVGhlIGhvbGRlciBvZiB0aGUgZXZlbnQgYm91bmRhcnkuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290VGFyZ2V0KSB7XG4gICAgLyoqXG4gICAgICogRW1pdHMgZXZlbnRzIGFmdGVyIHRoZXkgd2VyZSBkaXNwYXRjaGVkIGludG8gdGhlIHNjZW5lIGdyYXBoLlxuICAgICAqXG4gICAgICogVGhpcyBjYW4gYmUgdXNlZCBmb3IgZ2xvYmFsIGV2ZW50cyBsaXN0ZW5pbmcsIHJlZ2FyZGxlc3Mgb2YgdGhlIHNjZW5lIGdyYXBoIGJlaW5nIHVzZWQuIEl0IHNob3VsZFxuICAgICAqIG5vdCBiZSB1c2VkIGJ5IGludGVyYWN0aXZlIGxpYnJhcmllcyBmb3Igbm9ybWFsIHVzZS5cbiAgICAgKlxuICAgICAqIFNwZWNpYWwgZXZlbnRzIHRoYXQgZG8gbm90IGJ1YmJsZSBhbGwgdGhlIHdheSB0byB0aGUgcm9vdCB0YXJnZXQgYXJlIG5vdCBlbWl0dGVkIGZyb20gaGVyZSxcbiAgICAgKiBlLmcuIHBvaW50ZXJlbnRlciwgcG9pbnRlcmxlYXZlLCBjbGljay5cbiAgICAgKi9cbiAgICB0aGlzLmRpc3BhdGNoID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIC8qKlxuICAgICAqIFRoaXMgZmxhZyB3b3VsZCBlbWl0IGBwb2ludGVybW92ZWAsIGB0b3VjaG1vdmVgLCBhbmQgYG1vdXNlbW92ZWAgZXZlbnRzIG9uIGFsbCBDb250YWluZXJzLlxuICAgICAqXG4gICAgICogVGhlIGBtb3ZlT25BbGxgIHNlbWFudGljcyBtaXJyb3IgdGhvc2Ugb2YgZWFybGllciB2ZXJzaW9ucyBvZiBQaXhpSlMuIFRoaXMgd2FzIGRpc2FibGVkIGluIGZhdm9yIG9mXG4gICAgICogdGhlIFBvaW50ZXIgRXZlbnQgQVBJJ3MgYXBwcm9hY2guXG4gICAgICovXG4gICAgdGhpcy5tb3ZlT25BbGwgPSBmYWxzZTtcbiAgICAvKiogRW5hYmxlcyB0aGUgZ2xvYmFsIG1vdmUgZXZlbnRzLiBgZ2xvYmFscG9pbnRlcm1vdmVgLCBgZ2xvYmFsdG91Y2htb3ZlYCwgYW5kIGBnbG9iYWxtb3VzZW1vdmVgICovXG4gICAgdGhpcy5lbmFibGVHbG9iYWxNb3ZlRXZlbnRzID0gdHJ1ZTtcbiAgICAvKipcbiAgICAgKiBTdGF0ZSBvYmplY3QgZm9yIG1hcHBpbmcgbWV0aG9kcy5cbiAgICAgKiBAc2VlIEV2ZW50Qm91bmRhcnkjdHJhY2tpbmdEYXRhXG4gICAgICovXG4gICAgdGhpcy5tYXBwaW5nU3RhdGUgPSB7XG4gICAgICB0cmFja2luZ0RhdGE6IHt9XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBUaGUgZXZlbnQgcG9vbCBtYXBzIGV2ZW50IGNvbnN0cnVjdG9ycyB0byBhbiBmcmVlIHBvb2wgb2YgaW5zdGFuY2VzIG9mIHRob3NlIHNwZWNpZmljIGV2ZW50cy5cbiAgICAgKiBAc2VlIEV2ZW50Qm91bmRhcnkjYWxsb2NhdGVFdmVudFxuICAgICAqIEBzZWUgRXZlbnRCb3VuZGFyeSNmcmVlRXZlbnRcbiAgICAgKi9cbiAgICB0aGlzLmV2ZW50UG9vbCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgLyoqIEV2ZXJ5IGludGVyYWN0aXZlIGVsZW1lbnQgZ2F0aGVyZWQgZnJvbSB0aGUgc2NlbmUuIE9ubHkgdXNlZCBpbiBgcG9pbnRlcm1vdmVgICovXG4gICAgdGhpcy5fYWxsSW50ZXJhY3RpdmVFbGVtZW50cyA9IFtdO1xuICAgIC8qKiBFdmVyeSBlbGVtZW50IHRoYXQgcGFzc2VkIHRoZSBoaXQgdGVzdC4gT25seSB1c2VkIGluIGBwb2ludGVybW92ZWAgKi9cbiAgICB0aGlzLl9oaXRFbGVtZW50cyA9IFtdO1xuICAgIC8qKiBXaGV0aGVyIG9yIG5vdCB0byBjb2xsZWN0IGFsbCB0aGUgaW50ZXJhY3RpdmUgZWxlbWVudHMgZnJvbSB0aGUgc2NlbmUuIEVuYWJsZWQgaW4gYHBvaW50ZXJtb3ZlYCAqL1xuICAgIHRoaXMuX2lzUG9pbnRlck1vdmVFdmVudCA9IGZhbHNlO1xuICAgIHRoaXMucm9vdFRhcmdldCA9IHJvb3RUYXJnZXQ7XG4gICAgdGhpcy5oaXRQcnVuZUZuID0gdGhpcy5oaXRQcnVuZUZuLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oaXRUZXN0Rm4gPSB0aGlzLmhpdFRlc3RGbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWFwUG9pbnRlckRvd24gPSB0aGlzLm1hcFBvaW50ZXJEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5tYXBQb2ludGVyTW92ZSA9IHRoaXMubWFwUG9pbnRlck1vdmUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFBvaW50ZXJPdXQgPSB0aGlzLm1hcFBvaW50ZXJPdXQuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFBvaW50ZXJPdmVyID0gdGhpcy5tYXBQb2ludGVyT3Zlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWFwUG9pbnRlclVwID0gdGhpcy5tYXBQb2ludGVyVXAuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFBvaW50ZXJVcE91dHNpZGUgPSB0aGlzLm1hcFBvaW50ZXJVcE91dHNpZGUuYmluZCh0aGlzKTtcbiAgICB0aGlzLm1hcFdoZWVsID0gdGhpcy5tYXBXaGVlbC5iaW5kKHRoaXMpO1xuICAgIHRoaXMubWFwcGluZ1RhYmxlID0ge307XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJwb2ludGVyZG93blwiLCB0aGlzLm1hcFBvaW50ZXJEb3duKTtcbiAgICB0aGlzLmFkZEV2ZW50TWFwcGluZyhcInBvaW50ZXJtb3ZlXCIsIHRoaXMubWFwUG9pbnRlck1vdmUpO1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwicG9pbnRlcm91dFwiLCB0aGlzLm1hcFBvaW50ZXJPdXQpO1xuICAgIHRoaXMuYWRkRXZlbnRNYXBwaW5nKFwicG9pbnRlcmxlYXZlXCIsIHRoaXMubWFwUG9pbnRlck91dCk7XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJwb2ludGVyb3ZlclwiLCB0aGlzLm1hcFBvaW50ZXJPdmVyKTtcbiAgICB0aGlzLmFkZEV2ZW50TWFwcGluZyhcInBvaW50ZXJ1cFwiLCB0aGlzLm1hcFBvaW50ZXJVcCk7XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJwb2ludGVydXBvdXRzaWRlXCIsIHRoaXMubWFwUG9pbnRlclVwT3V0c2lkZSk7XG4gICAgdGhpcy5hZGRFdmVudE1hcHBpbmcoXCJ3aGVlbFwiLCB0aGlzLm1hcFdoZWVsKTtcbiAgfVxuICAvKipcbiAgICogQWRkcyBhbiBldmVudCBtYXBwaW5nIGZvciB0aGUgZXZlbnQgYHR5cGVgIGhhbmRsZWQgYnkgYGZuYC5cbiAgICpcbiAgICogRXZlbnQgbWFwcGluZ3MgY2FuIGJlIHVzZWQgdG8gaW1wbGVtZW50IGFkZGl0aW9uYWwgb3IgY3VzdG9tIGV2ZW50cy4gVGhleSB0YWtlIGFuIGV2ZW50XG4gICAqIGNvbWluZyBmcm9tIHRoZSB1cHN0cmVhbSBzY2VuZSAob3IgZGlyZWN0bHkgZnJvbSB0aGUge0BsaW5rIEV2ZW50U3lzdGVtfSkgYW5kIGRpc3BhdGNoIG5ldyBkb3duc3RyZWFtIGV2ZW50c1xuICAgKiBnZW5lcmFsbHkgdHJpY2tsaW5nIGRvd24gYW5kIGJ1YmJsaW5nIHVwIHRvIHtAbGluayBFdmVudEJvdW5kYXJ5LnJvb3RUYXJnZXQgdGhpcy5yb290VGFyZ2V0fS5cbiAgICpcbiAgICogVG8gbW9kaWZ5IHRoZSBzZW1hbnRpY3Mgb2YgZXhpc3RpbmcgZXZlbnRzLCB0aGUgYnVpbHQtaW4gbWFwcGluZyBtZXRob2RzIG9mIEV2ZW50Qm91bmRhcnkgc2hvdWxkIGJlIG92ZXJyaWRkZW5cbiAgICogaW5zdGVhZC5cbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiB1cHN0cmVhbSBldmVudCB0byBtYXAuXG4gICAqIEBwYXJhbSBmbiAtIFRoZSBtYXBwaW5nIG1ldGhvZC4gVGhlIGNvbnRleHQgb2YgdGhpcyBmdW5jdGlvbiBtdXN0IGJlIGJvdW5kIG1hbnVhbGx5LCBpZiBkZXNpcmVkLlxuICAgKi9cbiAgYWRkRXZlbnRNYXBwaW5nKHR5cGUsIGZuKSB7XG4gICAgaWYgKCF0aGlzLm1hcHBpbmdUYWJsZVt0eXBlXSkge1xuICAgICAgdGhpcy5tYXBwaW5nVGFibGVbdHlwZV0gPSBbXTtcbiAgICB9XG4gICAgdGhpcy5tYXBwaW5nVGFibGVbdHlwZV0ucHVzaCh7XG4gICAgICBmbixcbiAgICAgIHByaW9yaXR5OiAwXG4gICAgfSk7XG4gICAgdGhpcy5tYXBwaW5nVGFibGVbdHlwZV0uc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpO1xuICB9XG4gIC8qKlxuICAgKiBEaXNwYXRjaGVzIHRoZSBnaXZlbiBldmVudFxuICAgKiBAcGFyYW0gZSAtIFRoZSBldmVudCB0byBkaXNwYXRjaC5cbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiBldmVudCB0byBkaXNwYXRjaC4gRGVmYXVsdHMgdG8gYGUudHlwZWAuXG4gICAqL1xuICBkaXNwYXRjaEV2ZW50KGUsIHR5cGUpIHtcbiAgICBlLnByb3BhZ2F0aW9uU3RvcHBlZCA9IGZhbHNlO1xuICAgIGUucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQgPSBmYWxzZTtcbiAgICB0aGlzLnByb3BhZ2F0ZShlLCB0eXBlKTtcbiAgICB0aGlzLmRpc3BhdGNoLmVtaXQodHlwZSB8fCBlLnR5cGUsIGUpO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSBnaXZlbiB1cHN0cmVhbSBldmVudCB0aHJvdWdoIHRoZSBldmVudCBib3VuZGFyeSBhbmQgcHJvcGFnYXRlcyBpdCBkb3duc3RyZWFtLlxuICAgKiBAcGFyYW0gZSAtIFRoZSBldmVudCB0byBtYXAuXG4gICAqL1xuICBtYXBFdmVudChlKSB7XG4gICAgaWYgKCF0aGlzLnJvb3RUYXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbWFwcGVycyA9IHRoaXMubWFwcGluZ1RhYmxlW2UudHlwZV07XG4gICAgaWYgKG1hcHBlcnMpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gbWFwcGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgbWFwcGVyc1tpXS5mbihlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgd2FybihgW0V2ZW50Qm91bmRhcnldOiBFdmVudCBtYXBwaW5nIG5vdCBkZWZpbmVkIGZvciAke2UudHlwZX1gKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBDb250YWluZXIgdGhhdCBpcyB0aGUgdGFyZ2V0IG9mIGEgZXZlbnQgYXQgdGhlIGdpdmVuIGNvb3JkaW5hdGVzLlxuICAgKlxuICAgKiBUaGUgcGFzc2VkICh4LHkpIGNvb3JkaW5hdGVzIGFyZSBpbiB0aGUgd29ybGQgc3BhY2UgYWJvdmUgdGhpcyBldmVudCBib3VuZGFyeS5cbiAgICogQHBhcmFtIHggLSBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBldmVudC5cbiAgICogQHBhcmFtIHkgLSBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSBldmVudC5cbiAgICovXG4gIGhpdFRlc3QoeCwgeSkge1xuICAgIEV2ZW50c1RpY2tlci5wYXVzZVVwZGF0ZSA9IHRydWU7XG4gICAgY29uc3QgdXNlTW92ZSA9IHRoaXMuX2lzUG9pbnRlck1vdmVFdmVudCAmJiB0aGlzLmVuYWJsZUdsb2JhbE1vdmVFdmVudHM7XG4gICAgY29uc3QgZm4gPSB1c2VNb3ZlID8gXCJoaXRUZXN0TW92ZVJlY3Vyc2l2ZVwiIDogXCJoaXRUZXN0UmVjdXJzaXZlXCI7XG4gICAgY29uc3QgaW52ZXJ0ZWRQYXRoID0gdGhpc1tmbl0oXG4gICAgICB0aGlzLnJvb3RUYXJnZXQsXG4gICAgICB0aGlzLnJvb3RUYXJnZXQuZXZlbnRNb2RlLFxuICAgICAgdGVtcEhpdExvY2F0aW9uLnNldCh4LCB5KSxcbiAgICAgIHRoaXMuaGl0VGVzdEZuLFxuICAgICAgdGhpcy5oaXRQcnVuZUZuXG4gICAgKTtcbiAgICByZXR1cm4gaW52ZXJ0ZWRQYXRoICYmIGludmVydGVkUGF0aFswXTtcbiAgfVxuICAvKipcbiAgICogUHJvcGFnYXRlIHRoZSBwYXNzZWQgZXZlbnQgZnJvbSBmcm9tIHtAbGluayBFdmVudEJvdW5kYXJ5LnJvb3RUYXJnZXQgdGhpcy5yb290VGFyZ2V0fSB0byBpdHNcbiAgICogdGFyZ2V0IGBlLnRhcmdldGAuXG4gICAqIEBwYXJhbSBlIC0gVGhlIGV2ZW50IHRvIHByb3BhZ2F0ZS5cbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiBldmVudCB0byBwcm9wYWdhdGUuIERlZmF1bHRzIHRvIGBlLnR5cGVgLlxuICAgKi9cbiAgcHJvcGFnYXRlKGUsIHR5cGUpIHtcbiAgICBpZiAoIWUudGFyZ2V0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNvbXBvc2VkUGF0aCA9IGUuY29tcG9zZWRQYXRoKCk7XG4gICAgZS5ldmVudFBoYXNlID0gZS5DQVBUVVJJTkdfUEhBU0U7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBjb21wb3NlZFBhdGgubGVuZ3RoIC0gMTsgaSA8IGo7IGkrKykge1xuICAgICAgZS5jdXJyZW50VGFyZ2V0ID0gY29tcG9zZWRQYXRoW2ldO1xuICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgdHlwZSk7XG4gICAgICBpZiAoZS5wcm9wYWdhdGlvblN0b3BwZWQgfHwgZS5wcm9wYWdhdGlvbkltbWVkaWF0ZWx5U3RvcHBlZClcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLmV2ZW50UGhhc2UgPSBlLkFUX1RBUkdFVDtcbiAgICBlLmN1cnJlbnRUYXJnZXQgPSBlLnRhcmdldDtcbiAgICB0aGlzLm5vdGlmeVRhcmdldChlLCB0eXBlKTtcbiAgICBpZiAoZS5wcm9wYWdhdGlvblN0b3BwZWQgfHwgZS5wcm9wYWdhdGlvbkltbWVkaWF0ZWx5U3RvcHBlZClcbiAgICAgIHJldHVybjtcbiAgICBlLmV2ZW50UGhhc2UgPSBlLkJVQkJMSU5HX1BIQVNFO1xuICAgIGZvciAobGV0IGkgPSBjb21wb3NlZFBhdGgubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGUuY3VycmVudFRhcmdldCA9IGNvbXBvc2VkUGF0aFtpXTtcbiAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIHR5cGUpO1xuICAgICAgaWYgKGUucHJvcGFnYXRpb25TdG9wcGVkIHx8IGUucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQpXG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEVtaXRzIHRoZSBldmVudCBgZWAgdG8gYWxsIGludGVyYWN0aXZlIGNvbnRhaW5lcnMuIFRoZSBldmVudCBpcyBwcm9wYWdhdGVkIGluIHRoZSBidWJibGluZyBwaGFzZSBhbHdheXMuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZCBpbiB0aGUgYGdsb2JhbHBvaW50ZXJtb3ZlYCBldmVudC5cbiAgICogQHBhcmFtIGUgLSBUaGUgZW1pdHRlZCBldmVudC5cbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgbGlzdGVuZXJzIHRvIG5vdGlmeS5cbiAgICogQHBhcmFtIHRhcmdldHMgLSBUaGUgdGFyZ2V0cyB0byBub3RpZnkuXG4gICAqL1xuICBhbGwoZSwgdHlwZSwgdGFyZ2V0cyA9IHRoaXMuX2FsbEludGVyYWN0aXZlRWxlbWVudHMpIHtcbiAgICBpZiAodGFyZ2V0cy5sZW5ndGggPT09IDApXG4gICAgICByZXR1cm47XG4gICAgZS5ldmVudFBoYXNlID0gZS5CVUJCTElOR19QSEFTRTtcbiAgICBjb25zdCBldmVudHMgPSBBcnJheS5pc0FycmF5KHR5cGUpID8gdHlwZSA6IFt0eXBlXTtcbiAgICBmb3IgKGxldCBpID0gdGFyZ2V0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgZXZlbnRzLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICAgIGUuY3VycmVudFRhcmdldCA9IHRhcmdldHNbaV07XG4gICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRmluZHMgdGhlIHByb3BhZ2F0aW9uIHBhdGggZnJvbSB7QGxpbmsgRXZlbnRCb3VuZGFyeS5yb290VGFyZ2V0IHJvb3RUYXJnZXR9IHRvIHRoZSBwYXNzZWRcbiAgICogYHRhcmdldGAuIFRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHBhdGggaXMgYHRhcmdldGAuXG4gICAqIEBwYXJhbSB0YXJnZXQgLSBUaGUgdGFyZ2V0IHRvIGZpbmQgdGhlIHByb3BhZ2F0aW9uIHBhdGggdG8uXG4gICAqL1xuICBwcm9wYWdhdGlvblBhdGgodGFyZ2V0KSB7XG4gICAgY29uc3QgcHJvcGFnYXRpb25QYXRoID0gW3RhcmdldF07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBQUk9QQUdBVElPTl9MSU1JVCAmJiAodGFyZ2V0ICE9PSB0aGlzLnJvb3RUYXJnZXQgJiYgdGFyZ2V0LnBhcmVudCk7IGkrKykge1xuICAgICAgaWYgKCF0YXJnZXQucGFyZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIHByb3BhZ2F0aW9uIHBhdGggdG8gZGlzY29ubmVjdGVkIHRhcmdldFwiKTtcbiAgICAgIH1cbiAgICAgIHByb3BhZ2F0aW9uUGF0aC5wdXNoKHRhcmdldC5wYXJlbnQpO1xuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudDtcbiAgICB9XG4gICAgcHJvcGFnYXRpb25QYXRoLnJldmVyc2UoKTtcbiAgICByZXR1cm4gcHJvcGFnYXRpb25QYXRoO1xuICB9XG4gIGhpdFRlc3RNb3ZlUmVjdXJzaXZlKGN1cnJlbnRUYXJnZXQsIGV2ZW50TW9kZSwgbG9jYXRpb24sIHRlc3RGbiwgcHJ1bmVGbiwgaWdub3JlID0gZmFsc2UpIHtcbiAgICBsZXQgc2hvdWxkUmV0dXJuID0gZmFsc2U7XG4gICAgaWYgKHRoaXMuX2ludGVyYWN0aXZlUHJ1bmUoY3VycmVudFRhcmdldCkpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoY3VycmVudFRhcmdldC5ldmVudE1vZGUgPT09IFwiZHluYW1pY1wiIHx8IGV2ZW50TW9kZSA9PT0gXCJkeW5hbWljXCIpIHtcbiAgICAgIEV2ZW50c1RpY2tlci5wYXVzZVVwZGF0ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAoY3VycmVudFRhcmdldC5pbnRlcmFjdGl2ZUNoaWxkcmVuICYmIGN1cnJlbnRUYXJnZXQuY2hpbGRyZW4pIHtcbiAgICAgIGNvbnN0IGNoaWxkcmVuID0gY3VycmVudFRhcmdldC5jaGlsZHJlbjtcbiAgICAgIGZvciAobGV0IGkgPSBjaGlsZHJlbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICBjb25zdCBuZXN0ZWRIaXQgPSB0aGlzLmhpdFRlc3RNb3ZlUmVjdXJzaXZlKFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIHRoaXMuX2lzSW50ZXJhY3RpdmUoZXZlbnRNb2RlKSA/IGV2ZW50TW9kZSA6IGNoaWxkLmV2ZW50TW9kZSxcbiAgICAgICAgICBsb2NhdGlvbixcbiAgICAgICAgICB0ZXN0Rm4sXG4gICAgICAgICAgcHJ1bmVGbixcbiAgICAgICAgICBpZ25vcmUgfHwgcHJ1bmVGbihjdXJyZW50VGFyZ2V0LCBsb2NhdGlvbilcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKG5lc3RlZEhpdCkge1xuICAgICAgICAgIGlmIChuZXN0ZWRIaXQubGVuZ3RoID4gMCAmJiAhbmVzdGVkSGl0W25lc3RlZEhpdC5sZW5ndGggLSAxXS5wYXJlbnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBpc0ludGVyYWN0aXZlID0gY3VycmVudFRhcmdldC5pc0ludGVyYWN0aXZlKCk7XG4gICAgICAgICAgaWYgKG5lc3RlZEhpdC5sZW5ndGggPiAwIHx8IGlzSW50ZXJhY3RpdmUpIHtcbiAgICAgICAgICAgIGlmIChpc0ludGVyYWN0aXZlKVxuICAgICAgICAgICAgICB0aGlzLl9hbGxJbnRlcmFjdGl2ZUVsZW1lbnRzLnB1c2goY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgICBuZXN0ZWRIaXQucHVzaChjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMuX2hpdEVsZW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgIHRoaXMuX2hpdEVsZW1lbnRzID0gbmVzdGVkSGl0O1xuICAgICAgICAgIHNob3VsZFJldHVybiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgaXNJbnRlcmFjdGl2ZU1vZGUgPSB0aGlzLl9pc0ludGVyYWN0aXZlKGV2ZW50TW9kZSk7XG4gICAgY29uc3QgaXNJbnRlcmFjdGl2ZVRhcmdldCA9IGN1cnJlbnRUYXJnZXQuaXNJbnRlcmFjdGl2ZSgpO1xuICAgIGlmIChpc0ludGVyYWN0aXZlVGFyZ2V0ICYmIGlzSW50ZXJhY3RpdmVUYXJnZXQpXG4gICAgICB0aGlzLl9hbGxJbnRlcmFjdGl2ZUVsZW1lbnRzLnB1c2goY3VycmVudFRhcmdldCk7XG4gICAgaWYgKGlnbm9yZSB8fCB0aGlzLl9oaXRFbGVtZW50cy5sZW5ndGggPiAwKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgaWYgKHNob3VsZFJldHVybilcbiAgICAgIHJldHVybiB0aGlzLl9oaXRFbGVtZW50cztcbiAgICBpZiAoaXNJbnRlcmFjdGl2ZU1vZGUgJiYgKCFwcnVuZUZuKGN1cnJlbnRUYXJnZXQsIGxvY2F0aW9uKSAmJiB0ZXN0Rm4oY3VycmVudFRhcmdldCwgbG9jYXRpb24pKSkge1xuICAgICAgcmV0dXJuIGlzSW50ZXJhY3RpdmVUYXJnZXQgPyBbY3VycmVudFRhcmdldF0gOiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZSBpbXBsZW1lbnRhdGlvbiBmb3Ige0BsaW5rIEV2ZW50Qm91bmRhcnkuaGl0VGVzdCBoaXRUZXN0fS5cbiAgICogQHBhcmFtIGN1cnJlbnRUYXJnZXQgLSBUaGUgQ29udGFpbmVyIHRoYXQgaXMgdG8gYmUgaGl0IHRlc3RlZC5cbiAgICogQHBhcmFtIGV2ZW50TW9kZSAtIFRoZSBldmVudCBtb2RlIGZvciB0aGUgYGN1cnJlbnRUYXJnZXRgIG9yIG9uZSBvZiBpdHMgcGFyZW50cy5cbiAgICogQHBhcmFtIGxvY2F0aW9uIC0gVGhlIGxvY2F0aW9uIHRoYXQgaXMgYmVpbmcgdGVzdGVkIGZvciBvdmVybGFwLlxuICAgKiBAcGFyYW0gdGVzdEZuIC0gQ2FsbGJhY2sgdGhhdCBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHRhcmdldCBwYXNzZXMgaGl0IHRlc3RpbmcuIFRoaXMgY2FsbGJhY2tcbiAgICogIGNhbiBhc3N1bWUgdGhhdCBgcHJ1bmVGbmAgZmFpbGVkIHRvIHBydW5lIHRoZSBjb250YWluZXIuXG4gICAqIEBwYXJhbSBwcnVuZUZuIC0gQ2FsbGJhY2sgdGhhdCBkZXRlcm1pbmVzcyB3aGV0aGVyIHRoZSB0YXJnZXQgYW5kIGFsbCBvZiBpdHMgY2hpbGRyZW5cbiAgICogIGNhbm5vdCBwYXNzIHRoZSBoaXQgdGVzdC4gSXQgaXMgdXNlZCBhcyBhIHByZWxpbWluYXJ5IG9wdGltaXphdGlvbiB0byBwcnVuZSBlbnRpcmUgc3VidHJlZXNcbiAgICogIG9mIHRoZSBzY2VuZSBncmFwaC5cbiAgICogQHJldHVybnMgQW4gYXJyYXkgaG9sZGluZyB0aGUgaGl0IHRlc3RpbmcgdGFyZ2V0IGFuZCBhbGwgaXRzIGFuY2VzdG9ycyBpbiBvcmRlci4gVGhlIGZpcnN0IGVsZW1lbnRcbiAgICogIGlzIHRoZSB0YXJnZXQgaXRzZWxmIGFuZCB0aGUgbGFzdCBpcyB7QGxpbmsgRXZlbnRCb3VuZGFyeS5yb290VGFyZ2V0IHJvb3RUYXJnZXR9LiBUaGlzIGlzIHRoZSBvcHBvc2l0ZVxuICAgKiAgb3JkZXIgdy5yLnQuIHRoZSBwcm9wYWdhdGlvbiBwYXRoLiBJZiBubyBoaXQgdGVzdGluZyB0YXJnZXQgaXMgZm91bmQsIG51bGwgaXMgcmV0dXJuZWQuXG4gICAqL1xuICBoaXRUZXN0UmVjdXJzaXZlKGN1cnJlbnRUYXJnZXQsIGV2ZW50TW9kZSwgbG9jYXRpb24sIHRlc3RGbiwgcHJ1bmVGbikge1xuICAgIGlmICh0aGlzLl9pbnRlcmFjdGl2ZVBydW5lKGN1cnJlbnRUYXJnZXQpIHx8IHBydW5lRm4oY3VycmVudFRhcmdldCwgbG9jYXRpb24pKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQuZXZlbnRNb2RlID09PSBcImR5bmFtaWNcIiB8fCBldmVudE1vZGUgPT09IFwiZHluYW1pY1wiKSB7XG4gICAgICBFdmVudHNUaWNrZXIucGF1c2VVcGRhdGUgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGN1cnJlbnRUYXJnZXQuaW50ZXJhY3RpdmVDaGlsZHJlbiAmJiBjdXJyZW50VGFyZ2V0LmNoaWxkcmVuKSB7XG4gICAgICBjb25zdCBjaGlsZHJlbiA9IGN1cnJlbnRUYXJnZXQuY2hpbGRyZW47XG4gICAgICBjb25zdCByZWxhdGl2ZUxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgICBmb3IgKGxldCBpID0gY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgY29uc3QgbmVzdGVkSGl0ID0gdGhpcy5oaXRUZXN0UmVjdXJzaXZlKFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIHRoaXMuX2lzSW50ZXJhY3RpdmUoZXZlbnRNb2RlKSA/IGV2ZW50TW9kZSA6IGNoaWxkLmV2ZW50TW9kZSxcbiAgICAgICAgICByZWxhdGl2ZUxvY2F0aW9uLFxuICAgICAgICAgIHRlc3RGbixcbiAgICAgICAgICBwcnVuZUZuXG4gICAgICAgICk7XG4gICAgICAgIGlmIChuZXN0ZWRIaXQpIHtcbiAgICAgICAgICBpZiAobmVzdGVkSGl0Lmxlbmd0aCA+IDAgJiYgIW5lc3RlZEhpdFtuZXN0ZWRIaXQubGVuZ3RoIC0gMV0ucGFyZW50KSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgaXNJbnRlcmFjdGl2ZSA9IGN1cnJlbnRUYXJnZXQuaXNJbnRlcmFjdGl2ZSgpO1xuICAgICAgICAgIGlmIChuZXN0ZWRIaXQubGVuZ3RoID4gMCB8fCBpc0ludGVyYWN0aXZlKVxuICAgICAgICAgICAgbmVzdGVkSGl0LnB1c2goY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgcmV0dXJuIG5lc3RlZEhpdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBpc0ludGVyYWN0aXZlTW9kZSA9IHRoaXMuX2lzSW50ZXJhY3RpdmUoZXZlbnRNb2RlKTtcbiAgICBjb25zdCBpc0ludGVyYWN0aXZlVGFyZ2V0ID0gY3VycmVudFRhcmdldC5pc0ludGVyYWN0aXZlKCk7XG4gICAgaWYgKGlzSW50ZXJhY3RpdmVNb2RlICYmIHRlc3RGbihjdXJyZW50VGFyZ2V0LCBsb2NhdGlvbikpIHtcbiAgICAgIHJldHVybiBpc0ludGVyYWN0aXZlVGFyZ2V0ID8gW2N1cnJlbnRUYXJnZXRdIDogW107XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIF9pc0ludGVyYWN0aXZlKGludCkge1xuICAgIHJldHVybiBpbnQgPT09IFwic3RhdGljXCIgfHwgaW50ID09PSBcImR5bmFtaWNcIjtcbiAgfVxuICBfaW50ZXJhY3RpdmVQcnVuZShjb250YWluZXIpIHtcbiAgICBpZiAoIWNvbnRhaW5lciB8fCAhY29udGFpbmVyLnZpc2libGUgfHwgIWNvbnRhaW5lci5yZW5kZXJhYmxlIHx8ICFjb250YWluZXIubWVhc3VyYWJsZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIuZXZlbnRNb2RlID09PSBcIm5vbmVcIikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb250YWluZXIuZXZlbnRNb2RlID09PSBcInBhc3NpdmVcIiAmJiAhY29udGFpbmVyLmludGVyYWN0aXZlQ2hpbGRyZW4pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBjb250YWluZXIgb3IgYW55IG9mIGl0cyBjaGlsZHJlbiBjYW5ub3QgcGFzcyB0aGUgaGl0IHRlc3QgYXQgYWxsLlxuICAgKlxuICAgKiB7QGxpbmsgRXZlbnRCb3VuZGFyeX0ncyBpbXBsZW1lbnRhdGlvbiB1c2VzIHRoZSB7QGxpbmsgQ29udGFpbmVyLmhpdEFyZWEgaGl0QXJlYX1cbiAgICogYW5kIHtAbGluayBDb250YWluZXIuX21hc2tFZmZlY3R9IGZvciBwcnVuaW5nLlxuICAgKiBAcGFyYW0gY29udGFpbmVyIC0gVGhlIGNvbnRhaW5lciB0byBwcnVuZS5cbiAgICogQHBhcmFtIGxvY2F0aW9uIC0gVGhlIGxvY2F0aW9uIHRvIHRlc3QgZm9yIG92ZXJsYXAuXG4gICAqL1xuICBoaXRQcnVuZUZuKGNvbnRhaW5lciwgbG9jYXRpb24pIHtcbiAgICBpZiAoY29udGFpbmVyLmhpdEFyZWEpIHtcbiAgICAgIGNvbnRhaW5lci53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2UobG9jYXRpb24sIHRlbXBMb2NhbE1hcHBpbmcpO1xuICAgICAgaWYgKCFjb250YWluZXIuaGl0QXJlYS5jb250YWlucyh0ZW1wTG9jYWxNYXBwaW5nLngsIHRlbXBMb2NhbE1hcHBpbmcueSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjb250YWluZXIuZWZmZWN0cyAmJiBjb250YWluZXIuZWZmZWN0cy5sZW5ndGgpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGFpbmVyLmVmZmVjdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gY29udGFpbmVyLmVmZmVjdHNbaV07XG4gICAgICAgIGlmIChlZmZlY3QuY29udGFpbnNQb2ludCkge1xuICAgICAgICAgIGNvbnN0IGVmZmVjdENvbnRhaW5zUG9pbnQgPSBlZmZlY3QuY29udGFpbnNQb2ludChsb2NhdGlvbiwgdGhpcy5oaXRUZXN0Rm4pO1xuICAgICAgICAgIGlmICghZWZmZWN0Q29udGFpbnNQb2ludCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGNvbnRhaW5lciBwYXNzZXMgaGl0IHRlc3RpbmcgZm9yIHRoZSBnaXZlbiBsb2NhdGlvbi5cbiAgICogQHBhcmFtIGNvbnRhaW5lciAtIFRoZSBjb250YWluZXIgdG8gdGVzdC5cbiAgICogQHBhcmFtIGxvY2F0aW9uIC0gVGhlIGxvY2F0aW9uIHRvIHRlc3QgZm9yIG92ZXJsYXAuXG4gICAqIEByZXR1cm5zIC0gV2hldGhlciBgY29udGFpbmVyYCBwYXNzZXMgaGl0IHRlc3RpbmcgZm9yIGBsb2NhdGlvbmAuXG4gICAqL1xuICBoaXRUZXN0Rm4oY29udGFpbmVyLCBsb2NhdGlvbikge1xuICAgIGlmIChjb250YWluZXIuaGl0QXJlYSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChjb250YWluZXI/LmNvbnRhaW5zUG9pbnQpIHtcbiAgICAgIGNvbnRhaW5lci53b3JsZFRyYW5zZm9ybS5hcHBseUludmVyc2UobG9jYXRpb24sIHRlbXBMb2NhbE1hcHBpbmcpO1xuICAgICAgcmV0dXJuIGNvbnRhaW5lci5jb250YWluc1BvaW50KHRlbXBMb2NhbE1hcHBpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIE5vdGlmeSBhbGwgdGhlIGxpc3RlbmVycyB0byB0aGUgZXZlbnQncyBgY3VycmVudFRhcmdldGAuXG4gICAqXG4gICAqIElmIHRoZSBgY3VycmVudFRhcmdldGAgY29udGFpbnMgdGhlIHByb3BlcnR5IGBvbjx0eXBlPmAsIHRoZW4gaXQgaXMgY2FsbGVkIGhlcmUsXG4gICAqIHNpbXVsYXRpbmcgdGhlIGJlaGF2aW9yIGZyb20gdmVyc2lvbiA2LnggYW5kIHByaW9yLlxuICAgKiBAcGFyYW0gZSAtIFRoZSBldmVudCBwYXNzZWQgdG8gdGhlIHRhcmdldC5cbiAgICogQHBhcmFtIHR5cGUgLSBUaGUgdHlwZSBvZiBldmVudCB0byBub3RpZnkuIERlZmF1bHRzIHRvIGBlLnR5cGVgLlxuICAgKi9cbiAgbm90aWZ5VGFyZ2V0KGUsIHR5cGUpIHtcbiAgICBpZiAoIWUuY3VycmVudFRhcmdldC5pc0ludGVyYWN0aXZlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdHlwZSA/PyAodHlwZSA9IGUudHlwZSk7XG4gICAgY29uc3QgaGFuZGxlcktleSA9IGBvbiR7dHlwZX1gO1xuICAgIGUuY3VycmVudFRhcmdldFtoYW5kbGVyS2V5XT8uKGUpO1xuICAgIGNvbnN0IGtleSA9IGUuZXZlbnRQaGFzZSA9PT0gZS5DQVBUVVJJTkdfUEhBU0UgfHwgZS5ldmVudFBoYXNlID09PSBlLkFUX1RBUkdFVCA/IGAke3R5cGV9Y2FwdHVyZWAgOiB0eXBlO1xuICAgIHRoaXMuX25vdGlmeUxpc3RlbmVycyhlLCBrZXkpO1xuICAgIGlmIChlLmV2ZW50UGhhc2UgPT09IGUuQVRfVEFSR0VUKSB7XG4gICAgICB0aGlzLl9ub3RpZnlMaXN0ZW5lcnMoZSwgdHlwZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgcG9pbnRlcmRvd25gIGV2ZW50cyB0byBhIGRvd25zdHJlYW0gYHBvaW50ZXJkb3duYCBldmVudC5cbiAgICpcbiAgICogYHRvdWNoc3RhcnRgLCBgcmlnaHRkb3duYCwgYG1vdXNlZG93bmAgZXZlbnRzIGFyZSBhbHNvIGRpc3BhdGNoZWQgZm9yIHNwZWNpZmljIHBvaW50ZXIgdHlwZXMuXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIHVwc3RyZWFtIGBwb2ludGVyZG93bmAgZXZlbnQuXG4gICAqL1xuICBtYXBQb2ludGVyRG93bihmcm9tKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZFBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHdhcm4oXCJFdmVudEJvdW5kYXJ5IGNhbm5vdCBtYXAgYSBub24tcG9pbnRlciBldmVudCBhcyBhIHBvaW50ZXIgZXZlbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGUgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJwb2ludGVyZG93blwiKTtcbiAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJ0b3VjaHN0YXJ0XCIpO1xuICAgIH0gZWxzZSBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCIpIHtcbiAgICAgIGNvbnN0IGlzUmlnaHRCdXR0b24gPSBlLmJ1dHRvbiA9PT0gMjtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlLCBpc1JpZ2h0QnV0dG9uID8gXCJyaWdodGRvd25cIiA6IFwibW91c2Vkb3duXCIpO1xuICAgIH1cbiAgICBjb25zdCB0cmFja2luZ0RhdGEgPSB0aGlzLnRyYWNraW5nRGF0YShmcm9tLnBvaW50ZXJJZCk7XG4gICAgdHJhY2tpbmdEYXRhLnByZXNzVGFyZ2V0c0J5QnV0dG9uW2Zyb20uYnV0dG9uXSA9IGUuY29tcG9zZWRQYXRoKCk7XG4gICAgdGhpcy5mcmVlRXZlbnQoZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIHVwc3RyZWFtIGBwb2ludGVybW92ZWAgdG8gZG93bnN0cmVhbSBgcG9pbnRlcm91dGAsIGBwb2ludGVyb3ZlcmAsIGFuZCBgcG9pbnRlcm1vdmVgIGV2ZW50cywgaW4gdGhhdCBvcmRlci5cbiAgICpcbiAgICogVGhlIHRyYWNraW5nIGRhdGEgZm9yIHRoZSBzcGVjaWZpYyBwb2ludGVyIGhhcyBhbiB1cGRhdGVkIGBvdmVyVGFyZ2V0YC4gYG1vdXNlb3V0YCwgYG1vdXNlb3ZlcmAsXG4gICAqIGBtb3VzZW1vdmVgLCBhbmQgYHRvdWNobW92ZWAgZXZlbnRzIGFyZSBmaXJlZCBhcyB3ZWxsIGZvciBzcGVjaWZpYyBwb2ludGVyIHR5cGVzLlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSBgcG9pbnRlcm1vdmVgIGV2ZW50LlxuICAgKi9cbiAgbWFwUG9pbnRlck1vdmUoZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXBvaW50ZXIgZXZlbnQgYXMgYSBwb2ludGVyIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9hbGxJbnRlcmFjdGl2ZUVsZW1lbnRzLmxlbmd0aCA9IDA7XG4gICAgdGhpcy5faGl0RWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9pc1BvaW50ZXJNb3ZlRXZlbnQgPSB0cnVlO1xuICAgIGNvbnN0IGUgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tKTtcbiAgICB0aGlzLl9pc1BvaW50ZXJNb3ZlRXZlbnQgPSBmYWxzZTtcbiAgICBjb25zdCBpc01vdXNlID0gZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgY29uc3QgdHJhY2tpbmdEYXRhID0gdGhpcy50cmFja2luZ0RhdGEoZnJvbS5wb2ludGVySWQpO1xuICAgIGNvbnN0IG91dFRhcmdldCA9IHRoaXMuZmluZE1vdW50ZWRUYXJnZXQodHJhY2tpbmdEYXRhLm92ZXJUYXJnZXRzKTtcbiAgICBpZiAodHJhY2tpbmdEYXRhLm92ZXJUYXJnZXRzPy5sZW5ndGggPiAwICYmIG91dFRhcmdldCAhPT0gZS50YXJnZXQpIHtcbiAgICAgIGNvbnN0IG91dFR5cGUgPSBmcm9tLnR5cGUgPT09IFwibW91c2Vtb3ZlXCIgPyBcIm1vdXNlb3V0XCIgOiBcInBvaW50ZXJvdXRcIjtcbiAgICAgIGNvbnN0IG91dEV2ZW50ID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSwgb3V0VHlwZSwgb3V0VGFyZ2V0KTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChvdXRFdmVudCwgXCJwb2ludGVyb3V0XCIpO1xuICAgICAgaWYgKGlzTW91c2UpXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChvdXRFdmVudCwgXCJtb3VzZW91dFwiKTtcbiAgICAgIGlmICghZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhvdXRUYXJnZXQpKSB7XG4gICAgICAgIGNvbnN0IGxlYXZlRXZlbnQgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tLCBcInBvaW50ZXJsZWF2ZVwiLCBvdXRUYXJnZXQpO1xuICAgICAgICBsZWF2ZUV2ZW50LmV2ZW50UGhhc2UgPSBsZWF2ZUV2ZW50LkFUX1RBUkdFVDtcbiAgICAgICAgd2hpbGUgKGxlYXZlRXZlbnQudGFyZ2V0ICYmICFlLmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKGxlYXZlRXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGxlYXZlRXZlbnQuY3VycmVudFRhcmdldCA9IGxlYXZlRXZlbnQudGFyZ2V0O1xuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGxlYXZlRXZlbnQpO1xuICAgICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQobGVhdmVFdmVudCwgXCJtb3VzZWxlYXZlXCIpO1xuICAgICAgICAgIGxlYXZlRXZlbnQudGFyZ2V0ID0gbGVhdmVFdmVudC50YXJnZXQucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJlZUV2ZW50KGxlYXZlRXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5mcmVlRXZlbnQob3V0RXZlbnQpO1xuICAgIH1cbiAgICBpZiAob3V0VGFyZ2V0ICE9PSBlLnRhcmdldCkge1xuICAgICAgY29uc3Qgb3ZlclR5cGUgPSBmcm9tLnR5cGUgPT09IFwibW91c2Vtb3ZlXCIgPyBcIm1vdXNlb3ZlclwiIDogXCJwb2ludGVyb3ZlclwiO1xuICAgICAgY29uc3Qgb3ZlckV2ZW50ID0gdGhpcy5jbG9uZVBvaW50ZXJFdmVudChlLCBvdmVyVHlwZSk7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQob3ZlckV2ZW50LCBcInBvaW50ZXJvdmVyXCIpO1xuICAgICAgaWYgKGlzTW91c2UpXG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChvdmVyRXZlbnQsIFwibW91c2VvdmVyXCIpO1xuICAgICAgbGV0IG92ZXJUYXJnZXRBbmNlc3RvciA9IG91dFRhcmdldD8ucGFyZW50O1xuICAgICAgd2hpbGUgKG92ZXJUYXJnZXRBbmNlc3RvciAmJiBvdmVyVGFyZ2V0QW5jZXN0b3IgIT09IHRoaXMucm9vdFRhcmdldC5wYXJlbnQpIHtcbiAgICAgICAgaWYgKG92ZXJUYXJnZXRBbmNlc3RvciA9PT0gZS50YXJnZXQpXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIG92ZXJUYXJnZXRBbmNlc3RvciA9IG92ZXJUYXJnZXRBbmNlc3Rvci5wYXJlbnQ7XG4gICAgICB9XG4gICAgICBjb25zdCBkaWRQb2ludGVyRW50ZXIgPSAhb3ZlclRhcmdldEFuY2VzdG9yIHx8IG92ZXJUYXJnZXRBbmNlc3RvciA9PT0gdGhpcy5yb290VGFyZ2V0LnBhcmVudDtcbiAgICAgIGlmIChkaWRQb2ludGVyRW50ZXIpIHtcbiAgICAgICAgY29uc3QgZW50ZXJFdmVudCA9IHRoaXMuY2xvbmVQb2ludGVyRXZlbnQoZSwgXCJwb2ludGVyZW50ZXJcIik7XG4gICAgICAgIGVudGVyRXZlbnQuZXZlbnRQaGFzZSA9IGVudGVyRXZlbnQuQVRfVEFSR0VUO1xuICAgICAgICB3aGlsZSAoZW50ZXJFdmVudC50YXJnZXQgJiYgZW50ZXJFdmVudC50YXJnZXQgIT09IG91dFRhcmdldCAmJiBlbnRlckV2ZW50LnRhcmdldCAhPT0gdGhpcy5yb290VGFyZ2V0LnBhcmVudCkge1xuICAgICAgICAgIGVudGVyRXZlbnQuY3VycmVudFRhcmdldCA9IGVudGVyRXZlbnQudGFyZ2V0O1xuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGVudGVyRXZlbnQpO1xuICAgICAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZW50ZXJFdmVudCwgXCJtb3VzZWVudGVyXCIpO1xuICAgICAgICAgIGVudGVyRXZlbnQudGFyZ2V0ID0gZW50ZXJFdmVudC50YXJnZXQucGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZnJlZUV2ZW50KGVudGVyRXZlbnQpO1xuICAgICAgfVxuICAgICAgdGhpcy5mcmVlRXZlbnQob3ZlckV2ZW50KTtcbiAgICB9XG4gICAgY29uc3QgYWxsTWV0aG9kcyA9IFtdO1xuICAgIGNvbnN0IGFsbG93R2xvYmFsUG9pbnRlckV2ZW50cyA9IHRoaXMuZW5hYmxlR2xvYmFsTW92ZUV2ZW50cyA/PyB0cnVlO1xuICAgIHRoaXMubW92ZU9uQWxsID8gYWxsTWV0aG9kcy5wdXNoKFwicG9pbnRlcm1vdmVcIikgOiB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJwb2ludGVybW92ZVwiKTtcbiAgICBhbGxvd0dsb2JhbFBvaW50ZXJFdmVudHMgJiYgYWxsTWV0aG9kcy5wdXNoKFwiZ2xvYmFscG9pbnRlcm1vdmVcIik7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgdGhpcy5tb3ZlT25BbGwgPyBhbGxNZXRob2RzLnNwbGljZSgxLCAwLCBcInRvdWNobW92ZVwiKSA6IHRoaXMuZGlzcGF0Y2hFdmVudChlLCBcInRvdWNobW92ZVwiKTtcbiAgICAgIGFsbG93R2xvYmFsUG9pbnRlckV2ZW50cyAmJiBhbGxNZXRob2RzLnB1c2goXCJnbG9iYWx0b3VjaG1vdmVcIik7XG4gICAgfVxuICAgIGlmIChpc01vdXNlKSB7XG4gICAgICB0aGlzLm1vdmVPbkFsbCA/IGFsbE1ldGhvZHMuc3BsaWNlKDEsIDAsIFwibW91c2Vtb3ZlXCIpIDogdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwibW91c2Vtb3ZlXCIpO1xuICAgICAgYWxsb3dHbG9iYWxQb2ludGVyRXZlbnRzICYmIGFsbE1ldGhvZHMucHVzaChcImdsb2JhbG1vdXNlbW92ZVwiKTtcbiAgICAgIHRoaXMuY3Vyc29yID0gZS50YXJnZXQ/LmN1cnNvcjtcbiAgICB9XG4gICAgaWYgKGFsbE1ldGhvZHMubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hbGwoZSwgYWxsTWV0aG9kcyk7XG4gICAgfVxuICAgIHRoaXMuX2FsbEludGVyYWN0aXZlRWxlbWVudHMubGVuZ3RoID0gMDtcbiAgICB0aGlzLl9oaXRFbGVtZW50cy5sZW5ndGggPSAwO1xuICAgIHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cyA9IGUuY29tcG9zZWRQYXRoKCk7XG4gICAgdGhpcy5mcmVlRXZlbnQoZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIHVwc3RyZWFtIGBwb2ludGVyb3ZlcmAgdG8gZG93bnN0cmVhbSBgcG9pbnRlcm92ZXJgIGFuZCBgcG9pbnRlcmVudGVyYCBldmVudHMsIGluIHRoYXQgb3JkZXIuXG4gICAqXG4gICAqIFRoZSB0cmFja2luZyBkYXRhIGZvciB0aGUgc3BlY2lmaWMgcG9pbnRlciBnZXRzIGEgbmV3IGBvdmVyVGFyZ2V0YC5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgdXBzdHJlYW0gYHBvaW50ZXJvdmVyYCBldmVudC5cbiAgICovXG4gIG1hcFBvaW50ZXJPdmVyKGZyb20pIHtcbiAgICBpZiAoIShmcm9tIGluc3RhbmNlb2YgRmVkZXJhdGVkUG9pbnRlckV2ZW50KSkge1xuICAgICAgd2FybihcIkV2ZW50Qm91bmRhcnkgY2Fubm90IG1hcCBhIG5vbi1wb2ludGVyIGV2ZW50IGFzIGEgcG9pbnRlciBldmVudFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdHJhY2tpbmdEYXRhID0gdGhpcy50cmFja2luZ0RhdGEoZnJvbS5wb2ludGVySWQpO1xuICAgIGNvbnN0IGUgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tKTtcbiAgICBjb25zdCBpc01vdXNlID0gZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwicG9pbnRlcm92ZXJcIik7XG4gICAgaWYgKGlzTW91c2UpXG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJtb3VzZW92ZXJcIik7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwibW91c2VcIilcbiAgICAgIHRoaXMuY3Vyc29yID0gZS50YXJnZXQ/LmN1cnNvcjtcbiAgICBjb25zdCBlbnRlckV2ZW50ID0gdGhpcy5jbG9uZVBvaW50ZXJFdmVudChlLCBcInBvaW50ZXJlbnRlclwiKTtcbiAgICBlbnRlckV2ZW50LmV2ZW50UGhhc2UgPSBlbnRlckV2ZW50LkFUX1RBUkdFVDtcbiAgICB3aGlsZSAoZW50ZXJFdmVudC50YXJnZXQgJiYgZW50ZXJFdmVudC50YXJnZXQgIT09IHRoaXMucm9vdFRhcmdldC5wYXJlbnQpIHtcbiAgICAgIGVudGVyRXZlbnQuY3VycmVudFRhcmdldCA9IGVudGVyRXZlbnQudGFyZ2V0O1xuICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZW50ZXJFdmVudCk7XG4gICAgICBpZiAoaXNNb3VzZSlcbiAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZW50ZXJFdmVudCwgXCJtb3VzZWVudGVyXCIpO1xuICAgICAgZW50ZXJFdmVudC50YXJnZXQgPSBlbnRlckV2ZW50LnRhcmdldC5wYXJlbnQ7XG4gICAgfVxuICAgIHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cyA9IGUuY29tcG9zZWRQYXRoKCk7XG4gICAgdGhpcy5mcmVlRXZlbnQoZSk7XG4gICAgdGhpcy5mcmVlRXZlbnQoZW50ZXJFdmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIHVwc3RyZWFtIGBwb2ludGVyb3V0YCB0byBkb3duc3RyZWFtIGBwb2ludGVyb3V0YCwgYHBvaW50ZXJsZWF2ZWAgZXZlbnRzLCBpbiB0aGF0IG9yZGVyLlxuICAgKlxuICAgKiBUaGUgdHJhY2tpbmcgZGF0YSBmb3IgdGhlIHNwZWNpZmljIHBvaW50ZXIgaXMgY2xlYXJlZCBvZiBhIGBvdmVyVGFyZ2V0YC5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgdXBzdHJlYW0gYHBvaW50ZXJvdXRgIGV2ZW50LlxuICAgKi9cbiAgbWFwUG9pbnRlck91dChmcm9tKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZFBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHdhcm4oXCJFdmVudEJvdW5kYXJ5IGNhbm5vdCBtYXAgYSBub24tcG9pbnRlciBldmVudCBhcyBhIHBvaW50ZXIgZXZlbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRyYWNraW5nRGF0YSA9IHRoaXMudHJhY2tpbmdEYXRhKGZyb20ucG9pbnRlcklkKTtcbiAgICBpZiAodHJhY2tpbmdEYXRhLm92ZXJUYXJnZXRzKSB7XG4gICAgICBjb25zdCBpc01vdXNlID0gZnJvbS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGZyb20ucG9pbnRlclR5cGUgPT09IFwicGVuXCI7XG4gICAgICBjb25zdCBvdXRUYXJnZXQgPSB0aGlzLmZpbmRNb3VudGVkVGFyZ2V0KHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cyk7XG4gICAgICBjb25zdCBvdXRFdmVudCA9IHRoaXMuY3JlYXRlUG9pbnRlckV2ZW50KGZyb20sIFwicG9pbnRlcm91dFwiLCBvdXRUYXJnZXQpO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG91dEV2ZW50KTtcbiAgICAgIGlmIChpc01vdXNlKVxuICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQob3V0RXZlbnQsIFwibW91c2VvdXRcIik7XG4gICAgICBjb25zdCBsZWF2ZUV2ZW50ID0gdGhpcy5jcmVhdGVQb2ludGVyRXZlbnQoZnJvbSwgXCJwb2ludGVybGVhdmVcIiwgb3V0VGFyZ2V0KTtcbiAgICAgIGxlYXZlRXZlbnQuZXZlbnRQaGFzZSA9IGxlYXZlRXZlbnQuQVRfVEFSR0VUO1xuICAgICAgd2hpbGUgKGxlYXZlRXZlbnQudGFyZ2V0ICYmIGxlYXZlRXZlbnQudGFyZ2V0ICE9PSB0aGlzLnJvb3RUYXJnZXQucGFyZW50KSB7XG4gICAgICAgIGxlYXZlRXZlbnQuY3VycmVudFRhcmdldCA9IGxlYXZlRXZlbnQudGFyZ2V0O1xuICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChsZWF2ZUV2ZW50KTtcbiAgICAgICAgaWYgKGlzTW91c2UpXG4gICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQobGVhdmVFdmVudCwgXCJtb3VzZWxlYXZlXCIpO1xuICAgICAgICBsZWF2ZUV2ZW50LnRhcmdldCA9IGxlYXZlRXZlbnQudGFyZ2V0LnBhcmVudDtcbiAgICAgIH1cbiAgICAgIHRyYWNraW5nRGF0YS5vdmVyVGFyZ2V0cyA9IG51bGw7XG4gICAgICB0aGlzLmZyZWVFdmVudChvdXRFdmVudCk7XG4gICAgICB0aGlzLmZyZWVFdmVudChsZWF2ZUV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5jdXJzb3IgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIHRoZSB1cHN0cmVhbSBgcG9pbnRlcnVwYCBldmVudCB0byBkb3duc3RyZWFtIGBwb2ludGVydXBgLCBgcG9pbnRlcnVwb3V0c2lkZWAsXG4gICAqIGFuZCBgY2xpY2tgL2ByaWdodGNsaWNrYC9gcG9pbnRlcnRhcGAgZXZlbnRzLCBpbiB0aGF0IG9yZGVyLlxuICAgKlxuICAgKiBUaGUgYHBvaW50ZXJ1cG91dHNpZGVgIGV2ZW50IGJ1YmJsZXMgZnJvbSB0aGUgb3JpZ2luYWwgYHBvaW50ZXJkb3duYCB0YXJnZXQgdG8gdGhlIG1vc3Qgc3BlY2lmaWNcbiAgICogYW5jZXN0b3Igb2YgdGhlIGBwb2ludGVyZG93bmAgYW5kIGBwb2ludGVydXBgIHRhcmdldHMsIHdoaWNoIGlzIGFsc28gdGhlIGBjbGlja2AgZXZlbnQncyB0YXJnZXQuIGB0b3VjaGVuZGAsXG4gICAqIGByaWdodHVwYCwgYG1vdXNldXBgLCBgdG91Y2hlbmRvdXRzaWRlYCwgYHJpZ2h0dXBvdXRzaWRlYCwgYG1vdXNldXBvdXRzaWRlYCwgYW5kIGB0YXBgIGFyZSBmaXJlZCBhcyB3ZWxsIGZvclxuICAgKiBzcGVjaWZpYyBwb2ludGVyIHR5cGVzLlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSBgcG9pbnRlcnVwYCBldmVudC5cbiAgICovXG4gIG1hcFBvaW50ZXJVcChmcm9tKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZFBvaW50ZXJFdmVudCkpIHtcbiAgICAgIHdhcm4oXCJFdmVudEJvdW5kYXJ5IGNhbm5vdCBtYXAgYSBub24tcG9pbnRlciBldmVudCBhcyBhIHBvaW50ZXIgZXZlbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IGUgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tKTtcbiAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZSwgXCJwb2ludGVydXBcIik7XG4gICAgaWYgKGUucG9pbnRlclR5cGUgPT09IFwidG91Y2hcIikge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIFwidG91Y2hlbmRcIik7XG4gICAgfSBlbHNlIGlmIChlLnBvaW50ZXJUeXBlID09PSBcIm1vdXNlXCIgfHwgZS5wb2ludGVyVHlwZSA9PT0gXCJwZW5cIikge1xuICAgICAgY29uc3QgaXNSaWdodEJ1dHRvbiA9IGUuYnV0dG9uID09PSAyO1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGUsIGlzUmlnaHRCdXR0b24gPyBcInJpZ2h0dXBcIiA6IFwibW91c2V1cFwiKTtcbiAgICB9XG4gICAgY29uc3QgdHJhY2tpbmdEYXRhID0gdGhpcy50cmFja2luZ0RhdGEoZnJvbS5wb2ludGVySWQpO1xuICAgIGNvbnN0IHByZXNzVGFyZ2V0ID0gdGhpcy5maW5kTW91bnRlZFRhcmdldCh0cmFja2luZ0RhdGEucHJlc3NUYXJnZXRzQnlCdXR0b25bZnJvbS5idXR0b25dKTtcbiAgICBsZXQgY2xpY2tUYXJnZXQgPSBwcmVzc1RhcmdldDtcbiAgICBpZiAocHJlc3NUYXJnZXQgJiYgIWUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXMocHJlc3NUYXJnZXQpKSB7XG4gICAgICBsZXQgY3VycmVudFRhcmdldCA9IHByZXNzVGFyZ2V0O1xuICAgICAgd2hpbGUgKGN1cnJlbnRUYXJnZXQgJiYgIWUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXMoY3VycmVudFRhcmdldCkpIHtcbiAgICAgICAgZS5jdXJyZW50VGFyZ2V0ID0gY3VycmVudFRhcmdldDtcbiAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgXCJwb2ludGVydXBvdXRzaWRlXCIpO1xuICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJ0b3VjaFwiKSB7XG4gICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgXCJ0b3VjaGVuZG91dHNpZGVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoZS5wb2ludGVyVHlwZSA9PT0gXCJtb3VzZVwiIHx8IGUucG9pbnRlclR5cGUgPT09IFwicGVuXCIpIHtcbiAgICAgICAgICBjb25zdCBpc1JpZ2h0QnV0dG9uID0gZS5idXR0b24gPT09IDI7XG4gICAgICAgICAgdGhpcy5ub3RpZnlUYXJnZXQoZSwgaXNSaWdodEJ1dHRvbiA/IFwicmlnaHR1cG91dHNpZGVcIiA6IFwibW91c2V1cG91dHNpZGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQucGFyZW50O1xuICAgICAgfVxuICAgICAgZGVsZXRlIHRyYWNraW5nRGF0YS5wcmVzc1RhcmdldHNCeUJ1dHRvbltmcm9tLmJ1dHRvbl07XG4gICAgICBjbGlja1RhcmdldCA9IGN1cnJlbnRUYXJnZXQ7XG4gICAgfVxuICAgIGlmIChjbGlja1RhcmdldCkge1xuICAgICAgY29uc3QgY2xpY2tFdmVudCA9IHRoaXMuY2xvbmVQb2ludGVyRXZlbnQoZSwgXCJjbGlja1wiKTtcbiAgICAgIGNsaWNrRXZlbnQudGFyZ2V0ID0gY2xpY2tUYXJnZXQ7XG4gICAgICBjbGlja0V2ZW50LnBhdGggPSBudWxsO1xuICAgICAgaWYgKCF0cmFja2luZ0RhdGEuY2xpY2tzQnlCdXR0b25bZnJvbS5idXR0b25dKSB7XG4gICAgICAgIHRyYWNraW5nRGF0YS5jbGlja3NCeUJ1dHRvbltmcm9tLmJ1dHRvbl0gPSB7XG4gICAgICAgICAgY2xpY2tDb3VudDogMCxcbiAgICAgICAgICB0YXJnZXQ6IGNsaWNrRXZlbnQudGFyZ2V0LFxuICAgICAgICAgIHRpbWVTdGFtcDogbm93XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBjbGlja0hpc3RvcnkgPSB0cmFja2luZ0RhdGEuY2xpY2tzQnlCdXR0b25bZnJvbS5idXR0b25dO1xuICAgICAgaWYgKGNsaWNrSGlzdG9yeS50YXJnZXQgPT09IGNsaWNrRXZlbnQudGFyZ2V0ICYmIG5vdyAtIGNsaWNrSGlzdG9yeS50aW1lU3RhbXAgPCAyMDApIHtcbiAgICAgICAgKytjbGlja0hpc3RvcnkuY2xpY2tDb3VudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsaWNrSGlzdG9yeS5jbGlja0NvdW50ID0gMTtcbiAgICAgIH1cbiAgICAgIGNsaWNrSGlzdG9yeS50YXJnZXQgPSBjbGlja0V2ZW50LnRhcmdldDtcbiAgICAgIGNsaWNrSGlzdG9yeS50aW1lU3RhbXAgPSBub3c7XG4gICAgICBjbGlja0V2ZW50LmRldGFpbCA9IGNsaWNrSGlzdG9yeS5jbGlja0NvdW50O1xuICAgICAgaWYgKGNsaWNrRXZlbnQucG9pbnRlclR5cGUgPT09IFwibW91c2VcIikge1xuICAgICAgICBjb25zdCBpc1JpZ2h0QnV0dG9uID0gY2xpY2tFdmVudC5idXR0b24gPT09IDI7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChjbGlja0V2ZW50LCBpc1JpZ2h0QnV0dG9uID8gXCJyaWdodGNsaWNrXCIgOiBcImNsaWNrXCIpO1xuICAgICAgfSBlbHNlIGlmIChjbGlja0V2ZW50LnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQsIFwidGFwXCIpO1xuICAgICAgfVxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQsIFwicG9pbnRlcnRhcFwiKTtcbiAgICAgIHRoaXMuZnJlZUV2ZW50KGNsaWNrRXZlbnQpO1xuICAgIH1cbiAgICB0aGlzLmZyZWVFdmVudChlKTtcbiAgfVxuICAvKipcbiAgICogTWFwcyB0aGUgdXBzdHJlYW0gYHBvaW50ZXJ1cG91dHNpZGVgIGV2ZW50IHRvIGEgZG93bnN0cmVhbSBgcG9pbnRlcnVwb3V0c2lkZWAgZXZlbnQsIGJ1YmJsaW5nIGZyb20gdGhlIG9yaWdpbmFsXG4gICAqIGBwb2ludGVyZG93bmAgdGFyZ2V0IHRvIGByb290VGFyZ2V0YC5cbiAgICpcbiAgICogKFRoZSBtb3N0IHNwZWNpZmljIGFuY2VzdG9yIG9mIHRoZSBgcG9pbnRlcmRvd25gIGV2ZW50IGFuZCB0aGUgYHBvaW50ZXJ1cGAgZXZlbnQgbXVzdCB0aGVcbiAgICogYHtAbGluayBFdmVudEJvdW5kYXJ5fSdzIHJvb3QgYmVjYXVzZSB0aGUgYHBvaW50ZXJ1cGAgZXZlbnQgb2NjdXJyZWQgb3V0c2lkZSBvZiB0aGUgYm91bmRhcnkuKVxuICAgKlxuICAgKiBgdG91Y2hlbmRvdXRzaWRlYCwgYG1vdXNldXBvdXRzaWRlYCwgYW5kIGByaWdodHVwb3V0c2lkZWAgZXZlbnRzIGFyZSBmaXJlZCBhcyB3ZWxsIGZvciBzcGVjaWZpYyBwb2ludGVyXG4gICAqIHR5cGVzLiBUaGUgdHJhY2tpbmcgZGF0YSBmb3IgdGhlIHNwZWNpZmljIHBvaW50ZXIgaXMgY2xlYXJlZCBvZiBhIGBwcmVzc1RhcmdldGAuXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIHVwc3RyZWFtIGBwb2ludGVydXBvdXRzaWRlYCBldmVudC5cbiAgICovXG4gIG1hcFBvaW50ZXJVcE91dHNpZGUoZnJvbSkge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXBvaW50ZXIgZXZlbnQgYXMgYSBwb2ludGVyIGV2ZW50XCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0cmFja2luZ0RhdGEgPSB0aGlzLnRyYWNraW5nRGF0YShmcm9tLnBvaW50ZXJJZCk7XG4gICAgY29uc3QgcHJlc3NUYXJnZXQgPSB0aGlzLmZpbmRNb3VudGVkVGFyZ2V0KHRyYWNraW5nRGF0YS5wcmVzc1RhcmdldHNCeUJ1dHRvbltmcm9tLmJ1dHRvbl0pO1xuICAgIGNvbnN0IGUgPSB0aGlzLmNyZWF0ZVBvaW50ZXJFdmVudChmcm9tKTtcbiAgICBpZiAocHJlc3NUYXJnZXQpIHtcbiAgICAgIGxldCBjdXJyZW50VGFyZ2V0ID0gcHJlc3NUYXJnZXQ7XG4gICAgICB3aGlsZSAoY3VycmVudFRhcmdldCkge1xuICAgICAgICBlLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xuICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChlLCBcInBvaW50ZXJ1cG91dHNpZGVcIik7XG4gICAgICAgIGlmIChlLnBvaW50ZXJUeXBlID09PSBcInRvdWNoXCIpIHtcbiAgICAgICAgICB0aGlzLm5vdGlmeVRhcmdldChlLCBcInRvdWNoZW5kb3V0c2lkZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnBvaW50ZXJUeXBlID09PSBcIm1vdXNlXCIgfHwgZS5wb2ludGVyVHlwZSA9PT0gXCJwZW5cIikge1xuICAgICAgICAgIHRoaXMubm90aWZ5VGFyZ2V0KGUsIGUuYnV0dG9uID09PSAyID8gXCJyaWdodHVwb3V0c2lkZVwiIDogXCJtb3VzZXVwb3V0c2lkZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjdXJyZW50VGFyZ2V0ID0gY3VycmVudFRhcmdldC5wYXJlbnQ7XG4gICAgICB9XG4gICAgICBkZWxldGUgdHJhY2tpbmdEYXRhLnByZXNzVGFyZ2V0c0J5QnV0dG9uW2Zyb20uYnV0dG9uXTtcbiAgICB9XG4gICAgdGhpcy5mcmVlRXZlbnQoZSk7XG4gIH1cbiAgLyoqXG4gICAqIE1hcHMgdGhlIHVwc3RyZWFtIGB3aGVlbGAgZXZlbnQgdG8gYSBkb3duc3RyZWFtIGB3aGVlbGAgZXZlbnQuXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIHVwc3RyZWFtIGB3aGVlbGAgZXZlbnQuXG4gICAqL1xuICBtYXBXaGVlbChmcm9tKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZFdoZWVsRXZlbnQpKSB7XG4gICAgICB3YXJuKFwiRXZlbnRCb3VuZGFyeSBjYW5ub3QgbWFwIGEgbm9uLXdoZWVsIGV2ZW50IGFzIGEgd2hlZWwgZXZlbnRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHdoZWVsRXZlbnQgPSB0aGlzLmNyZWF0ZVdoZWVsRXZlbnQoZnJvbSk7XG4gICAgdGhpcy5kaXNwYXRjaEV2ZW50KHdoZWVsRXZlbnQpO1xuICAgIHRoaXMuZnJlZUV2ZW50KHdoZWVsRXZlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgbW9zdCBzcGVjaWZpYyBldmVudC10YXJnZXQgaW4gdGhlIGdpdmVuIHByb3BhZ2F0aW9uIHBhdGggdGhhdCBpcyBzdGlsbCBtb3VudGVkIGluIHRoZSBzY2VuZSBncmFwaC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VkIHRvIGZpbmQgdGhlIGNvcnJlY3QgYHBvaW50ZXJ1cGAgYW5kIGBwb2ludGVyb3V0YCB0YXJnZXQgaW4gdGhlIGNhc2UgdGhhdCB0aGUgb3JpZ2luYWwgYHBvaW50ZXJkb3duYFxuICAgKiBvciBgcG9pbnRlcm92ZXJgIHRhcmdldCB3YXMgdW5tb3VudGVkIGZyb20gdGhlIHNjZW5lIGdyYXBoLlxuICAgKiBAcGFyYW0gcHJvcGFnYXRpb25QYXRoIC0gVGhlIHByb3BhZ2F0aW9uIHBhdGggd2FzIHZhbGlkIGluIHRoZSBwYXN0LlxuICAgKiBAcmV0dXJucyAtIFRoZSBtb3N0IHNwZWNpZmljIGV2ZW50LXRhcmdldCBzdGlsbCBtb3VudGVkIGF0IHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzY2VuZSBncmFwaC5cbiAgICovXG4gIGZpbmRNb3VudGVkVGFyZ2V0KHByb3BhZ2F0aW9uUGF0aCkge1xuICAgIGlmICghcHJvcGFnYXRpb25QYXRoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbGV0IGN1cnJlbnRUYXJnZXQgPSBwcm9wYWdhdGlvblBhdGhbMF07XG4gICAgZm9yIChsZXQgaSA9IDE7IGkgPCBwcm9wYWdhdGlvblBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwcm9wYWdhdGlvblBhdGhbaV0ucGFyZW50ID09PSBjdXJyZW50VGFyZ2V0KSB7XG4gICAgICAgIGN1cnJlbnRUYXJnZXQgPSBwcm9wYWdhdGlvblBhdGhbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRUYXJnZXQ7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXZlbnQgd2hvc2UgYG9yaWdpbmFsRXZlbnRgIGlzIGBmcm9tYCwgd2l0aCBhbiBvcHRpb25hbCBgdHlwZWAgYW5kIGB0YXJnZXRgIG92ZXJyaWRlLlxuICAgKlxuICAgKiBUaGUgZXZlbnQgaXMgYWxsb2NhdGVkIHVzaW5nIHtAbGluayBFdmVudEJvdW5kYXJ5I2FsbG9jYXRlRXZlbnQgdGhpcy5hbGxvY2F0ZUV2ZW50fS5cbiAgICogQHBhcmFtIGZyb20gLSBUaGUgYG9yaWdpbmFsRXZlbnRgIGZvciB0aGUgcmV0dXJuZWQgZXZlbnQuXG4gICAqIEBwYXJhbSBbdHlwZT1mcm9tLnR5cGVdIC0gVGhlIHR5cGUgb2YgdGhlIHJldHVybmVkIGV2ZW50LlxuICAgKiBAcGFyYW0gdGFyZ2V0IC0gVGhlIHRhcmdldCBvZiB0aGUgcmV0dXJuZWQgZXZlbnQuXG4gICAqL1xuICBjcmVhdGVQb2ludGVyRXZlbnQoZnJvbSwgdHlwZSwgdGFyZ2V0KSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmFsbG9jYXRlRXZlbnQoRmVkZXJhdGVkUG9pbnRlckV2ZW50KTtcbiAgICB0aGlzLmNvcHlQb2ludGVyRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5TW91c2VEYXRhKGZyb20sIGV2ZW50KTtcbiAgICB0aGlzLmNvcHlEYXRhKGZyb20sIGV2ZW50KTtcbiAgICBldmVudC5uYXRpdmVFdmVudCA9IGZyb20ubmF0aXZlRXZlbnQ7XG4gICAgZXZlbnQub3JpZ2luYWxFdmVudCA9IGZyb207XG4gICAgZXZlbnQudGFyZ2V0ID0gdGFyZ2V0ID8/IHRoaXMuaGl0VGVzdChldmVudC5nbG9iYWwueCwgZXZlbnQuZ2xvYmFsLnkpID8/IHRoaXMuX2hpdEVsZW1lbnRzWzBdO1xuICAgIGlmICh0eXBlb2YgdHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgZXZlbnQudHlwZSA9IHR5cGU7XG4gICAgfVxuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIHdoZWVsIGV2ZW50IHdob3NlIGBvcmlnaW5hbEV2ZW50YCBpcyBgZnJvbWAuXG4gICAqXG4gICAqIFRoZSBldmVudCBpcyBhbGxvY2F0ZWQgdXNpbmcge0BsaW5rIEV2ZW50Qm91bmRhcnkjYWxsb2NhdGVFdmVudCB0aGlzLmFsbG9jYXRlRXZlbnR9LlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSB1cHN0cmVhbSB3aGVlbCBldmVudC5cbiAgICovXG4gIGNyZWF0ZVdoZWVsRXZlbnQoZnJvbSkge1xuICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5hbGxvY2F0ZUV2ZW50KEZlZGVyYXRlZFdoZWVsRXZlbnQpO1xuICAgIHRoaXMuY29weVdoZWVsRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5TW91c2VEYXRhKGZyb20sIGV2ZW50KTtcbiAgICB0aGlzLmNvcHlEYXRhKGZyb20sIGV2ZW50KTtcbiAgICBldmVudC5uYXRpdmVFdmVudCA9IGZyb20ubmF0aXZlRXZlbnQ7XG4gICAgZXZlbnQub3JpZ2luYWxFdmVudCA9IGZyb207XG4gICAgZXZlbnQudGFyZ2V0ID0gdGhpcy5oaXRUZXN0KGV2ZW50Lmdsb2JhbC54LCBldmVudC5nbG9iYWwueSk7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG4gIC8qKlxuICAgKiBDbG9uZXMgdGhlIGV2ZW50IGBmcm9tYCwgd2l0aCBhbiBvcHRpb25hbCBgdHlwZWAgb3ZlcnJpZGUuXG4gICAqXG4gICAqIFRoZSBldmVudCBpcyBhbGxvY2F0ZWQgdXNpbmcge0BsaW5rIEV2ZW50Qm91bmRhcnkjYWxsb2NhdGVFdmVudCB0aGlzLmFsbG9jYXRlRXZlbnR9LlxuICAgKiBAcGFyYW0gZnJvbSAtIFRoZSBldmVudCB0byBjbG9uZS5cbiAgICogQHBhcmFtIFt0eXBlPWZyb20udHlwZV0gLSBUaGUgdHlwZSBvZiB0aGUgcmV0dXJuZWQgZXZlbnQuXG4gICAqL1xuICBjbG9uZVBvaW50ZXJFdmVudChmcm9tLCB0eXBlKSB7XG4gICAgY29uc3QgZXZlbnQgPSB0aGlzLmFsbG9jYXRlRXZlbnQoRmVkZXJhdGVkUG9pbnRlckV2ZW50KTtcbiAgICBldmVudC5uYXRpdmVFdmVudCA9IGZyb20ubmF0aXZlRXZlbnQ7XG4gICAgZXZlbnQub3JpZ2luYWxFdmVudCA9IGZyb20ub3JpZ2luYWxFdmVudDtcbiAgICB0aGlzLmNvcHlQb2ludGVyRGF0YShmcm9tLCBldmVudCk7XG4gICAgdGhpcy5jb3B5TW91c2VEYXRhKGZyb20sIGV2ZW50KTtcbiAgICB0aGlzLmNvcHlEYXRhKGZyb20sIGV2ZW50KTtcbiAgICBldmVudC50YXJnZXQgPSBmcm9tLnRhcmdldDtcbiAgICBldmVudC5wYXRoID0gZnJvbS5jb21wb3NlZFBhdGgoKS5zbGljZSgpO1xuICAgIGV2ZW50LnR5cGUgPSB0eXBlID8/IGV2ZW50LnR5cGU7XG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG4gIC8qKlxuICAgKiBDb3BpZXMgd2hlZWwge0BsaW5rIEZlZGVyYXRlZFdoZWVsRXZlbnR9IGRhdGEgZnJvbSBgZnJvbWAgaW50byBgdG9gLlxuICAgKlxuICAgKiBUaGUgZm9sbG93aW5nIHByb3BlcnRpZXMgYXJlIGNvcGllZDpcbiAgICogKyBkZWx0YU1vZGVcbiAgICogKyBkZWx0YVhcbiAgICogKyBkZWx0YVlcbiAgICogKyBkZWx0YVpcbiAgICogQHBhcmFtIGZyb20gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGZyb20uXG4gICAqIEBwYXJhbSB0byAtIFRoZSBldmVudCB0byBjb3B5IGRhdGEgaW50by5cbiAgICovXG4gIGNvcHlXaGVlbERhdGEoZnJvbSwgdG8pIHtcbiAgICB0by5kZWx0YU1vZGUgPSBmcm9tLmRlbHRhTW9kZTtcbiAgICB0by5kZWx0YVggPSBmcm9tLmRlbHRhWDtcbiAgICB0by5kZWx0YVkgPSBmcm9tLmRlbHRhWTtcbiAgICB0by5kZWx0YVogPSBmcm9tLmRlbHRhWjtcbiAgfVxuICAvKipcbiAgICogQ29waWVzIHBvaW50ZXIge0BsaW5rIEZlZGVyYXRlZFBvaW50ZXJFdmVudH0gZGF0YSBmcm9tIGBmcm9tYCBpbnRvIGB0b2AuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgY29waWVkOlxuICAgKiArIHBvaW50ZXJJZFxuICAgKiArIHdpZHRoXG4gICAqICsgaGVpZ2h0XG4gICAqICsgaXNQcmltYXJ5XG4gICAqICsgcG9pbnRlclR5cGVcbiAgICogKyBwcmVzc3VyZVxuICAgKiArIHRhbmdlbnRpYWxQcmVzc3VyZVxuICAgKiArIHRpbHRYXG4gICAqICsgdGlsdFlcbiAgICogQHBhcmFtIGZyb20gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGZyb20uXG4gICAqIEBwYXJhbSB0byAtIFRoZSBldmVudCB0byBjb3B5IGRhdGEgaW50by5cbiAgICovXG4gIGNvcHlQb2ludGVyRGF0YShmcm9tLCB0bykge1xuICAgIGlmICghKGZyb20gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQgJiYgdG8gaW5zdGFuY2VvZiBGZWRlcmF0ZWRQb2ludGVyRXZlbnQpKVxuICAgICAgcmV0dXJuO1xuICAgIHRvLnBvaW50ZXJJZCA9IGZyb20ucG9pbnRlcklkO1xuICAgIHRvLndpZHRoID0gZnJvbS53aWR0aDtcbiAgICB0by5oZWlnaHQgPSBmcm9tLmhlaWdodDtcbiAgICB0by5pc1ByaW1hcnkgPSBmcm9tLmlzUHJpbWFyeTtcbiAgICB0by5wb2ludGVyVHlwZSA9IGZyb20ucG9pbnRlclR5cGU7XG4gICAgdG8ucHJlc3N1cmUgPSBmcm9tLnByZXNzdXJlO1xuICAgIHRvLnRhbmdlbnRpYWxQcmVzc3VyZSA9IGZyb20udGFuZ2VudGlhbFByZXNzdXJlO1xuICAgIHRvLnRpbHRYID0gZnJvbS50aWx0WDtcbiAgICB0by50aWx0WSA9IGZyb20udGlsdFk7XG4gICAgdG8udHdpc3QgPSBmcm9tLnR3aXN0O1xuICB9XG4gIC8qKlxuICAgKiBDb3BpZXMgbW91c2Uge0BsaW5rIEZlZGVyYXRlZE1vdXNlRXZlbnR9IGRhdGEgZnJvbSBgZnJvbWAgdG8gYHRvYC5cbiAgICpcbiAgICogVGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGFyZSBjb3BpZWQ6XG4gICAqICsgYWx0S2V5XG4gICAqICsgYnV0dG9uXG4gICAqICsgYnV0dG9uc1xuICAgKiArIGNsaWVudFhcbiAgICogKyBjbGllbnRZXG4gICAqICsgbWV0YUtleVxuICAgKiArIG1vdmVtZW50WFxuICAgKiArIG1vdmVtZW50WVxuICAgKiArIHBhZ2VYXG4gICAqICsgcGFnZVlcbiAgICogKyB4XG4gICAqICsgeVxuICAgKiArIHNjcmVlblxuICAgKiArIHNoaWZ0S2V5XG4gICAqICsgZ2xvYmFsXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBmcm9tLlxuICAgKiBAcGFyYW0gdG8gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGludG8uXG4gICAqL1xuICBjb3B5TW91c2VEYXRhKGZyb20sIHRvKSB7XG4gICAgaWYgKCEoZnJvbSBpbnN0YW5jZW9mIEZlZGVyYXRlZE1vdXNlRXZlbnQgJiYgdG8gaW5zdGFuY2VvZiBGZWRlcmF0ZWRNb3VzZUV2ZW50KSlcbiAgICAgIHJldHVybjtcbiAgICB0by5hbHRLZXkgPSBmcm9tLmFsdEtleTtcbiAgICB0by5idXR0b24gPSBmcm9tLmJ1dHRvbjtcbiAgICB0by5idXR0b25zID0gZnJvbS5idXR0b25zO1xuICAgIHRvLmNsaWVudC5jb3B5RnJvbShmcm9tLmNsaWVudCk7XG4gICAgdG8uY3RybEtleSA9IGZyb20uY3RybEtleTtcbiAgICB0by5tZXRhS2V5ID0gZnJvbS5tZXRhS2V5O1xuICAgIHRvLm1vdmVtZW50LmNvcHlGcm9tKGZyb20ubW92ZW1lbnQpO1xuICAgIHRvLnNjcmVlbi5jb3B5RnJvbShmcm9tLnNjcmVlbik7XG4gICAgdG8uc2hpZnRLZXkgPSBmcm9tLnNoaWZ0S2V5O1xuICAgIHRvLmdsb2JhbC5jb3B5RnJvbShmcm9tLmdsb2JhbCk7XG4gIH1cbiAgLyoqXG4gICAqIENvcGllcyBiYXNlIHtAbGluayBGZWRlcmF0ZWRFdmVudH0gZGF0YSBmcm9tIGBmcm9tYCBpbnRvIGB0b2AuXG4gICAqXG4gICAqIFRoZSBmb2xsb3dpbmcgcHJvcGVydGllcyBhcmUgY29waWVkOlxuICAgKiArIGlzVHJ1c3RlZFxuICAgKiArIHNyY0VsZW1lbnRcbiAgICogKyB0aW1lU3RhbXBcbiAgICogKyB0eXBlXG4gICAqIEBwYXJhbSBmcm9tIC0gVGhlIGV2ZW50IHRvIGNvcHkgZGF0YSBmcm9tLlxuICAgKiBAcGFyYW0gdG8gLSBUaGUgZXZlbnQgdG8gY29weSBkYXRhIGludG8uXG4gICAqL1xuICBjb3B5RGF0YShmcm9tLCB0bykge1xuICAgIHRvLmlzVHJ1c3RlZCA9IGZyb20uaXNUcnVzdGVkO1xuICAgIHRvLnNyY0VsZW1lbnQgPSBmcm9tLnNyY0VsZW1lbnQ7XG4gICAgdG8udGltZVN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgdG8udHlwZSA9IGZyb20udHlwZTtcbiAgICB0by5kZXRhaWwgPSBmcm9tLmRldGFpbDtcbiAgICB0by52aWV3ID0gZnJvbS52aWV3O1xuICAgIHRvLndoaWNoID0gZnJvbS53aGljaDtcbiAgICB0by5sYXllci5jb3B5RnJvbShmcm9tLmxheWVyKTtcbiAgICB0by5wYWdlLmNvcHlGcm9tKGZyb20ucGFnZSk7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSBpZCAtIFRoZSBwb2ludGVyIElELlxuICAgKiBAcmV0dXJucyBUaGUgdHJhY2tpbmcgZGF0YSBzdG9yZWQgZm9yIHRoZSBnaXZlbiBwb2ludGVyLiBJZiBubyBkYXRhIGV4aXN0cywgYSBibGFua1xuICAgKiAgc3RhdGUgd2lsbCBiZSBjcmVhdGVkLlxuICAgKi9cbiAgdHJhY2tpbmdEYXRhKGlkKSB7XG4gICAgaWYgKCF0aGlzLm1hcHBpbmdTdGF0ZS50cmFja2luZ0RhdGFbaWRdKSB7XG4gICAgICB0aGlzLm1hcHBpbmdTdGF0ZS50cmFja2luZ0RhdGFbaWRdID0ge1xuICAgICAgICBwcmVzc1RhcmdldHNCeUJ1dHRvbjoge30sXG4gICAgICAgIGNsaWNrc0J5QnV0dG9uOiB7fSxcbiAgICAgICAgb3ZlclRhcmdldDogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWFwcGluZ1N0YXRlLnRyYWNraW5nRGF0YVtpZF07XG4gIH1cbiAgLyoqXG4gICAqIEFsbG9jYXRlIGEgc3BlY2lmaWMgdHlwZSBvZiBldmVudCBmcm9tIHtAbGluayBFdmVudEJvdW5kYXJ5I2V2ZW50UG9vbCB0aGlzLmV2ZW50UG9vbH0uXG4gICAqXG4gICAqIFRoaXMgYWxsb2NhdGlvbiBpcyBjb25zdHJ1Y3Rvci1hZ25vc3RpYywgYXMgbG9uZyBhcyBpdCBvbmx5IHRha2VzIG9uZSBhcmd1bWVudCAtIHRoaXMgZXZlbnRcbiAgICogYm91bmRhcnkuXG4gICAqIEBwYXJhbSBjb25zdHJ1Y3RvciAtIFRoZSBldmVudCdzIGNvbnN0cnVjdG9yLlxuICAgKiBAcmV0dXJucyBBbiBldmVudCBvZiB0aGUgZ2l2ZW4gdHlwZS5cbiAgICovXG4gIGFsbG9jYXRlRXZlbnQoY29uc3RydWN0b3IpIHtcbiAgICBpZiAoIXRoaXMuZXZlbnRQb29sLmhhcyhjb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRoaXMuZXZlbnRQb29sLnNldChjb25zdHJ1Y3RvciwgW10pO1xuICAgIH1cbiAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRQb29sLmdldChjb25zdHJ1Y3RvcikucG9wKCkgfHwgbmV3IGNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIGV2ZW50LmV2ZW50UGhhc2UgPSBldmVudC5OT05FO1xuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBudWxsO1xuICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSBmYWxzZTtcbiAgICBldmVudC5wYXRoID0gbnVsbDtcbiAgICBldmVudC50YXJnZXQgPSBudWxsO1xuICAgIHJldHVybiBldmVudDtcbiAgfVxuICAvKipcbiAgICogRnJlZXMgdGhlIGV2ZW50IGFuZCBwdXRzIGl0IGJhY2sgaW50byB0aGUgZXZlbnQgcG9vbC5cbiAgICpcbiAgICogSXQgaXMgaWxsZWdhbCB0byByZXVzZSB0aGUgZXZlbnQgdW50aWwgaXQgaXMgYWxsb2NhdGVkIGFnYWluLCB1c2luZyBgdGhpcy5hbGxvY2F0ZUV2ZW50YC5cbiAgICpcbiAgICogSXQgaXMgYWxzbyBhZHZpc2VkIHRoYXQgZXZlbnRzIG5vdCBhbGxvY2F0ZWQgZnJvbSB7QGxpbmsgRXZlbnRCb3VuZGFyeSNhbGxvY2F0ZUV2ZW50IHRoaXMuYWxsb2NhdGVFdmVudH1cbiAgICogbm90IGJlIGZyZWVkLiBUaGlzIGlzIGJlY2F1c2Ugb2YgdGhlIHBvc3NpYmlsaXR5IHRoYXQgdGhlIHNhbWUgZXZlbnQgaXMgZnJlZWQgdHdpY2UsIHdoaWNoIGNhbiBjYXVzZVxuICAgKiBpdCB0byBiZSBhbGxvY2F0ZWQgdHdpY2UgJiByZXN1bHQgaW4gb3ZlcndyaXRpbmcuXG4gICAqIEBwYXJhbSBldmVudCAtIFRoZSBldmVudCB0byBiZSBmcmVlZC5cbiAgICogQHRocm93cyBFcnJvciBpZiB0aGUgZXZlbnQgaXMgbWFuYWdlZCBieSBhbm90aGVyIGV2ZW50IGJvdW5kYXJ5LlxuICAgKi9cbiAgZnJlZUV2ZW50KGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50Lm1hbmFnZXIgIT09IHRoaXMpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJdCBpcyBpbGxlZ2FsIHRvIGZyZWUgYW4gZXZlbnQgbm90IG1hbmFnZWQgYnkgdGhpcyBFdmVudEJvdW5kYXJ5IVwiKTtcbiAgICBjb25zdCBjb25zdHJ1Y3RvciA9IGV2ZW50LmNvbnN0cnVjdG9yO1xuICAgIGlmICghdGhpcy5ldmVudFBvb2wuaGFzKGNvbnN0cnVjdG9yKSkge1xuICAgICAgdGhpcy5ldmVudFBvb2wuc2V0KGNvbnN0cnVjdG9yLCBbXSk7XG4gICAgfVxuICAgIHRoaXMuZXZlbnRQb29sLmdldChjb25zdHJ1Y3RvcikucHVzaChldmVudCk7XG4gIH1cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8ge0BsaW5rIEV2ZW50RW1pdHRlci5lbWl0fSwgZXhjZXB0IGl0IHN0b3BzIGlmIHRoZSBgcHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWRgIGZsYWdcbiAgICogaXMgc2V0IG9uIHRoZSBldmVudC5cbiAgICogQHBhcmFtIGUgLSBUaGUgZXZlbnQgdG8gY2FsbCBlYWNoIGxpc3RlbmVyIHdpdGguXG4gICAqIEBwYXJhbSB0eXBlIC0gVGhlIGV2ZW50IGtleS5cbiAgICovXG4gIF9ub3RpZnlMaXN0ZW5lcnMoZSwgdHlwZSkge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IGUuY3VycmVudFRhcmdldC5fZXZlbnRzW3R5cGVdO1xuICAgIGlmICghbGlzdGVuZXJzKVxuICAgICAgcmV0dXJuO1xuICAgIGlmIChcImZuXCIgaW4gbGlzdGVuZXJzKSB7XG4gICAgICBpZiAobGlzdGVuZXJzLm9uY2UpXG4gICAgICAgIGUuY3VycmVudFRhcmdldC5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnMuZm4sIHZvaWQgMCwgdHJ1ZSk7XG4gICAgICBsaXN0ZW5lcnMuZm4uY2FsbChsaXN0ZW5lcnMuY29udGV4dCwgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gbGlzdGVuZXJzLmxlbmd0aDsgaSA8IGogJiYgIWUucHJvcGFnYXRpb25JbW1lZGlhdGVseVN0b3BwZWQ7IGkrKykge1xuICAgICAgICBpZiAobGlzdGVuZXJzW2ldLm9uY2UpXG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVyc1tpXS5mbiwgdm9pZCAwLCB0cnVlKTtcbiAgICAgICAgbGlzdGVuZXJzW2ldLmZuLmNhbGwobGlzdGVuZXJzW2ldLmNvbnRleHQsIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBFdmVudEJvdW5kYXJ5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudEJvdW5kYXJ5Lm1qcy5tYXBcbiIsImltcG9ydCB7IEV4dGVuc2lvblR5cGUgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IEV2ZW50Qm91bmRhcnkgfSBmcm9tICcuL0V2ZW50Qm91bmRhcnkubWpzJztcbmltcG9ydCB7IEV2ZW50c1RpY2tlciB9IGZyb20gJy4vRXZlbnRUaWNrZXIubWpzJztcbmltcG9ydCB7IEZlZGVyYXRlZFBvaW50ZXJFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkUG9pbnRlckV2ZW50Lm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRXaGVlbEV2ZW50IH0gZnJvbSAnLi9GZWRlcmF0ZWRXaGVlbEV2ZW50Lm1qcyc7XG5cblwidXNlIHN0cmljdFwiO1xuY29uc3QgTU9VU0VfUE9JTlRFUl9JRCA9IDE7XG5jb25zdCBUT1VDSF9UT19QT0lOVEVSID0ge1xuICB0b3VjaHN0YXJ0OiBcInBvaW50ZXJkb3duXCIsXG4gIHRvdWNoZW5kOiBcInBvaW50ZXJ1cFwiLFxuICB0b3VjaGVuZG91dHNpZGU6IFwicG9pbnRlcnVwb3V0c2lkZVwiLFxuICB0b3VjaG1vdmU6IFwicG9pbnRlcm1vdmVcIixcbiAgdG91Y2hjYW5jZWw6IFwicG9pbnRlcmNhbmNlbFwiXG59O1xuY29uc3QgX0V2ZW50U3lzdGVtID0gY2xhc3MgX0V2ZW50U3lzdGVtIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7UmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlcikge1xuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBjdXJyZW50IGRldmljZSBzdXBwb3J0cyB0b3VjaCBldmVudHMgYWNjb3JkaW5nIHRvIHRoZSBXM0MgVG91Y2ggRXZlbnRzIHNwZWMuXG4gICAgICogVGhpcyBpcyB1c2VkIHRvIGRldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgZXZlbnQgaGFuZGxpbmcgc3RyYXRlZ3kuXG4gICAgICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3RvdWNoLWV2ZW50cy99IFczQyBUb3VjaCBFdmVudHMgU3BlY2lmaWNhdGlvblxuICAgICAqIEByZWFkb25seVxuICAgICAqIEBkZWZhdWx0ICdvbnRvdWNoc3RhcnQnIGluIGdsb2JhbFRoaXNcbiAgICAgKi9cbiAgICB0aGlzLnN1cHBvcnRzVG91Y2hFdmVudHMgPSBcIm9udG91Y2hzdGFydFwiIGluIGdsb2JhbFRoaXM7XG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIGN1cnJlbnQgZGV2aWNlIHN1cHBvcnRzIHBvaW50ZXIgZXZlbnRzIGFjY29yZGluZyB0byB0aGUgVzNDIFBvaW50ZXIgRXZlbnRzIHNwZWMuXG4gICAgICogVXNlZCB0byBvcHRpbWl6ZSBldmVudCBoYW5kbGluZyBhbmQgcHJvdmlkZSBtb3JlIGNvbnNpc3RlbnQgY3Jvc3MtZGV2aWNlIGludGVyYWN0aW9uLlxuICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9wb2ludGVyZXZlbnRzL30gVzNDIFBvaW50ZXIgRXZlbnRzIFNwZWNpZmljYXRpb25cbiAgICAgKiBAcmVhZG9ubHlcbiAgICAgKiBAZGVmYXVsdCAhIWdsb2JhbFRoaXMuUG9pbnRlckV2ZW50XG4gICAgICovXG4gICAgdGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMgPSAhIWdsb2JhbFRoaXMuUG9pbnRlckV2ZW50O1xuICAgIC8qKlxuICAgICAqIFRoZSBET00gZWxlbWVudCB0byB3aGljaCB0aGUgcm9vdCBldmVudCBsaXN0ZW5lcnMgYXJlIGJvdW5kLiBUaGlzIGlzIGF1dG9tYXRpY2FsbHkgc2V0IHRvXG4gICAgICogdGhlIHJlbmRlcmVyJ3Mge0BsaW5rIFJlbmRlcmVyI3ZpZXcgdmlld30uXG4gICAgICovXG4gICAgdGhpcy5kb21FbGVtZW50ID0gbnVsbDtcbiAgICAvKiogVGhlIHJlc29sdXRpb24gdXNlZCB0byBjb252ZXJ0IGJldHdlZW4gdGhlIERPTSBjbGllbnQgc3BhY2UgaW50byB3b3JsZCBzcGFjZS4gKi9cbiAgICB0aGlzLnJlc29sdXRpb24gPSAxO1xuICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLnJvb3RCb3VuZGFyeSA9IG5ldyBFdmVudEJvdW5kYXJ5KG51bGwpO1xuICAgIEV2ZW50c1RpY2tlci5pbml0KHRoaXMpO1xuICAgIHRoaXMuYXV0b1ByZXZlbnREZWZhdWx0ID0gdHJ1ZTtcbiAgICB0aGlzLl9ldmVudHNBZGRlZCA9IGZhbHNlO1xuICAgIHRoaXMuX3Jvb3RQb2ludGVyRXZlbnQgPSBuZXcgRmVkZXJhdGVkUG9pbnRlckV2ZW50KG51bGwpO1xuICAgIHRoaXMuX3Jvb3RXaGVlbEV2ZW50ID0gbmV3IEZlZGVyYXRlZFdoZWVsRXZlbnQobnVsbCk7XG4gICAgdGhpcy5jdXJzb3JTdHlsZXMgPSB7XG4gICAgICBkZWZhdWx0OiBcImluaGVyaXRcIixcbiAgICAgIHBvaW50ZXI6IFwicG9pbnRlclwiXG4gICAgfTtcbiAgICB0aGlzLmZlYXR1cmVzID0gbmV3IFByb3h5KHsgLi4uX0V2ZW50U3lzdGVtLmRlZmF1bHRFdmVudEZlYXR1cmVzIH0sIHtcbiAgICAgIHNldDogKHRhcmdldCwga2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAoa2V5ID09PSBcImdsb2JhbE1vdmVcIikge1xuICAgICAgICAgIHRoaXMucm9vdEJvdW5kYXJ5LmVuYWJsZUdsb2JhbE1vdmVFdmVudHMgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXRba2V5XSA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB0aGlzLl9vblBvaW50ZXJEb3duID0gdGhpcy5fb25Qb2ludGVyRG93bi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uUG9pbnRlck1vdmUgPSB0aGlzLl9vblBvaW50ZXJNb3ZlLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fb25Qb2ludGVyVXAgPSB0aGlzLl9vblBvaW50ZXJVcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX29uUG9pbnRlck92ZXJPdXQgPSB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5vbldoZWVsID0gdGhpcy5vbldoZWVsLmJpbmQodGhpcyk7XG4gIH1cbiAgLyoqXG4gICAqIFRoZSBkZWZhdWx0IGludGVyYWN0aW9uIG1vZGUgZm9yIGFsbCBkaXNwbGF5IG9iamVjdHMuXG4gICAqIEBzZWUgQ29udGFpbmVyLmV2ZW50TW9kZVxuICAgKiBAdHlwZSB7RXZlbnRNb2RlfVxuICAgKiBAcmVhZG9ubHlcbiAgICogQHNpbmNlIDcuMi4wXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRFdmVudE1vZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlZmF1bHRFdmVudE1vZGU7XG4gIH1cbiAgLyoqXG4gICAqIFJ1bm5lciBpbml0IGNhbGxlZCwgdmlldyBpcyBhdmFpbGFibGUgYXQgdGhpcyBwb2ludC5cbiAgICogQGlnbm9yZVxuICAgKi9cbiAgaW5pdChvcHRpb25zKSB7XG4gICAgY29uc3QgeyBjYW52YXMsIHJlc29sdXRpb24gfSA9IHRoaXMucmVuZGVyZXI7XG4gICAgdGhpcy5zZXRUYXJnZXRFbGVtZW50KGNhbnZhcyk7XG4gICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgICBfRXZlbnRTeXN0ZW0uX2RlZmF1bHRFdmVudE1vZGUgPSBvcHRpb25zLmV2ZW50TW9kZSA/PyBcInBhc3NpdmVcIjtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuZmVhdHVyZXMsIG9wdGlvbnMuZXZlbnRGZWF0dXJlcyA/PyB7fSk7XG4gICAgdGhpcy5yb290Qm91bmRhcnkuZW5hYmxlR2xvYmFsTW92ZUV2ZW50cyA9IHRoaXMuZmVhdHVyZXMuZ2xvYmFsTW92ZTtcbiAgfVxuICAvKipcbiAgICogSGFuZGxlIGNoYW5naW5nIHJlc29sdXRpb24uXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHJlc29sdXRpb25DaGFuZ2UocmVzb2x1dGlvbikge1xuICAgIHRoaXMucmVzb2x1dGlvbiA9IHJlc29sdXRpb247XG4gIH1cbiAgLyoqIERlc3Ryb3lzIGFsbCBldmVudCBsaXN0ZW5lcnMgYW5kIGRldGFjaGVzIHRoZSByZW5kZXJlci4gKi9cbiAgZGVzdHJveSgpIHtcbiAgICBFdmVudHNUaWNrZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuc2V0VGFyZ2V0RWxlbWVudChudWxsKTtcbiAgICB0aGlzLnJlbmRlcmVyID0gbnVsbDtcbiAgICB0aGlzLl9jdXJyZW50Q3Vyc29yID0gbnVsbDtcbiAgfVxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBjdXJzb3IgbW9kZSwgaGFuZGxpbmcgYW55IGNhbGxiYWNrcyBvciBDU1Mgc3R5bGUgY2hhbmdlcy5cbiAgICogVGhlIGN1cnNvciBjYW4gYmUgYSBDU1MgY3Vyc29yIHN0cmluZywgYSBjdXN0b20gY2FsbGJhY2sgZnVuY3Rpb24sIG9yIGEga2V5IGZyb20gdGhlIGN1cnNvclN0eWxlcyBkaWN0aW9uYXJ5LlxuICAgKiBAcGFyYW0gbW9kZSAtIEN1cnNvciBtb2RlIHRvIHNldC4gQ2FuIGJlOlxuICAgKiAtIEEgQ1NTIGN1cnNvciBzdHJpbmcgKGUuZy4sICdwb2ludGVyJywgJ2dyYWInKVxuICAgKiAtIEEga2V5IGZyb20gdGhlIGN1cnNvclN0eWxlcyBkaWN0aW9uYXJ5XG4gICAqIC0gbnVsbC91bmRlZmluZWQgdG8gcmVzZXQgdG8gZGVmYXVsdFxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBVc2luZyBwcmVkZWZpbmVkIGN1cnNvciBzdHlsZXNcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRDdXJzb3IoJ3BvaW50ZXInKTsgICAgLy8gU2V0IHN0YW5kYXJkIHBvaW50ZXIgY3Vyc29yXG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMuc2V0Q3Vyc29yKCdncmFiJyk7ICAgICAgIC8vIFNldCBncmFiIGN1cnNvclxuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldEN1cnNvcihudWxsKTsgICAgICAgICAvLyBSZXNldCB0byBkZWZhdWx0XG4gICAqXG4gICAqIC8vIFVzaW5nIGN1c3RvbSBjdXJzb3Igc3R5bGVzXG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMuY3Vyc29yU3R5bGVzLmN1c3RvbSA9ICd1cmwoXCJjdXJzb3IucG5nXCIpLCBhdXRvJztcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRDdXJzb3IoJ2N1c3RvbScpOyAgICAgLy8gQXBwbHkgY3VzdG9tIGN1cnNvclxuICAgKlxuICAgKiAvLyBVc2luZyBjYWxsYmFjay1iYXNlZCBjdXJzb3JcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5jdXJzb3JTdHlsZXMuZHluYW1pYyA9IChtb2RlKSA9PiB7XG4gICAqICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IG1vZGUgPT09ICdob3ZlcicgPyAncG9pbnRlcicgOiAnZGVmYXVsdCc7XG4gICAqIH07XG4gICAqIGFwcC5yZW5kZXJlci5ldmVudHMuc2V0Q3Vyc29yKCdkeW5hbWljJyk7ICAgIC8vIFRyaWdnZXIgY3Vyc29yIGNhbGxiYWNrXG4gICAqIGBgYFxuICAgKiBAcmVtYXJrc1xuICAgKiAtIEhhcyBubyBlZmZlY3Qgb24gT2Zmc2NyZWVuQ2FudmFzIGV4Y2VwdCBmb3IgY2FsbGJhY2stYmFzZWQgY3Vyc29yc1xuICAgKiAtIENhY2hlcyBjdXJyZW50IGN1cnNvciB0byBhdm9pZCB1bm5lY2Vzc2FyeSBET00gdXBkYXRlc1xuICAgKiAtIFN1cHBvcnRzIENTUyBjdXJzb3IgdmFsdWVzLCBzdHlsZSBvYmplY3RzLCBhbmQgY2FsbGJhY2sgZnVuY3Rpb25zXG4gICAqIEBzZWUge0BsaW5rIEV2ZW50U3lzdGVtLmN1cnNvclN0eWxlc30gRm9yIGRlZmluaW5nIGN1c3RvbSBjdXJzb3Igc3R5bGVzXG4gICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9jdXJzb3J9IE1ETiBDdXJzb3IgUmVmZXJlbmNlXG4gICAqL1xuICBzZXRDdXJzb3IobW9kZSkge1xuICAgIG1vZGUgfHwgKG1vZGUgPSBcImRlZmF1bHRcIik7XG4gICAgbGV0IGFwcGx5U3R5bGVzID0gdHJ1ZTtcbiAgICBpZiAoZ2xvYmFsVGhpcy5PZmZzY3JlZW5DYW52YXMgJiYgdGhpcy5kb21FbGVtZW50IGluc3RhbmNlb2YgT2Zmc2NyZWVuQ2FudmFzKSB7XG4gICAgICBhcHBseVN0eWxlcyA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5fY3VycmVudEN1cnNvciA9PT0gbW9kZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jdXJyZW50Q3Vyc29yID0gbW9kZTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuY3Vyc29yU3R5bGVzW21vZGVdO1xuICAgIGlmIChzdHlsZSkge1xuICAgICAgc3dpdGNoICh0eXBlb2Ygc3R5bGUpIHtcbiAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgIGlmIChhcHBseVN0eWxlcykge1xuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50LnN0eWxlLmN1cnNvciA9IHN0eWxlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgc3R5bGUobW9kZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICBpZiAoYXBwbHlTdHlsZXMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5kb21FbGVtZW50LnN0eWxlLCBzdHlsZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoYXBwbHlTdHlsZXMgJiYgdHlwZW9mIG1vZGUgPT09IFwic3RyaW5nXCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmN1cnNvclN0eWxlcywgbW9kZSkpIHtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5zdHlsZS5jdXJzb3IgPSBtb2RlO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogVGhlIGdsb2JhbCBwb2ludGVyIGV2ZW50IGluc3RhbmNlIGNvbnRhaW5pbmcgdGhlIG1vc3QgcmVjZW50IHBvaW50ZXIgc3RhdGUuXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBhY2Nlc3NpbmcgcG9pbnRlciBpbmZvcm1hdGlvbiB3aXRob3V0IGxpc3RlbmluZyB0byBldmVudHMuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIC8vIEFjY2VzcyBjdXJyZW50IHBvaW50ZXIgcG9zaXRpb24gYXQgYW55IHRpbWVcbiAgICogY29uc3QgZXZlbnRTeXN0ZW0gPSBhcHAucmVuZGVyZXIuZXZlbnRzO1xuICAgKiBjb25zdCBwb2ludGVyID0gZXZlbnRTeXN0ZW0ucG9pbnRlcjtcbiAgICpcbiAgICogLy8gR2V0IGdsb2JhbCBjb29yZGluYXRlc1xuICAgKiBjb25zb2xlLmxvZygnUG9zaXRpb246JywgcG9pbnRlci5nbG9iYWwueCwgcG9pbnRlci5nbG9iYWwueSk7XG4gICAqXG4gICAqIC8vIENoZWNrIGJ1dHRvbiBzdGF0ZVxuICAgKiBjb25zb2xlLmxvZygnQnV0dG9ucyBwcmVzc2VkOicsIHBvaW50ZXIuYnV0dG9ucyk7XG4gICAqXG4gICAqIC8vIEdldCBwb2ludGVyIHR5cGUgYW5kIHByZXNzdXJlXG4gICAqIGNvbnNvbGUubG9nKCdUeXBlOicsIHBvaW50ZXIucG9pbnRlclR5cGUpO1xuICAgKiBjb25zb2xlLmxvZygnUHJlc3N1cmU6JywgcG9pbnRlci5wcmVzc3VyZSk7XG4gICAqIGBgYFxuICAgKiBAcmVhZG9ubHlcbiAgICogQHNpbmNlIDcuMi4wXG4gICAqIEBzZWUge0BsaW5rIEZlZGVyYXRlZFBvaW50ZXJFdmVudH0gRm9yIGFsbCBhdmFpbGFibGUgcG9pbnRlciBwcm9wZXJ0aWVzXG4gICAqL1xuICBnZXQgcG9pbnRlcigpIHtcbiAgICByZXR1cm4gdGhpcy5fcm9vdFBvaW50ZXJFdmVudDtcbiAgfVxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgcG9pbnRlciBkb3duIGV2ZW50cyBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LlxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnQgLSBUaGUgbmF0aXZlIG1vdXNlL3BvaW50ZXIvdG91Y2ggZXZlbnQuXG4gICAqL1xuICBfb25Qb2ludGVyRG93bihuYXRpdmVFdmVudCkge1xuICAgIGlmICghdGhpcy5mZWF0dXJlcy5jbGljaylcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLnJvb3RCb3VuZGFyeS5yb290VGFyZ2V0ID0gdGhpcy5yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQ7XG4gICAgY29uc3QgZXZlbnRzID0gdGhpcy5fbm9ybWFsaXplVG9Qb2ludGVyRGF0YShuYXRpdmVFdmVudCk7XG4gICAgaWYgKHRoaXMuYXV0b1ByZXZlbnREZWZhdWx0ICYmIGV2ZW50c1swXS5pc05vcm1hbGl6ZWQpIHtcbiAgICAgIGNvbnN0IGNhbmNlbGFibGUgPSBuYXRpdmVFdmVudC5jYW5jZWxhYmxlIHx8ICEoXCJjYW5jZWxhYmxlXCIgaW4gbmF0aXZlRXZlbnQpO1xuICAgICAgaWYgKGNhbmNlbGFibGUpIHtcbiAgICAgICAgbmF0aXZlRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBldmVudHMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICBjb25zdCBuYXRpdmVFdmVudDIgPSBldmVudHNbaV07XG4gICAgICBjb25zdCBmZWRlcmF0ZWRFdmVudCA9IHRoaXMuX2Jvb3RzdHJhcEV2ZW50KHRoaXMuX3Jvb3RQb2ludGVyRXZlbnQsIG5hdGl2ZUV2ZW50Mik7XG4gICAgICB0aGlzLnJvb3RCb3VuZGFyeS5tYXBFdmVudChmZWRlcmF0ZWRFdmVudCk7XG4gICAgfVxuICAgIHRoaXMuc2V0Q3Vyc29yKHRoaXMucm9vdEJvdW5kYXJ5LmN1cnNvcik7XG4gIH1cbiAgLyoqXG4gICAqIEV2ZW50IGhhbmRsZXIgZm9yIHBvaW50ZXIgbW92ZSBldmVudHMgb24gb24ge0BsaW5rIEV2ZW50U3lzdGVtI2RvbUVsZW1lbnQgdGhpcy5kb21FbGVtZW50fS5cbiAgICogQHBhcmFtIG5hdGl2ZUV2ZW50IC0gVGhlIG5hdGl2ZSBtb3VzZS9wb2ludGVyL3RvdWNoIGV2ZW50cy5cbiAgICovXG4gIF9vblBvaW50ZXJNb3ZlKG5hdGl2ZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVzLm1vdmUpXG4gICAgICByZXR1cm47XG4gICAgdGhpcy5yb290Qm91bmRhcnkucm9vdFRhcmdldCA9IHRoaXMucmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkO1xuICAgIEV2ZW50c1RpY2tlci5wb2ludGVyTW92ZWQoKTtcbiAgICBjb25zdCBub3JtYWxpemVkRXZlbnRzID0gdGhpcy5fbm9ybWFsaXplVG9Qb2ludGVyRGF0YShuYXRpdmVFdmVudCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBub3JtYWxpemVkRXZlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLl9ib290c3RyYXBFdmVudCh0aGlzLl9yb290UG9pbnRlckV2ZW50LCBub3JtYWxpemVkRXZlbnRzW2ldKTtcbiAgICAgIHRoaXMucm9vdEJvdW5kYXJ5Lm1hcEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5zZXRDdXJzb3IodGhpcy5yb290Qm91bmRhcnkuY3Vyc29yKTtcbiAgfVxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgcG9pbnRlciB1cCBldmVudHMgb24ge0BsaW5rIEV2ZW50U3lzdGVtI2RvbUVsZW1lbnQgdGhpcy5kb21FbGVtZW50fS5cbiAgICogQHBhcmFtIG5hdGl2ZUV2ZW50IC0gVGhlIG5hdGl2ZSBtb3VzZS9wb2ludGVyL3RvdWNoIGV2ZW50LlxuICAgKi9cbiAgX29uUG9pbnRlclVwKG5hdGl2ZUV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVzLmNsaWNrKVxuICAgICAgcmV0dXJuO1xuICAgIHRoaXMucm9vdEJvdW5kYXJ5LnJvb3RUYXJnZXQgPSB0aGlzLnJlbmRlcmVyLmxhc3RPYmplY3RSZW5kZXJlZDtcbiAgICBsZXQgdGFyZ2V0ID0gbmF0aXZlRXZlbnQudGFyZ2V0O1xuICAgIGlmIChuYXRpdmVFdmVudC5jb21wb3NlZFBhdGggJiYgbmF0aXZlRXZlbnQuY29tcG9zZWRQYXRoKCkubGVuZ3RoID4gMCkge1xuICAgICAgdGFyZ2V0ID0gbmF0aXZlRXZlbnQuY29tcG9zZWRQYXRoKClbMF07XG4gICAgfVxuICAgIGNvbnN0IG91dHNpZGUgPSB0YXJnZXQgIT09IHRoaXMuZG9tRWxlbWVudCA/IFwib3V0c2lkZVwiIDogXCJcIjtcbiAgICBjb25zdCBub3JtYWxpemVkRXZlbnRzID0gdGhpcy5fbm9ybWFsaXplVG9Qb2ludGVyRGF0YShuYXRpdmVFdmVudCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGogPSBub3JtYWxpemVkRXZlbnRzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLl9ib290c3RyYXBFdmVudCh0aGlzLl9yb290UG9pbnRlckV2ZW50LCBub3JtYWxpemVkRXZlbnRzW2ldKTtcbiAgICAgIGV2ZW50LnR5cGUgKz0gb3V0c2lkZTtcbiAgICAgIHRoaXMucm9vdEJvdW5kYXJ5Lm1hcEV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgdGhpcy5zZXRDdXJzb3IodGhpcy5yb290Qm91bmRhcnkuY3Vyc29yKTtcbiAgfVxuICAvKipcbiAgICogRXZlbnQgaGFuZGxlciBmb3IgcG9pbnRlciBvdmVyICYgb3V0IGV2ZW50cyBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LlxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnQgLSBUaGUgbmF0aXZlIG1vdXNlL3BvaW50ZXIvdG91Y2ggZXZlbnQuXG4gICAqL1xuICBfb25Qb2ludGVyT3Zlck91dChuYXRpdmVFdmVudCkge1xuICAgIGlmICghdGhpcy5mZWF0dXJlcy5jbGljaylcbiAgICAgIHJldHVybjtcbiAgICB0aGlzLnJvb3RCb3VuZGFyeS5yb290VGFyZ2V0ID0gdGhpcy5yZW5kZXJlci5sYXN0T2JqZWN0UmVuZGVyZWQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZEV2ZW50cyA9IHRoaXMuX25vcm1hbGl6ZVRvUG9pbnRlckRhdGEobmF0aXZlRXZlbnQpO1xuICAgIGZvciAobGV0IGkgPSAwLCBqID0gbm9ybWFsaXplZEV2ZW50cy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5fYm9vdHN0cmFwRXZlbnQodGhpcy5fcm9vdFBvaW50ZXJFdmVudCwgbm9ybWFsaXplZEV2ZW50c1tpXSk7XG4gICAgICB0aGlzLnJvb3RCb3VuZGFyeS5tYXBFdmVudChldmVudCk7XG4gICAgfVxuICAgIHRoaXMuc2V0Q3Vyc29yKHRoaXMucm9vdEJvdW5kYXJ5LmN1cnNvcik7XG4gIH1cbiAgLyoqXG4gICAqIFBhc3NpdmUgaGFuZGxlciBmb3IgYHdoZWVsYCBldmVudHMgb24ge0BsaW5rIEV2ZW50U3lzdGVtLmRvbUVsZW1lbnQgdGhpcy5kb21FbGVtZW50fS5cbiAgICogQHBhcmFtIG5hdGl2ZUV2ZW50IC0gVGhlIG5hdGl2ZSB3aGVlbCBldmVudC5cbiAgICovXG4gIG9uV2hlZWwobmF0aXZlRXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZXMud2hlZWwpXG4gICAgICByZXR1cm47XG4gICAgY29uc3Qgd2hlZWxFdmVudCA9IHRoaXMubm9ybWFsaXplV2hlZWxFdmVudChuYXRpdmVFdmVudCk7XG4gICAgdGhpcy5yb290Qm91bmRhcnkucm9vdFRhcmdldCA9IHRoaXMucmVuZGVyZXIubGFzdE9iamVjdFJlbmRlcmVkO1xuICAgIHRoaXMucm9vdEJvdW5kYXJ5Lm1hcEV2ZW50KHdoZWVsRXZlbnQpO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCBkb21FbGVtZW50fSBhbmQgYmluZHMgZXZlbnQgbGlzdGVuZXJzLlxuICAgKiBUaGlzIG1ldGhvZCBtYW5hZ2VzIHRoZSBET00gZXZlbnQgYmluZGluZ3MgZm9yIHRoZSBldmVudCBzeXN0ZW0sIGFsbG93aW5nIHlvdSB0b1xuICAgKiBjaGFuZ2Ugb3IgcmVtb3ZlIHRoZSB0YXJnZXQgZWxlbWVudCB0aGF0IHJlY2VpdmVzIGlucHV0IGV2ZW50cy5cbiAgICogPiBbIUlNUE9SVEFOVF0gVGhpcyB3aWxsIGRlZmF1bHQgdG8gdGhlIGNhbnZhcyBlbGVtZW50IG9mIHRoZSByZW5kZXJlciwgc28geW91XG4gICAqID4gc2hvdWxkIG5vdCBuZWVkIHRvIGNhbGwgdGhpcyB1bmxlc3MgeW91IGFyZSB1c2luZyBhIGN1c3RvbSBlbGVtZW50LlxuICAgKiBAcGFyYW0gZWxlbWVudCAtIFRoZSBuZXcgRE9NIGVsZW1lbnQgdG8gYmluZCBldmVudHMgdG8sIG9yIG51bGwgdG8gcmVtb3ZlIGFsbCBldmVudCBiaW5kaW5nc1xuICAgKiBAZXhhbXBsZVxuICAgKiBgYGB0c1xuICAgKiAvLyBTZXQgYSBuZXcgY2FudmFzIGVsZW1lbnQgYXMgdGhlIHRhcmdldFxuICAgKiBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRUYXJnZXRFbGVtZW50KGNhbnZhcyk7XG4gICAqXG4gICAqIC8vIFJlbW92ZSBhbGwgZXZlbnQgYmluZGluZ3NcbiAgICogYXBwLnJlbmRlcmVyLmV2ZW50cy5zZXRUYXJnZXRFbGVtZW50KG51bGwpO1xuICAgKlxuICAgKiAvLyBTd2l0Y2ggdG8gYSBkaWZmZXJlbnQgY2FudmFzXG4gICAqIGNvbnN0IG5ld0NhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNnYW1lLWNhbnZhcycpO1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLnNldFRhcmdldEVsZW1lbnQobmV3Q2FudmFzKTtcbiAgICogYGBgXG4gICAqIEByZW1hcmtzXG4gICAqIC0gQXV0b21hdGljYWxseSByZW1vdmVzIGV2ZW50IGxpc3RlbmVycyBmcm9tIHByZXZpb3VzIGVsZW1lbnRcbiAgICogLSBSZXF1aXJlZCBmb3IgdGhlIGV2ZW50IHN5c3RlbSB0byBmdW5jdGlvblxuICAgKiAtIFNhZmUgdG8gY2FsbCBtdWx0aXBsZSB0aW1lc1xuICAgKiBAc2VlIHtAbGluayBFdmVudFN5c3RlbSNkb21FbGVtZW50fSBUaGUgY3VycmVudCBET00gZWxlbWVudFxuICAgKiBAc2VlIHtAbGluayBFdmVudHNUaWNrZXJ9IEZvciB0aGUgdGlja2VyIHN5c3RlbSB0aGF0IHRyYWNrcyBwb2ludGVyIG1vdmVtZW50XG4gICAqL1xuICBzZXRUYXJnZXRFbGVtZW50KGVsZW1lbnQpIHtcbiAgICB0aGlzLl9yZW1vdmVFdmVudHMoKTtcbiAgICB0aGlzLmRvbUVsZW1lbnQgPSBlbGVtZW50O1xuICAgIEV2ZW50c1RpY2tlci5kb21FbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl9hZGRFdmVudHMoKTtcbiAgfVxuICAvKiogUmVnaXN0ZXIgZXZlbnQgbGlzdGVuZXJzIG9uIHtAbGluayBSZW5kZXJlciNkb21FbGVtZW50IHRoaXMuZG9tRWxlbWVudH0uICovXG4gIF9hZGRFdmVudHMoKSB7XG4gICAgaWYgKHRoaXMuX2V2ZW50c0FkZGVkIHx8ICF0aGlzLmRvbUVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgRXZlbnRzVGlja2VyLmFkZFRpY2tlckxpc3RlbmVyKCk7XG4gICAgY29uc3Qgc3R5bGUgPSB0aGlzLmRvbUVsZW1lbnQuc3R5bGU7XG4gICAgaWYgKHN0eWxlKSB7XG4gICAgICBpZiAoZ2xvYmFsVGhpcy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgICAgICBzdHlsZS5tc0NvbnRlbnRab29taW5nID0gXCJub25lXCI7XG4gICAgICAgIHN0eWxlLm1zVG91Y2hBY3Rpb24gPSBcIm5vbmVcIjtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgc3R5bGUudG91Y2hBY3Rpb24gPSBcIm5vbmVcIjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc3VwcG9ydHNQb2ludGVyRXZlbnRzKSB7XG4gICAgICBnbG9iYWxUaGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLCB0aGlzLl9vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcmRvd25cIiwgdGhpcy5fb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJsZWF2ZVwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcm92ZXJcIiwgdGhpcy5fb25Qb2ludGVyT3Zlck91dCwgdHJ1ZSk7XG4gICAgICBnbG9iYWxUaGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIiwgdGhpcy5fb25Qb2ludGVyVXAsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnbG9iYWxUaGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgdGhpcy5fb25Qb2ludGVyTW92ZSwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5fb25Qb2ludGVyT3Zlck91dCwgdHJ1ZSk7XG4gICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIGdsb2JhbFRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5fb25Qb2ludGVyVXAsIHRydWUpO1xuICAgICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cykge1xuICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5fb25Qb2ludGVyRG93biwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcy5fb25Qb2ludGVyVXAsIHRydWUpO1xuICAgICAgICB0aGlzLmRvbUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kb21FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ3aGVlbFwiLCB0aGlzLm9uV2hlZWwsIHtcbiAgICAgIHBhc3NpdmU6IHRydWUsXG4gICAgICBjYXB0dXJlOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5fZXZlbnRzQWRkZWQgPSB0cnVlO1xuICB9XG4gIC8qKiBVbnJlZ2lzdGVyIGV2ZW50IGxpc3RlbmVycyBvbiB7QGxpbmsgRXZlbnRTeXN0ZW0jZG9tRWxlbWVudCB0aGlzLmRvbUVsZW1lbnR9LiAqL1xuICBfcmVtb3ZlRXZlbnRzKCkge1xuICAgIGlmICghdGhpcy5fZXZlbnRzQWRkZWQgfHwgIXRoaXMuZG9tRWxlbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBFdmVudHNUaWNrZXIucmVtb3ZlVGlja2VyTGlzdGVuZXIoKTtcbiAgICBjb25zdCBzdHlsZSA9IHRoaXMuZG9tRWxlbWVudC5zdHlsZTtcbiAgICBpZiAoc3R5bGUpIHtcbiAgICAgIGlmIChnbG9iYWxUaGlzLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkKSB7XG4gICAgICAgIHN0eWxlLm1zQ29udGVudFpvb21pbmcgPSBcIlwiO1xuICAgICAgICBzdHlsZS5tc1RvdWNoQWN0aW9uID0gXCJcIjtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgICAgc3R5bGUudG91Y2hBY3Rpb24gPSBcIlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5zdXBwb3J0c1BvaW50ZXJFdmVudHMpIHtcbiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJtb3ZlXCIsIHRoaXMuX29uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyZG93blwiLCB0aGlzLl9vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9pbnRlcmxlYXZlXCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwb2ludGVyb3ZlclwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIGdsb2JhbFRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJ1cFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGdsb2JhbFRoaXMuZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLl9vblBvaW50ZXJNb3ZlLCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX29uUG9pbnRlckRvd24sIHRydWUpO1xuICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB0aGlzLl9vblBvaW50ZXJPdmVyT3V0LCB0cnVlKTtcbiAgICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIHRoaXMuX29uUG9pbnRlck92ZXJPdXQsIHRydWUpO1xuICAgICAgZ2xvYmFsVGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5zdXBwb3J0c1RvdWNoRXZlbnRzKSB7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9vblBvaW50ZXJEb3duLCB0cnVlKTtcbiAgICAgICAgdGhpcy5kb21FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9vblBvaW50ZXJVcCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZG9tRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIHRoaXMuX29uUG9pbnRlck1vdmUsIHRydWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRvbUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIndoZWVsXCIsIHRoaXMub25XaGVlbCwgdHJ1ZSk7XG4gICAgdGhpcy5kb21FbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9ldmVudHNBZGRlZCA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBNYXBzIGNvb3JkaW5hdGVzIGZyb20gRE9NL3NjcmVlbiBzcGFjZSBpbnRvIFBpeGlKUyBub3JtYWxpemVkIGNvb3JkaW5hdGVzLlxuICAgKiBUaGlzIHRha2VzIGludG8gYWNjb3VudCB0aGUgY3VycmVudCBzY2FsZSwgcG9zaXRpb24sIGFuZCByZXNvbHV0aW9uIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHBvaW50IC0gVGhlIHBvaW50IHRvIHN0b3JlIHRoZSBtYXBwZWQgY29vcmRpbmF0ZXMgaW5cbiAgICogQHBhcmFtIHggLSBUaGUgeCBjb29yZGluYXRlIGluIERPTS9jbGllbnQgc3BhY2VcbiAgICogQHBhcmFtIHkgLSBUaGUgeSBjb29yZGluYXRlIGluIERPTS9jbGllbnQgc3BhY2VcbiAgICogQGV4YW1wbGVcbiAgICogYGBgdHNcbiAgICogLy8gTWFwIG1vdXNlIGNvb3JkaW5hdGVzIHRvIFBpeGlKUyBzcGFjZVxuICAgKiBjb25zdCBwb2ludCA9IG5ldyBQb2ludCgpO1xuICAgKiBhcHAucmVuZGVyZXIuZXZlbnRzLm1hcFBvc2l0aW9uVG9Qb2ludChcbiAgICogICAgIHBvaW50LFxuICAgKiAgICAgZXZlbnQuY2xpZW50WCxcbiAgICogICAgIGV2ZW50LmNsaWVudFlcbiAgICogKTtcbiAgICogY29uc29sZS5sb2coJ01hcHBlZCBwb3NpdGlvbjonLCBwb2ludC54LCBwb2ludC55KTtcbiAgICpcbiAgICogLy8gVXNpbmcgd2l0aCBwb2ludGVyIGV2ZW50c1xuICAgKiBzcHJpdGUub24oJ3BvaW50ZXJtb3ZlJywgKGV2ZW50KSA9PiB7XG4gICAqICAgICAvLyBldmVudC5nbG9iYWwgYWxyZWFkeSBjb250YWlucyBtYXBwZWQgY29vcmRpbmF0ZXNcbiAgICogICAgIGNvbnNvbGUubG9nKCdHbG9iYWw6JywgZXZlbnQuZ2xvYmFsLngsIGV2ZW50Lmdsb2JhbC55KTtcbiAgICpcbiAgICogICAgIC8vIE1hcCB0byBsb2NhbCBjb29yZGluYXRlc1xuICAgKiAgICAgY29uc3QgbG9jYWwgPSBldmVudC5nZXRMb2NhbFBvc2l0aW9uKHNwcml0ZSk7XG4gICAqICAgICBjb25zb2xlLmxvZygnTG9jYWw6JywgbG9jYWwueCwgbG9jYWwueSk7XG4gICAqIH0pO1xuICAgKiBgYGBcbiAgICogQHJlbWFya3NcbiAgICogLSBBY2NvdW50cyBmb3IgZWxlbWVudCBzY2FsaW5nIGFuZCBwb3NpdGlvbmluZ1xuICAgKiAtIEFkanVzdHMgZm9yIGRldmljZSBwaXhlbCByYXRpby9yZXNvbHV0aW9uXG4gICAqL1xuICBtYXBQb3NpdGlvblRvUG9pbnQocG9pbnQsIHgsIHkpIHtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5kb21FbGVtZW50LmlzQ29ubmVjdGVkID8gdGhpcy5kb21FbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpIDoge1xuICAgICAgeDogMCxcbiAgICAgIHk6IDAsXG4gICAgICB3aWR0aDogdGhpcy5kb21FbGVtZW50LndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLmRvbUVsZW1lbnQuaGVpZ2h0LFxuICAgICAgbGVmdDogMCxcbiAgICAgIHRvcDogMFxuICAgIH07XG4gICAgY29uc3QgcmVzb2x1dGlvbk11bHRpcGxpZXIgPSAxIC8gdGhpcy5yZXNvbHV0aW9uO1xuICAgIHBvaW50LnggPSAoeCAtIHJlY3QubGVmdCkgKiAodGhpcy5kb21FbGVtZW50LndpZHRoIC8gcmVjdC53aWR0aCkgKiByZXNvbHV0aW9uTXVsdGlwbGllcjtcbiAgICBwb2ludC55ID0gKHkgLSByZWN0LnRvcCkgKiAodGhpcy5kb21FbGVtZW50LmhlaWdodCAvIHJlY3QuaGVpZ2h0KSAqIHJlc29sdXRpb25NdWx0aXBsaWVyO1xuICB9XG4gIC8qKlxuICAgKiBFbnN1cmVzIHRoYXQgdGhlIG9yaWdpbmFsIGV2ZW50IG9iamVjdCBjb250YWlucyBhbGwgZGF0YSB0aGF0IGEgcmVndWxhciBwb2ludGVyIGV2ZW50IHdvdWxkIGhhdmVcbiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIG9yaWdpbmFsIGV2ZW50IGRhdGEgZnJvbSBhIHRvdWNoIG9yIG1vdXNlIGV2ZW50XG4gICAqIEByZXR1cm5zIEFuIGFycmF5IGNvbnRhaW5pbmcgYSBzaW5nbGUgbm9ybWFsaXplZCBwb2ludGVyIGV2ZW50LCBpbiB0aGUgY2FzZSBvZiBhIHBvaW50ZXJcbiAgICogIG9yIG1vdXNlIGV2ZW50LCBvciBhIG11bHRpcGxlIG5vcm1hbGl6ZWQgcG9pbnRlciBldmVudHMgaWYgdGhlcmUgYXJlIG11bHRpcGxlIGNoYW5nZWQgdG91Y2hlc1xuICAgKi9cbiAgX25vcm1hbGl6ZVRvUG9pbnRlckRhdGEoZXZlbnQpIHtcbiAgICBjb25zdCBub3JtYWxpemVkRXZlbnRzID0gW107XG4gICAgaWYgKHRoaXMuc3VwcG9ydHNUb3VjaEV2ZW50cyAmJiBldmVudCBpbnN0YW5jZW9mIFRvdWNoRXZlbnQpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBsaSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzLmxlbmd0aDsgaSA8IGxpOyBpKyspIHtcbiAgICAgICAgY29uc3QgdG91Y2ggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1tpXTtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5idXR0b24gPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2guYnV0dG9uID0gMDtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5idXR0b25zID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLmJ1dHRvbnMgPSAxO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmlzUHJpbWFyeSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIHRvdWNoLmlzUHJpbWFyeSA9IGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxICYmIGV2ZW50LnR5cGUgPT09IFwidG91Y2hzdGFydFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gud2lkdGggPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gud2lkdGggPSB0b3VjaC5yYWRpdXNYIHx8IDE7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2guaGVpZ2h0ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLmhlaWdodCA9IHRvdWNoLnJhZGl1c1kgfHwgMTtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC50aWx0WCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC50aWx0WCA9IDA7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gudGlsdFkgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gudGlsdFkgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnBvaW50ZXJUeXBlID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICAgIHRvdWNoLnBvaW50ZXJUeXBlID0gXCJ0b3VjaFwiO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnBvaW50ZXJJZCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC5wb2ludGVySWQgPSB0b3VjaC5pZGVudGlmaWVyIHx8IDA7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gucHJlc3N1cmUgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gucHJlc3N1cmUgPSB0b3VjaC5mb3JjZSB8fCAwLjU7XG4gICAgICAgIGlmICh0eXBlb2YgdG91Y2gudHdpc3QgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gudHdpc3QgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLnRhbmdlbnRpYWxQcmVzc3VyZSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC50YW5nZW50aWFsUHJlc3N1cmUgPSAwO1xuICAgICAgICBpZiAodHlwZW9mIHRvdWNoLmxheWVyWCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgICB0b3VjaC5sYXllclggPSB0b3VjaC5vZmZzZXRYID0gdG91Y2guY2xpZW50WDtcbiAgICAgICAgaWYgKHR5cGVvZiB0b3VjaC5sYXllclkgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgICAgdG91Y2gubGF5ZXJZID0gdG91Y2gub2Zmc2V0WSA9IHRvdWNoLmNsaWVudFk7XG4gICAgICAgIHRvdWNoLmlzTm9ybWFsaXplZCA9IHRydWU7XG4gICAgICAgIHRvdWNoLnR5cGUgPSBldmVudC50eXBlO1xuICAgICAgICBub3JtYWxpemVkRXZlbnRzLnB1c2godG91Y2gpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWdsb2JhbFRoaXMuTW91c2VFdmVudCB8fCBldmVudCBpbnN0YW5jZW9mIE1vdXNlRXZlbnQgJiYgKCF0aGlzLnN1cHBvcnRzUG9pbnRlckV2ZW50cyB8fCAhKGV2ZW50IGluc3RhbmNlb2YgZ2xvYmFsVGhpcy5Qb2ludGVyRXZlbnQpKSkge1xuICAgICAgY29uc3QgdGVtcEV2ZW50ID0gZXZlbnQ7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5pc1ByaW1hcnkgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC5pc1ByaW1hcnkgPSB0cnVlO1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQud2lkdGggPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC53aWR0aCA9IDE7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5oZWlnaHQgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC5oZWlnaHQgPSAxO1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQudGlsdFggPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC50aWx0WCA9IDA7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC50aWx0WSA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgdGVtcEV2ZW50LnRpbHRZID0gMDtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnBvaW50ZXJUeXBlID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICB0ZW1wRXZlbnQucG9pbnRlclR5cGUgPSBcIm1vdXNlXCI7XG4gICAgICBpZiAodHlwZW9mIHRlbXBFdmVudC5wb2ludGVySWQgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC5wb2ludGVySWQgPSBNT1VTRV9QT0lOVEVSX0lEO1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQucHJlc3N1cmUgPT09IFwidW5kZWZpbmVkXCIpXG4gICAgICAgIHRlbXBFdmVudC5wcmVzc3VyZSA9IDAuNTtcbiAgICAgIGlmICh0eXBlb2YgdGVtcEV2ZW50LnR3aXN0ID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICB0ZW1wRXZlbnQudHdpc3QgPSAwO1xuICAgICAgaWYgKHR5cGVvZiB0ZW1wRXZlbnQudGFuZ2VudGlhbFByZXNzdXJlID09PSBcInVuZGVmaW5lZFwiKVxuICAgICAgICB0ZW1wRXZlbnQudGFuZ2VudGlhbFByZXNzdXJlID0gMDtcbiAgICAgIHRlbXBFdmVudC5pc05vcm1hbGl6ZWQgPSB0cnVlO1xuICAgICAgbm9ybWFsaXplZEV2ZW50cy5wdXNoKHRlbXBFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vcm1hbGl6ZWRFdmVudHMucHVzaChldmVudCk7XG4gICAgfVxuICAgIHJldHVybiBub3JtYWxpemVkRXZlbnRzO1xuICB9XG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoZSBuYXRpdmUge0BsaW5rIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby91aWV2ZW50cy8jaW50ZXJmYWNlLXdoZWVsZXZlbnQgV2hlZWxFdmVudH0uXG4gICAqXG4gICAqIFRoZSByZXR1cm5lZCB7QGxpbmsgRmVkZXJhdGVkV2hlZWxFdmVudH0gaXMgYSBzaGFyZWQgaW5zdGFuY2UuIEl0IHdpbGwgbm90IHBlcnNpc3QgYWNyb3NzXG4gICAqIG11bHRpcGxlIG5hdGl2ZSB3aGVlbCBldmVudHMuXG4gICAqIEBwYXJhbSBuYXRpdmVFdmVudCAtIFRoZSBuYXRpdmUgd2hlZWwgZXZlbnQgdGhhdCBvY2N1cnJlZCBvbiB0aGUgY2FudmFzLlxuICAgKiBAcmV0dXJucyBBIGZlZGVyYXRlZCB3aGVlbCBldmVudC5cbiAgICovXG4gIG5vcm1hbGl6ZVdoZWVsRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuX3Jvb3RXaGVlbEV2ZW50O1xuICAgIHRoaXMuX3RyYW5zZmVyTW91c2VEYXRhKGV2ZW50LCBuYXRpdmVFdmVudCk7XG4gICAgZXZlbnQuZGVsdGFYID0gbmF0aXZlRXZlbnQuZGVsdGFYO1xuICAgIGV2ZW50LmRlbHRhWSA9IG5hdGl2ZUV2ZW50LmRlbHRhWTtcbiAgICBldmVudC5kZWx0YVogPSBuYXRpdmVFdmVudC5kZWx0YVo7XG4gICAgZXZlbnQuZGVsdGFNb2RlID0gbmF0aXZlRXZlbnQuZGVsdGFNb2RlO1xuICAgIHRoaXMubWFwUG9zaXRpb25Ub1BvaW50KGV2ZW50LnNjcmVlbiwgbmF0aXZlRXZlbnQuY2xpZW50WCwgbmF0aXZlRXZlbnQuY2xpZW50WSk7XG4gICAgZXZlbnQuZ2xvYmFsLmNvcHlGcm9tKGV2ZW50LnNjcmVlbik7XG4gICAgZXZlbnQub2Zmc2V0LmNvcHlGcm9tKGV2ZW50LnNjcmVlbik7XG4gICAgZXZlbnQubmF0aXZlRXZlbnQgPSBuYXRpdmVFdmVudDtcbiAgICBldmVudC50eXBlID0gbmF0aXZlRXZlbnQudHlwZTtcbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgdGhlIGBuYXRpdmVFdmVudGAgaW50byBhIGZlZGVyYXRlZWQge0BsaW5rIEZlZGVyYXRlZFBvaW50ZXJFdmVudH0uXG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnRcbiAgICovXG4gIF9ib290c3RyYXBFdmVudChldmVudCwgbmF0aXZlRXZlbnQpIHtcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50ID0gbnVsbDtcbiAgICBldmVudC5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuICAgIGV2ZW50LnBvaW50ZXJJZCA9IG5hdGl2ZUV2ZW50LnBvaW50ZXJJZDtcbiAgICBldmVudC53aWR0aCA9IG5hdGl2ZUV2ZW50LndpZHRoO1xuICAgIGV2ZW50LmhlaWdodCA9IG5hdGl2ZUV2ZW50LmhlaWdodDtcbiAgICBldmVudC5pc1ByaW1hcnkgPSBuYXRpdmVFdmVudC5pc1ByaW1hcnk7XG4gICAgZXZlbnQucG9pbnRlclR5cGUgPSBuYXRpdmVFdmVudC5wb2ludGVyVHlwZTtcbiAgICBldmVudC5wcmVzc3VyZSA9IG5hdGl2ZUV2ZW50LnByZXNzdXJlO1xuICAgIGV2ZW50LnRhbmdlbnRpYWxQcmVzc3VyZSA9IG5hdGl2ZUV2ZW50LnRhbmdlbnRpYWxQcmVzc3VyZTtcbiAgICBldmVudC50aWx0WCA9IG5hdGl2ZUV2ZW50LnRpbHRYO1xuICAgIGV2ZW50LnRpbHRZID0gbmF0aXZlRXZlbnQudGlsdFk7XG4gICAgZXZlbnQudHdpc3QgPSBuYXRpdmVFdmVudC50d2lzdDtcbiAgICB0aGlzLl90cmFuc2Zlck1vdXNlRGF0YShldmVudCwgbmF0aXZlRXZlbnQpO1xuICAgIHRoaXMubWFwUG9zaXRpb25Ub1BvaW50KGV2ZW50LnNjcmVlbiwgbmF0aXZlRXZlbnQuY2xpZW50WCwgbmF0aXZlRXZlbnQuY2xpZW50WSk7XG4gICAgZXZlbnQuZ2xvYmFsLmNvcHlGcm9tKGV2ZW50LnNjcmVlbik7XG4gICAgZXZlbnQub2Zmc2V0LmNvcHlGcm9tKGV2ZW50LnNjcmVlbik7XG4gICAgZXZlbnQuaXNUcnVzdGVkID0gbmF0aXZlRXZlbnQuaXNUcnVzdGVkO1xuICAgIGlmIChldmVudC50eXBlID09PSBcInBvaW50ZXJsZWF2ZVwiKSB7XG4gICAgICBldmVudC50eXBlID0gXCJwb2ludGVyb3V0XCI7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlLnN0YXJ0c1dpdGgoXCJtb3VzZVwiKSkge1xuICAgICAgZXZlbnQudHlwZSA9IGV2ZW50LnR5cGUucmVwbGFjZShcIm1vdXNlXCIsIFwicG9pbnRlclwiKTtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUuc3RhcnRzV2l0aChcInRvdWNoXCIpKSB7XG4gICAgICBldmVudC50eXBlID0gVE9VQ0hfVE9fUE9JTlRFUltldmVudC50eXBlXSB8fCBldmVudC50eXBlO1xuICAgIH1cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cbiAgLyoqXG4gICAqIFRyYW5zZmVycyBiYXNlICYgbW91c2UgZXZlbnQgZGF0YSBmcm9tIHRoZSBgbmF0aXZlRXZlbnRgIHRvIHRoZSBmZWRlcmF0ZWQgZXZlbnQuXG4gICAqIEBwYXJhbSBldmVudFxuICAgKiBAcGFyYW0gbmF0aXZlRXZlbnRcbiAgICovXG4gIF90cmFuc2Zlck1vdXNlRGF0YShldmVudCwgbmF0aXZlRXZlbnQpIHtcbiAgICBldmVudC5pc1RydXN0ZWQgPSBuYXRpdmVFdmVudC5pc1RydXN0ZWQ7XG4gICAgZXZlbnQuc3JjRWxlbWVudCA9IG5hdGl2ZUV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgZXZlbnQudGltZVN0YW1wID0gcGVyZm9ybWFuY2Uubm93KCk7XG4gICAgZXZlbnQudHlwZSA9IG5hdGl2ZUV2ZW50LnR5cGU7XG4gICAgZXZlbnQuYWx0S2V5ID0gbmF0aXZlRXZlbnQuYWx0S2V5O1xuICAgIGV2ZW50LmJ1dHRvbiA9IG5hdGl2ZUV2ZW50LmJ1dHRvbjtcbiAgICBldmVudC5idXR0b25zID0gbmF0aXZlRXZlbnQuYnV0dG9ucztcbiAgICBldmVudC5jbGllbnQueCA9IG5hdGl2ZUV2ZW50LmNsaWVudFg7XG4gICAgZXZlbnQuY2xpZW50LnkgPSBuYXRpdmVFdmVudC5jbGllbnRZO1xuICAgIGV2ZW50LmN0cmxLZXkgPSBuYXRpdmVFdmVudC5jdHJsS2V5O1xuICAgIGV2ZW50Lm1ldGFLZXkgPSBuYXRpdmVFdmVudC5tZXRhS2V5O1xuICAgIGV2ZW50Lm1vdmVtZW50LnggPSBuYXRpdmVFdmVudC5tb3ZlbWVudFg7XG4gICAgZXZlbnQubW92ZW1lbnQueSA9IG5hdGl2ZUV2ZW50Lm1vdmVtZW50WTtcbiAgICBldmVudC5wYWdlLnggPSBuYXRpdmVFdmVudC5wYWdlWDtcbiAgICBldmVudC5wYWdlLnkgPSBuYXRpdmVFdmVudC5wYWdlWTtcbiAgICBldmVudC5yZWxhdGVkVGFyZ2V0ID0gbnVsbDtcbiAgICBldmVudC5zaGlmdEtleSA9IG5hdGl2ZUV2ZW50LnNoaWZ0S2V5O1xuICB9XG59O1xuLyoqIEBpZ25vcmUgKi9cbl9FdmVudFN5c3RlbS5leHRlbnNpb24gPSB7XG4gIG5hbWU6IFwiZXZlbnRzXCIsXG4gIHR5cGU6IFtcbiAgICBFeHRlbnNpb25UeXBlLldlYkdMU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzU3lzdGVtLFxuICAgIEV4dGVuc2lvblR5cGUuV2ViR1BVU3lzdGVtXG4gIF0sXG4gIHByaW9yaXR5OiAtMVxufTtcbi8qKlxuICogVGhlIGV2ZW50IGZlYXR1cmVzIHRoYXQgYXJlIGVuYWJsZWQgYnkgdGhlIEV2ZW50U3lzdGVtXG4gKiBAc2luY2UgNy4yLjBcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgRXZlbnRTeXN0ZW0sIEV2ZW50U3lzdGVtRmVhdHVyZXMgfSBmcm9tICdwaXhpLmpzJztcbiAqIC8vIEFjY2VzcyB0aGUgZGVmYXVsdCBldmVudCBmZWF0dXJlc1xuICogRXZlbnRTeXN0ZW0uZGVmYXVsdEV2ZW50RmVhdHVyZXMgPSB7XG4gKiAgICAgLy8gRW5hYmxlIHBvaW50ZXIgbW92ZW1lbnQgZXZlbnRzXG4gKiAgICAgbW92ZTogdHJ1ZSxcbiAqICAgICAvLyBFbmFibGUgZ2xvYmFsIHBvaW50ZXIgbW92ZSBldmVudHNcbiAqICAgICBnbG9iYWxNb3ZlOiB0cnVlLFxuICogICAgIC8vIEVuYWJsZSBjbGljayBldmVudHNcbiAqICAgICBjbGljazogdHJ1ZSxcbiAqICAgICAvLyBFbmFibGUgd2hlZWwgZXZlbnRzXG4gKiAgICAgd2hlZWw6IHRydWUsXG4gKiB9O1xuICogYGBgXG4gKi9cbl9FdmVudFN5c3RlbS5kZWZhdWx0RXZlbnRGZWF0dXJlcyA9IHtcbiAgLyoqIEVuYWJsZXMgcG9pbnRlciBldmVudHMgYXNzb2NpYXRlZCB3aXRoIHBvaW50ZXIgbW92ZW1lbnQuICovXG4gIG1vdmU6IHRydWUsXG4gIC8qKiBFbmFibGVzIGdsb2JhbCBwb2ludGVyIG1vdmUgZXZlbnRzLiAqL1xuICBnbG9iYWxNb3ZlOiB0cnVlLFxuICAvKiogRW5hYmxlcyBwb2ludGVyIGV2ZW50cyBhc3NvY2lhdGVkIHdpdGggY2xpY2tpbmcuICovXG4gIGNsaWNrOiB0cnVlLFxuICAvKiogRW5hYmxlcyB3aGVlbCBldmVudHMuICovXG4gIHdoZWVsOiB0cnVlXG59O1xubGV0IEV2ZW50U3lzdGVtID0gX0V2ZW50U3lzdGVtO1xuXG5leHBvcnQgeyBFdmVudFN5c3RlbSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RXZlbnRTeXN0ZW0ubWpzLm1hcFxuIiwiaW1wb3J0IHsgRXZlbnRTeXN0ZW0gfSBmcm9tICcuL0V2ZW50U3lzdGVtLm1qcyc7XG5pbXBvcnQgeyBGZWRlcmF0ZWRFdmVudCB9IGZyb20gJy4vRmVkZXJhdGVkRXZlbnQubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBGZWRlcmF0ZWRDb250YWluZXIgPSB7XG4gIG9uY2xpY2s6IG51bGwsXG4gIG9ubW91c2Vkb3duOiBudWxsLFxuICBvbm1vdXNlZW50ZXI6IG51bGwsXG4gIG9ubW91c2VsZWF2ZTogbnVsbCxcbiAgb25tb3VzZW1vdmU6IG51bGwsXG4gIG9uZ2xvYmFsbW91c2Vtb3ZlOiBudWxsLFxuICBvbm1vdXNlb3V0OiBudWxsLFxuICBvbm1vdXNlb3ZlcjogbnVsbCxcbiAgb25tb3VzZXVwOiBudWxsLFxuICBvbm1vdXNldXBvdXRzaWRlOiBudWxsLFxuICBvbnBvaW50ZXJjYW5jZWw6IG51bGwsXG4gIG9ucG9pbnRlcmRvd246IG51bGwsXG4gIG9ucG9pbnRlcmVudGVyOiBudWxsLFxuICBvbnBvaW50ZXJsZWF2ZTogbnVsbCxcbiAgb25wb2ludGVybW92ZTogbnVsbCxcbiAgb25nbG9iYWxwb2ludGVybW92ZTogbnVsbCxcbiAgb25wb2ludGVyb3V0OiBudWxsLFxuICBvbnBvaW50ZXJvdmVyOiBudWxsLFxuICBvbnBvaW50ZXJ0YXA6IG51bGwsXG4gIG9ucG9pbnRlcnVwOiBudWxsLFxuICBvbnBvaW50ZXJ1cG91dHNpZGU6IG51bGwsXG4gIG9ucmlnaHRjbGljazogbnVsbCxcbiAgb25yaWdodGRvd246IG51bGwsXG4gIG9ucmlnaHR1cDogbnVsbCxcbiAgb25yaWdodHVwb3V0c2lkZTogbnVsbCxcbiAgb250YXA6IG51bGwsXG4gIG9udG91Y2hjYW5jZWw6IG51bGwsXG4gIG9udG91Y2hlbmQ6IG51bGwsXG4gIG9udG91Y2hlbmRvdXRzaWRlOiBudWxsLFxuICBvbnRvdWNobW92ZTogbnVsbCxcbiAgb25nbG9iYWx0b3VjaG1vdmU6IG51bGwsXG4gIG9udG91Y2hzdGFydDogbnVsbCxcbiAgb253aGVlbDogbnVsbCxcbiAgZ2V0IGludGVyYWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50TW9kZSA9PT0gXCJkeW5hbWljXCIgfHwgdGhpcy5ldmVudE1vZGUgPT09IFwic3RhdGljXCI7XG4gIH0sXG4gIHNldCBpbnRlcmFjdGl2ZSh2YWx1ZSkge1xuICAgIHRoaXMuZXZlbnRNb2RlID0gdmFsdWUgPyBcInN0YXRpY1wiIDogXCJwYXNzaXZlXCI7XG4gIH0sXG4gIF9pbnRlcm5hbEV2ZW50TW9kZTogdm9pZCAwLFxuICBnZXQgZXZlbnRNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbEV2ZW50TW9kZSA/PyBFdmVudFN5c3RlbS5kZWZhdWx0RXZlbnRNb2RlO1xuICB9LFxuICBzZXQgZXZlbnRNb2RlKHZhbHVlKSB7XG4gICAgdGhpcy5faW50ZXJuYWxFdmVudE1vZGUgPSB2YWx1ZTtcbiAgfSxcbiAgaXNJbnRlcmFjdGl2ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5ldmVudE1vZGUgPT09IFwic3RhdGljXCIgfHwgdGhpcy5ldmVudE1vZGUgPT09IFwiZHluYW1pY1wiO1xuICB9LFxuICBpbnRlcmFjdGl2ZUNoaWxkcmVuOiB0cnVlLFxuICBoaXRBcmVhOiBudWxsLFxuICBhZGRFdmVudExpc3RlbmVyKHR5cGUsIGxpc3RlbmVyLCBvcHRpb25zKSB7XG4gICAgY29uc3QgY2FwdHVyZSA9IHR5cGVvZiBvcHRpb25zID09PSBcImJvb2xlYW5cIiAmJiBvcHRpb25zIHx8IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiICYmIG9wdGlvbnMuY2FwdHVyZTtcbiAgICBjb25zdCBzaWduYWwgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMuc2lnbmFsIDogdm9pZCAwO1xuICAgIGNvbnN0IG9uY2UgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJvYmplY3RcIiA/IG9wdGlvbnMub25jZSA9PT0gdHJ1ZSA6IGZhbHNlO1xuICAgIGNvbnN0IGNvbnRleHQgPSB0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIiA/IHZvaWQgMCA6IGxpc3RlbmVyO1xuICAgIHR5cGUgPSBjYXB0dXJlID8gYCR7dHlwZX1jYXB0dXJlYCA6IHR5cGU7XG4gICAgY29uc3QgbGlzdGVuZXJGbiA9IHR5cGVvZiBsaXN0ZW5lciA9PT0gXCJmdW5jdGlvblwiID8gbGlzdGVuZXIgOiBsaXN0ZW5lci5oYW5kbGVFdmVudDtcbiAgICBjb25zdCBlbWl0dGVyID0gdGhpcztcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgZW1pdHRlci5vZmYodHlwZSwgbGlzdGVuZXJGbiwgY29udGV4dCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKG9uY2UpIHtcbiAgICAgIGVtaXR0ZXIub25jZSh0eXBlLCBsaXN0ZW5lckZuLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbih0eXBlLCBsaXN0ZW5lckZuLCBjb250ZXh0KTtcbiAgICB9XG4gIH0sXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbGlzdGVuZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBjYXB0dXJlID0gdHlwZW9mIG9wdGlvbnMgPT09IFwiYm9vbGVhblwiICYmIG9wdGlvbnMgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwib2JqZWN0XCIgJiYgb3B0aW9ucy5jYXB0dXJlO1xuICAgIGNvbnN0IGNvbnRleHQgPSB0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIiA/IHZvaWQgMCA6IGxpc3RlbmVyO1xuICAgIHR5cGUgPSBjYXB0dXJlID8gYCR7dHlwZX1jYXB0dXJlYCA6IHR5cGU7XG4gICAgbGlzdGVuZXIgPSB0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIiA/IGxpc3RlbmVyIDogbGlzdGVuZXIuaGFuZGxlRXZlbnQ7XG4gICAgdGhpcy5vZmYodHlwZSwgbGlzdGVuZXIsIGNvbnRleHQpO1xuICB9LFxuICBkaXNwYXRjaEV2ZW50KGUpIHtcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgRmVkZXJhdGVkRXZlbnQpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250YWluZXIgY2Fubm90IHByb3BhZ2F0ZSBldmVudHMgb3V0c2lkZSBvZiB0aGUgRmVkZXJhdGVkIEV2ZW50cyBBUElcIik7XG4gICAgfVxuICAgIGUuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuICAgIGUucGF0aCA9IG51bGw7XG4gICAgZS50YXJnZXQgPSB0aGlzO1xuICAgIGUubWFuYWdlci5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIHJldHVybiAhZS5kZWZhdWx0UHJldmVudGVkO1xuICB9XG59O1xuXG5leHBvcnQgeyBGZWRlcmF0ZWRDb250YWluZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUZlZGVyYXRlZEV2ZW50VGFyZ2V0Lm1qcy5tYXBcbiIsImltcG9ydCB7IGV4dGVuc2lvbnMgfSBmcm9tICcuLi9leHRlbnNpb25zL0V4dGVuc2lvbnMubWpzJztcbmltcG9ydCB7IENvbnRhaW5lciB9IGZyb20gJy4uL3NjZW5lL2NvbnRhaW5lci9Db250YWluZXIubWpzJztcbmltcG9ydCB7IEV2ZW50U3lzdGVtIH0gZnJvbSAnLi9FdmVudFN5c3RlbS5tanMnO1xuaW1wb3J0IHsgRmVkZXJhdGVkQ29udGFpbmVyIH0gZnJvbSAnLi9GZWRlcmF0ZWRFdmVudFRhcmdldC5tanMnO1xuXG5cInVzZSBzdHJpY3RcIjtcbmV4dGVuc2lvbnMuYWRkKEV2ZW50U3lzdGVtKTtcbmV4dGVuc2lvbnMubWl4aW4oQ29udGFpbmVyLCBGZWRlcmF0ZWRDb250YWluZXIpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5pdC5tanMubWFwXG4iLCJpbXBvcnQgeyBFeHRlbnNpb25UeXBlIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBDYW52YXNPYnNlcnZlciB9IGZyb20gJy4vQ2FudmFzT2JzZXJ2ZXIubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5jbGFzcyBET01QaXBlIHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdG9yIGZvciB0aGUgRE9NUGlwZSBjbGFzcy5cbiAgICogQHBhcmFtIHJlbmRlcmVyIC0gVGhlIHJlbmRlcmVyIGluc3RhbmNlIHRoYXQgdGhpcyBET01QaXBlIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoLlxuICAgKi9cbiAgY29uc3RydWN0b3IocmVuZGVyZXIpIHtcbiAgICAvKiogQXJyYXkgdG8ga2VlcCB0cmFjayBvZiBhdHRhY2hlZCBET00gZWxlbWVudHMgKi9cbiAgICB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzID0gW107XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9yZW5kZXJlci5ydW5uZXJzLnBvc3RyZW5kZXIuYWRkKHRoaXMpO1xuICAgIHRoaXMuX3JlbmRlcmVyLnJ1bm5lcnMuaW5pdC5hZGQodGhpcyk7XG4gICAgdGhpcy5fZG9tRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgdGhpcy5fZG9tRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcbiAgICB0aGlzLl9kb21FbGVtZW50LnN0eWxlLnRvcCA9IFwiMFwiO1xuICAgIHRoaXMuX2RvbUVsZW1lbnQuc3R5bGUubGVmdCA9IFwiMFwiO1xuICAgIHRoaXMuX2RvbUVsZW1lbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9IFwibm9uZVwiO1xuICAgIHRoaXMuX2RvbUVsZW1lbnQuc3R5bGUuekluZGV4ID0gXCIxMDAwXCI7XG4gIH1cbiAgLyoqIEluaXRpYWxpemVzIHRoZSBET01QaXBlLCBzZXR0aW5nIHVwIHRoZSBtYWluIERPTSBlbGVtZW50IGFuZCBhZGRpbmcgaXQgdG8gdGhlIGRvY3VtZW50IGJvZHkuICovXG4gIGluaXQoKSB7XG4gICAgdGhpcy5fY2FudmFzT2JzZXJ2ZXIgPSBuZXcgQ2FudmFzT2JzZXJ2ZXIoe1xuICAgICAgZG9tRWxlbWVudDogdGhpcy5fZG9tRWxlbWVudCxcbiAgICAgIHJlbmRlcmVyOiB0aGlzLl9yZW5kZXJlclxuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBBZGRzIGEgcmVuZGVyYWJsZSBET00gY29udGFpbmVyIHRvIHRoZSBsaXN0IG9mIGF0dGFjaGVkIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0gZG9tQ29udGFpbmVyIC0gVGhlIERPTSBjb250YWluZXIgdG8gYmUgYWRkZWQuXG4gICAqIEBwYXJhbSBfaW5zdHJ1Y3Rpb25TZXQgLSBUaGUgaW5zdHJ1Y3Rpb24gc2V0ICh1bnVzZWQpLlxuICAgKi9cbiAgYWRkUmVuZGVyYWJsZShkb21Db250YWluZXIsIF9pbnN0cnVjdGlvblNldCkge1xuICAgIGlmICghdGhpcy5fYXR0YWNoZWREb21FbGVtZW50cy5pbmNsdWRlcyhkb21Db250YWluZXIpKSB7XG4gICAgICB0aGlzLl9hdHRhY2hlZERvbUVsZW1lbnRzLnB1c2goZG9tQ29udGFpbmVyKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFVwZGF0ZXMgYSByZW5kZXJhYmxlIERPTSBjb250YWluZXIuXG4gICAqIEBwYXJhbSBfZG9tQ29udGFpbmVyIC0gVGhlIERPTSBjb250YWluZXIgdG8gYmUgdXBkYXRlZCAodW51c2VkKS5cbiAgICovXG4gIHVwZGF0ZVJlbmRlcmFibGUoX2RvbUNvbnRhaW5lcikge1xuICB9XG4gIC8qKlxuICAgKiBWYWxpZGF0ZXMgYSByZW5kZXJhYmxlIERPTSBjb250YWluZXIuXG4gICAqIEBwYXJhbSBfZG9tQ29udGFpbmVyIC0gVGhlIERPTSBjb250YWluZXIgdG8gYmUgdmFsaWRhdGVkICh1bnVzZWQpLlxuICAgKiBAcmV0dXJucyBBbHdheXMgcmV0dXJucyB0cnVlIGFzIHZhbGlkYXRpb24gaXMgbm90IHJlcXVpcmVkLlxuICAgKi9cbiAgdmFsaWRhdGVSZW5kZXJhYmxlKF9kb21Db250YWluZXIpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICAvKiogSGFuZGxlcyB0aGUgcG9zdC1yZW5kZXJpbmcgcHJvY2VzcywgZW5zdXJpbmcgRE9NIGVsZW1lbnRzIGFyZSBjb3JyZWN0bHkgcG9zaXRpb25lZCBhbmQgdmlzaWJsZS4gKi9cbiAgcG9zdHJlbmRlcigpIHtcbiAgICBjb25zdCBhdHRhY2hlZERvbUVsZW1lbnRzID0gdGhpcy5fYXR0YWNoZWREb21FbGVtZW50cztcbiAgICBpZiAoYXR0YWNoZWREb21FbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuX2RvbUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NhbnZhc09ic2VydmVyLmVuc3VyZUF0dGFjaGVkKCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRhY2hlZERvbUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBkb21Db250YWluZXIgPSBhdHRhY2hlZERvbUVsZW1lbnRzW2ldO1xuICAgICAgY29uc3QgZWxlbWVudCA9IGRvbUNvbnRhaW5lci5lbGVtZW50O1xuICAgICAgaWYgKCFkb21Db250YWluZXIucGFyZW50IHx8IGRvbUNvbnRhaW5lci5nbG9iYWxEaXNwbGF5U3RhdHVzIDwgNykge1xuICAgICAgICBlbGVtZW50Py5yZW1vdmUoKTtcbiAgICAgICAgYXR0YWNoZWREb21FbGVtZW50cy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGktLTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghdGhpcy5fZG9tRWxlbWVudC5jb250YWlucyhlbGVtZW50KSkge1xuICAgICAgICAgIGVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSBcImFic29sdXRlXCI7XG4gICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhdXRvXCI7XG4gICAgICAgICAgdGhpcy5fZG9tRWxlbWVudC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3dCA9IGRvbUNvbnRhaW5lci53b3JsZFRyYW5zZm9ybTtcbiAgICAgICAgY29uc3QgYW5jaG9yID0gZG9tQ29udGFpbmVyLl9hbmNob3I7XG4gICAgICAgIGNvbnN0IGF4ID0gZG9tQ29udGFpbmVyLndpZHRoICogYW5jaG9yLng7XG4gICAgICAgIGNvbnN0IGF5ID0gZG9tQ29udGFpbmVyLmhlaWdodCAqIGFuY2hvci55O1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGAke2F4fXB4ICR7YXl9cHhgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9IGBtYXRyaXgoJHt3dC5hfSwgJHt3dC5ifSwgJHt3dC5jfSwgJHt3dC5kfSwgJHt3dC50eCAtIGF4fSwgJHt3dC50eSAtIGF5fSlgO1xuICAgICAgICBlbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBkb21Db250YWluZXIuZ3JvdXBBbHBoYS50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiogRGVzdHJveXMgdGhlIERPTVBpcGUsIHJlbW92aW5nIGFsbCBhdHRhY2hlZCBET00gZWxlbWVudHMgYW5kIGNsZWFuaW5nIHVwIHJlc291cmNlcy4gKi9cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLl9yZW5kZXJlci5ydW5uZXJzLnBvc3RyZW5kZXIucmVtb3ZlKHRoaXMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5fYXR0YWNoZWREb21FbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZG9tQ29udGFpbmVyID0gdGhpcy5fYXR0YWNoZWREb21FbGVtZW50c1tpXTtcbiAgICAgIGRvbUNvbnRhaW5lci5lbGVtZW50Py5yZW1vdmUoKTtcbiAgICB9XG4gICAgdGhpcy5fYXR0YWNoZWREb21FbGVtZW50cy5sZW5ndGggPSAwO1xuICAgIHRoaXMuX2RvbUVsZW1lbnQucmVtb3ZlKCk7XG4gICAgdGhpcy5fY2FudmFzT2JzZXJ2ZXIuZGVzdHJveSgpO1xuICAgIHRoaXMuX3JlbmRlcmVyID0gbnVsbDtcbiAgfVxufVxuLyoqXG4gKiBTdGF0aWMgcHJvcGVydHkgZGVmaW5pbmcgdGhlIGV4dGVuc2lvbiB0eXBlIGFuZCBuYW1lIGZvciB0aGUgRE9NUGlwZS5cbiAqIFRoaXMgaXMgdXNlZCB0byByZWdpc3RlciB0aGUgRE9NUGlwZSB3aXRoIGRpZmZlcmVudCByZW5kZXJpbmcgcGlwZWxpbmVzLlxuICovXG5ET01QaXBlLmV4dGVuc2lvbiA9IHtcbiAgdHlwZTogW1xuICAgIEV4dGVuc2lvblR5cGUuV2ViR0xQaXBlcyxcbiAgICBFeHRlbnNpb25UeXBlLldlYkdQVVBpcGVzLFxuICAgIEV4dGVuc2lvblR5cGUuQ2FudmFzUGlwZXNcbiAgXSxcbiAgbmFtZTogXCJkb21cIlxufTtcblxuZXhwb3J0IHsgRE9NUGlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9RE9NUGlwZS5tanMubWFwXG4iLCJpbXBvcnQgeyBleHRlbnNpb25zIH0gZnJvbSAnLi4vZXh0ZW5zaW9ucy9FeHRlbnNpb25zLm1qcyc7XG5pbXBvcnQgeyBET01QaXBlIH0gZnJvbSAnLi9ET01QaXBlLm1qcyc7XG5pbXBvcnQgJy4vaW5kZXgubWpzJztcbmV4cG9ydCB7IENhbnZhc09ic2VydmVyIH0gZnJvbSAnLi9DYW52YXNPYnNlcnZlci5tanMnO1xuZXhwb3J0IHsgRE9NQ29udGFpbmVyIH0gZnJvbSAnLi9ET01Db250YWluZXIubWpzJztcblxuXCJ1c2Ugc3RyaWN0XCI7XG5leHRlbnNpb25zLmFkZChET01QaXBlKTtcblxuZXhwb3J0IHsgRE9NUGlwZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5pdC5tanMubWFwXG4iXSwibmFtZXMiOlsiQ2FudmFzT2JzZXJ2ZXIiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJ0aGlzIiwiX2xhc3RUcmFuc2Zvcm0iLCJfb2JzZXJ2ZXIiLCJfdGlja2VyQXR0YWNoZWQiLCJ1cGRhdGVUcmFuc2xhdGlvbiIsIl9jYW52YXMiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY29udGVudFdpZHRoIiwid2lkdGgiLCJjb250ZW50SGVpZ2h0IiwiaGVpZ2h0Iiwic3giLCJfcmVuZGVyZXIiLCJyZXNvbHV0aW9uIiwic3kiLCJuZXdUcmFuc2Zvcm0iLCJsZWZ0IiwidG9wIiwiX2RvbUVsZW1lbnQiLCJzdHlsZSIsInRyYW5zZm9ybSIsImRvbUVsZW1lbnQiLCJyZW5kZXJlciIsImdsb2JhbFRoaXMiLCJPZmZzY3JlZW5DYW52YXMiLCJjYW52YXMiLCJfYXR0YWNoT2JzZXJ2ZXIiLCJlbnN1cmVBdHRhY2hlZCIsInBhcmVudE5vZGUiLCJhcHBlbmRDaGlsZCIsImRpc2Nvbm5lY3QiLCJSZXNpemVPYnNlcnZlciIsImVudHJpZXMiLCJlbnRyeSIsInRhcmdldCIsImNvbnRlbnRSZWN0IiwiX2xhc3RTY2FsZVgiLCJfbGFzdFNjYWxlWSIsIm9ic2VydmUiLCJUaWNrZXIiLCJzaGFyZWQiLCJhZGQiLCJISUdIIiwiZGVzdHJveSIsInJlbW92ZSIsIkZlZGVyYXRlZEV2ZW50IiwibWFuYWdlciIsImJ1YmJsZXMiLCJjYW5jZWxCdWJibGUiLCJjYW5jZWxhYmxlIiwiY29tcG9zZWQiLCJkZWZhdWx0UHJldmVudGVkIiwiZXZlbnRQaGFzZSIsInByb3RvdHlwZSIsIk5PTkUiLCJwcm9wYWdhdGlvblN0b3BwZWQiLCJwcm9wYWdhdGlvbkltbWVkaWF0ZWx5U3RvcHBlZCIsImxheWVyIiwiUG9pbnQiLCJwYWdlIiwiQ0FQVFVSSU5HX1BIQVNFIiwiQVRfVEFSR0VUIiwiQlVCQkxJTkdfUEhBU0UiLCJsYXllclgiLCJ4IiwibGF5ZXJZIiwieSIsInBhZ2VYIiwicGFnZVkiLCJkYXRhIiwiY29tcG9zZWRQYXRoIiwicGF0aCIsImxlbmd0aCIsInByb3BhZ2F0aW9uUGF0aCIsImluaXRFdmVudCIsIl90eXBlIiwiX2J1YmJsZXMiLCJfY2FuY2VsYWJsZSIsIkVycm9yIiwiaW5pdFVJRXZlbnQiLCJfdHlwZUFyZyIsIl9idWJibGVzQXJnIiwiX2NhbmNlbGFibGVBcmciLCJfdmlld0FyZyIsIl9kZXRhaWxBcmciLCJwcmV2ZW50RGVmYXVsdCIsIm5hdGl2ZUV2ZW50IiwiRXZlbnQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJzdG9wUHJvcGFnYXRpb24iLCJhcHBsZUlwaG9uZSIsImFwcGxlSXBvZCIsImFwcGxlVGFibGV0IiwiYXBwbGVVbml2ZXJzYWwiLCJhbmRyb2lkUGhvbmUiLCJhbmRyb2lkVGFibGV0IiwiYW1hem9uUGhvbmUiLCJhbWF6b25UYWJsZXQiLCJ3aW5kb3dzUGhvbmUiLCJ3aW5kb3dzVGFibGV0Iiwib3RoZXJCbGFja0JlcnJ5Iiwib3RoZXJCbGFja0JlcnJ5MTAiLCJvdGhlck9wZXJhIiwib3RoZXJDaHJvbWUiLCJvdGhlckZpcmVmb3giLCJpc0FwcGxlVGFibGV0T25Jb3MxMyIsIm5hdmlnYXRvciIsInBsYXRmb3JtIiwibWF4VG91Y2hQb2ludHMiLCJNU1N0cmVhbSIsImlzTW9iaWxlIiwicGFyYW0iLCJuYXYiLCJ1c2VyQWdlbnQiLCJ0bXAiLCJzcGxpdCIsIm1hdGNoIiwicmVnZXgiLCJ0ZXN0IiwiY3JlYXRlTWF0Y2giLCJyZXN1bHQiLCJhcHBsZSIsInBob25lIiwiaXBvZCIsInRhYmxldCIsInVuaXZlcnNhbCIsImRldmljZSIsImFtYXpvbiIsImFuZHJvaWQiLCJ3aW5kb3dzIiwib3RoZXIiLCJibGFja2JlcnJ5IiwiYmxhY2tiZXJyeTEwIiwib3BlcmEiLCJmaXJlZm94IiwiY2hyb21lIiwiYW55IiwiX0FjY2Vzc2liaWxpdHlTeXN0ZW0iLCJfbW9iaWxlSW5mbyIsImRlYnVnIiwiX2FjdGl2YXRlT25UYWIiLCJfZGVhY3RpdmF0ZU9uTW91c2VNb3ZlIiwiX2lzQWN0aXZlIiwiX2lzTW9iaWxlQWNjZXNzaWJpbGl0eSIsIl9kaXYiLCJfcG9vbHMiLCJfcmVuZGVySWQiLCJfY2hpbGRyZW4iLCJfYW5kcm9pZFVwZGF0ZUNvdW50IiwiX2FuZHJvaWRVcGRhdGVGcmVxdWVuY3kiLCJfaXNSdW5uaW5nVGVzdHMiLCJfYm91bmRPbktleURvd24iLCJfb25LZXlEb3duIiwiYmluZCIsIl9ib3VuZE9uTW91c2VNb3ZlIiwiX29uTW91c2VNb3ZlIiwiX2hvb2tEaXYiLCJfY3JlYXRlVG91Y2hIb29rIiwiaXNBY3RpdmUiLCJpc01vYmlsZUFjY2Vzc2liaWxpdHkiLCJob29rRGl2IiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwicG9zaXRpb24iLCJ6SW5kZXgiLCJ0b1N0cmluZyIsImJhY2tncm91bmRDb2xvciIsInRpdGxlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9hY3RpdmF0ZSIsIl9kZXN0cm95VG91Y2hIb29rIiwiYm9keSIsInJlbW92ZUNoaWxkIiwicG9pbnRlckV2ZW50cyIsIl9jYW52YXNPYnNlcnZlciIsInZpZXciLCJfaW5pdEFjY2Vzc2liaWxpdHlTZXR1cCIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJydW5uZXJzIiwicG9zdHJlbmRlciIsImxhc3RPYmplY3RSZW5kZXJlZCIsIl91cGRhdGVBY2Nlc3NpYmxlT2JqZWN0cyIsIl9kZWFjdGl2YXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNoaWxkIiwiX2FjY2Vzc2libGVEaXYiLCJfYWNjZXNzaWJsZUFjdGl2ZSIsImFjY2Vzc2libGVUeXBlIiwiZm9yRWFjaCIsImNvbnRhaW5lciIsInZpc2libGUiLCJhY2Nlc3NpYmxlQ2hpbGRyZW4iLCJhY2Nlc3NpYmxlIiwiX2FkZENoaWxkIiwiY2hpbGRyZW4iLCJpIiwiaW5pdCIsIm1lcmdlZE9wdGlvbnMiLCJhY2Nlc3NpYmlsaXR5T3B0aW9ucyIsImRlZmF1bHRPcHRpb25zIiwiYWN0aXZhdGVPblRhYiIsImRlYWN0aXZhdGVPbk1vdXNlTW92ZSIsImVuYWJsZWRCeURlZmF1bHQiLCJub3ciLCJwZXJmb3JtYW5jZSIsInJlbmRlcmluZ1RvU2NyZWVuIiwiYWN0aXZlSWRzIiwiU2V0IiwiaW5kZXhPZiIsImhhcyIsIl9nZXRQb29sIiwicHVzaCIsInJlbW92ZUl0ZW1zIiwiaGl0QXJlYSIsImdldEJvdW5kcyIsInJlY3RhbmdsZSIsInd0Iiwid29ybGRUcmFuc2Zvcm0iLCJ0eCIsImEiLCJ0eSIsImQiLCJfY2FwSGl0QXJlYSIsIl91cGRhdGVEZWJ1Z0hUTUwiLCJpbm5lckhUTUwiLCJ0eXBlIiwidGFiSW5kZXgiLCJ2aWV3V2lkdGgiLCJ2aWV3SGVpZ2h0IiwicG9wIiwicmVtb3ZlQXR0cmlidXRlIiwiY3NzVGV4dCIsImFjY2Vzc2libGVUZXh0IiwiaW5uZXJUZXh0IiwiYm9yZGVyU3R5bGUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwic2V0QXR0cmlidXRlIiwiX29uQ2xpY2siLCJfb25Gb2N1cyIsIl9vbkZvY3VzT3V0IiwiYWNjZXNzaWJsZVBvaW50ZXJFdmVudHMiLCJhY2Nlc3NpYmxlVGl0bGUiLCJhY2Nlc3NpYmxlSGludCIsImludGVyYWN0aXZlIiwiX2Rpc3BhdGNoRXZlbnQiLCJlIiwiYm91bmRhcnkiLCJldmVudHMiLCJyb290Qm91bmRhcnkiLCJldmVudCIsIk9iamVjdCIsImFzc2lnbiIsInJvb3RUYXJnZXQiLCJ0eXBlMiIsImRpc3BhdGNoRXZlbnQiLCJnZXRBdHRyaWJ1dGUiLCJrZXlDb2RlIiwibW92ZW1lbnRYIiwibW92ZW1lbnRZIiwic2V0QWNjZXNzaWJpbGl0eUVuYWJsZWQiLCJlbmFibGVkIiwiZXh0ZW5zaW9uIiwiV2ViR0xTeXN0ZW0iLCJXZWJHUFVTeXN0ZW0iLCJuYW1lIiwiQWNjZXNzaWJpbGl0eVN5c3RlbSIsIm1peGluIiwiQ29udGFpbmVyIiwiRXZlbnRzVGlja2VyIiwiaW50ZXJhY3Rpb25GcmVxdWVuY3kiLCJfZGVsdGFUaW1lIiwiX2RpZE1vdmUiLCJfdGlja2VyQWRkZWQiLCJfcGF1c2VVcGRhdGUiLCJyZW1vdmVUaWNrZXJMaXN0ZW5lciIsInBhdXNlVXBkYXRlIiwicGF1c2VkIiwiYWRkVGlja2VyTGlzdGVuZXIiLCJzeXN0ZW0iLCJfdGlja2VyVXBkYXRlIiwiSU5URVJBQ1RJT04iLCJwb2ludGVyTW92ZWQiLCJfdXBkYXRlIiwicm9vdFBvaW50ZXJFdmVudCIsInN1cHBvcnRzVG91Y2hFdmVudHMiLCJwb2ludGVyVHlwZSIsInN1cHBvcnRzUG9pbnRlckV2ZW50cyIsIlBvaW50ZXJFdmVudCIsImNsaWVudFgiLCJjbGllbnRZIiwicG9pbnRlcklkIiwiTW91c2VFdmVudCIsInRpY2tlciIsImRlbHRhVGltZSIsIkZlZGVyYXRlZE1vdXNlRXZlbnQiLCJzdXBlciIsImFyZ3VtZW50cyIsImNsaWVudCIsIm1vdmVtZW50Iiwib2Zmc2V0IiwiZ2xvYmFsIiwic2NyZWVuIiwib2Zmc2V0WCIsIm9mZnNldFkiLCJnbG9iYWxYIiwiZ2xvYmFsWSIsInNjcmVlblgiLCJzY3JlZW5ZIiwiZ2V0TG9jYWxQb3NpdGlvbiIsInBvaW50IiwiZ2xvYmFsUG9zIiwiYXBwbHlJbnZlcnNlIiwiZ2V0TW9kaWZpZXJTdGF0ZSIsImtleSIsImluaXRNb3VzZUV2ZW50IiwiX2NhbkJ1YmJsZUFyZyIsIl9zY3JlZW5YQXJnIiwiX3NjcmVlbllBcmciLCJfY2xpZW50WEFyZyIsIl9jbGllbnRZQXJnIiwiX2N0cmxLZXlBcmciLCJfYWx0S2V5QXJnIiwiX3NoaWZ0S2V5QXJnIiwiX21ldGFLZXlBcmciLCJfYnV0dG9uQXJnIiwiX3JlbGF0ZWRUYXJnZXRBcmciLCJGZWRlcmF0ZWRQb2ludGVyRXZlbnQiLCJpc1ByaW1hcnkiLCJnZXRDb2FsZXNjZWRFdmVudHMiLCJnZXRQcmVkaWN0ZWRFdmVudHMiLCJGZWRlcmF0ZWRXaGVlbEV2ZW50IiwiRE9NX0RFTFRBX1BJWEVMIiwiRE9NX0RFTFRBX0xJTkUiLCJET01fREVMVEFfUEFHRSIsInRlbXBIaXRMb2NhdGlvbiIsInRlbXBMb2NhbE1hcHBpbmciLCJFdmVudEJvdW5kYXJ5IiwiZGlzcGF0Y2giLCJtb3ZlT25BbGwiLCJlbmFibGVHbG9iYWxNb3ZlRXZlbnRzIiwibWFwcGluZ1N0YXRlIiwidHJhY2tpbmdEYXRhIiwiZXZlbnRQb29sIiwiTWFwIiwiX2FsbEludGVyYWN0aXZlRWxlbWVudHMiLCJfaGl0RWxlbWVudHMiLCJfaXNQb2ludGVyTW92ZUV2ZW50IiwiaGl0UHJ1bmVGbiIsImhpdFRlc3RGbiIsIm1hcFBvaW50ZXJEb3duIiwibWFwUG9pbnRlck1vdmUiLCJtYXBQb2ludGVyT3V0IiwibWFwUG9pbnRlck92ZXIiLCJtYXBQb2ludGVyVXAiLCJtYXBQb2ludGVyVXBPdXRzaWRlIiwibWFwV2hlZWwiLCJtYXBwaW5nVGFibGUiLCJhZGRFdmVudE1hcHBpbmciLCJmbiIsInByaW9yaXR5Iiwic29ydCIsImIiLCJwcm9wYWdhdGUiLCJlbWl0IiwibWFwRXZlbnQiLCJtYXBwZXJzIiwiaiIsIndhcm4iLCJoaXRUZXN0IiwiaW52ZXJ0ZWRQYXRoIiwiZXZlbnRNb2RlIiwic2V0IiwiY3VycmVudFRhcmdldCIsIm5vdGlmeVRhcmdldCIsImFsbCIsInRhcmdldHMiLCJBcnJheSIsImlzQXJyYXkiLCJwYXJlbnQiLCJyZXZlcnNlIiwiaGl0VGVzdE1vdmVSZWN1cnNpdmUiLCJsb2NhdGlvbiIsInRlc3RGbiIsInBydW5lRm4iLCJpZ25vcmUiLCJzaG91bGRSZXR1cm4iLCJfaW50ZXJhY3RpdmVQcnVuZSIsImludGVyYWN0aXZlQ2hpbGRyZW4iLCJuZXN0ZWRIaXQiLCJfaXNJbnRlcmFjdGl2ZSIsImlzSW50ZXJhY3RpdmUiLCJpc0ludGVyYWN0aXZlTW9kZSIsImlzSW50ZXJhY3RpdmVUYXJnZXQiLCJoaXRUZXN0UmVjdXJzaXZlIiwicmVsYXRpdmVMb2NhdGlvbiIsImludCIsInJlbmRlcmFibGUiLCJtZWFzdXJhYmxlIiwiY29udGFpbnMiLCJlZmZlY3RzIiwiZWZmZWN0IiwiY29udGFpbnNQb2ludCIsImhhbmRsZXJLZXkiLCJfbm90aWZ5TGlzdGVuZXJzIiwiZnJvbSIsImNyZWF0ZVBvaW50ZXJFdmVudCIsImlzUmlnaHRCdXR0b24iLCJidXR0b24iLCJwcmVzc1RhcmdldHNCeUJ1dHRvbiIsImZyZWVFdmVudCIsImlzTW91c2UiLCJvdXRUYXJnZXQiLCJmaW5kTW91bnRlZFRhcmdldCIsIm92ZXJUYXJnZXRzIiwib3V0VHlwZSIsIm91dEV2ZW50IiwibGVhdmVFdmVudCIsIm92ZXJUeXBlIiwib3ZlckV2ZW50IiwiY2xvbmVQb2ludGVyRXZlbnQiLCJvdmVyVGFyZ2V0QW5jZXN0b3IiLCJlbnRlckV2ZW50IiwiYWxsTWV0aG9kcyIsImFsbG93R2xvYmFsUG9pbnRlckV2ZW50cyIsInNwbGljZSIsImN1cnNvciIsInByZXNzVGFyZ2V0IiwiY2xpY2tUYXJnZXQiLCJjbGlja0V2ZW50IiwiY2xpY2tzQnlCdXR0b24iLCJjbGlja0NvdW50IiwidGltZVN0YW1wIiwiY2xpY2tIaXN0b3J5IiwiZGV0YWlsIiwid2hlZWxFdmVudCIsImNyZWF0ZVdoZWVsRXZlbnQiLCJhbGxvY2F0ZUV2ZW50IiwiY29weVBvaW50ZXJEYXRhIiwiY29weU1vdXNlRGF0YSIsImNvcHlEYXRhIiwib3JpZ2luYWxFdmVudCIsImNvcHlXaGVlbERhdGEiLCJzbGljZSIsInRvIiwiZGVsdGFNb2RlIiwiZGVsdGFYIiwiZGVsdGFZIiwiZGVsdGFaIiwicHJlc3N1cmUiLCJ0YW5nZW50aWFsUHJlc3N1cmUiLCJ0aWx0WCIsInRpbHRZIiwidHdpc3QiLCJhbHRLZXkiLCJidXR0b25zIiwiY29weUZyb20iLCJjdHJsS2V5IiwibWV0YUtleSIsInNoaWZ0S2V5IiwiaXNUcnVzdGVkIiwic3JjRWxlbWVudCIsIndoaWNoIiwiaWQiLCJvdmVyVGFyZ2V0IiwiZ2V0IiwibGlzdGVuZXJzIiwiX2V2ZW50cyIsIm9uY2UiLCJyZW1vdmVMaXN0ZW5lciIsImNhbGwiLCJjb250ZXh0IiwiVE9VQ0hfVE9fUE9JTlRFUiIsInRvdWNoc3RhcnQiLCJ0b3VjaGVuZCIsInRvdWNoZW5kb3V0c2lkZSIsInRvdWNobW92ZSIsInRvdWNoY2FuY2VsIiwiX0V2ZW50U3lzdGVtIiwiYXV0b1ByZXZlbnREZWZhdWx0IiwiX2V2ZW50c0FkZGVkIiwiX3Jvb3RQb2ludGVyRXZlbnQiLCJfcm9vdFdoZWVsRXZlbnQiLCJjdXJzb3JTdHlsZXMiLCJkZWZhdWx0IiwicG9pbnRlciIsImZlYXR1cmVzIiwiUHJveHkiLCJkZWZhdWx0RXZlbnRGZWF0dXJlcyIsInZhbHVlIiwiX29uUG9pbnRlckRvd24iLCJfb25Qb2ludGVyTW92ZSIsIl9vblBvaW50ZXJVcCIsIl9vblBvaW50ZXJPdmVyT3V0Iiwib25XaGVlbCIsImRlZmF1bHRFdmVudE1vZGUiLCJfZGVmYXVsdEV2ZW50TW9kZSIsInNldFRhcmdldEVsZW1lbnQiLCJldmVudEZlYXR1cmVzIiwiZ2xvYmFsTW92ZSIsInJlc29sdXRpb25DaGFuZ2UiLCJfY3VycmVudEN1cnNvciIsInNldEN1cnNvciIsIm1vZGUiLCJhcHBseVN0eWxlcyIsImhhc093blByb3BlcnR5IiwiY2xpY2siLCJfbm9ybWFsaXplVG9Qb2ludGVyRGF0YSIsImlzTm9ybWFsaXplZCIsIm5hdGl2ZUV2ZW50MiIsImZlZGVyYXRlZEV2ZW50IiwiX2Jvb3RzdHJhcEV2ZW50IiwibW92ZSIsIm5vcm1hbGl6ZWRFdmVudHMiLCJvdXRzaWRlIiwid2hlZWwiLCJub3JtYWxpemVXaGVlbEV2ZW50IiwiZWxlbWVudCIsIl9yZW1vdmVFdmVudHMiLCJfYWRkRXZlbnRzIiwibXNQb2ludGVyRW5hYmxlZCIsIm1zQ29udGVudFpvb21pbmciLCJtc1RvdWNoQWN0aW9uIiwidG91Y2hBY3Rpb24iLCJwYXNzaXZlIiwiY2FwdHVyZSIsIm1hcFBvc2l0aW9uVG9Qb2ludCIsImlzQ29ubmVjdGVkIiwicmVzb2x1dGlvbk11bHRpcGxpZXIiLCJUb3VjaEV2ZW50IiwibGkiLCJjaGFuZ2VkVG91Y2hlcyIsInRvdWNoIiwidG91Y2hlcyIsInJhZGl1c1giLCJyYWRpdXNZIiwiaWRlbnRpZmllciIsImZvcmNlIiwidGVtcEV2ZW50IiwiX3RyYW5zZmVyTW91c2VEYXRhIiwic3RhcnRzV2l0aCIsInJlcGxhY2UiLCJyZWxhdGVkVGFyZ2V0IiwiQ2FudmFzU3lzdGVtIiwiRXZlbnRTeXN0ZW0iLCJGZWRlcmF0ZWRDb250YWluZXIiLCJvbmNsaWNrIiwib25tb3VzZWRvd24iLCJvbm1vdXNlZW50ZXIiLCJvbm1vdXNlbGVhdmUiLCJvbm1vdXNlbW92ZSIsIm9uZ2xvYmFsbW91c2Vtb3ZlIiwib25tb3VzZW91dCIsIm9ubW91c2VvdmVyIiwib25tb3VzZXVwIiwib25tb3VzZXVwb3V0c2lkZSIsIm9ucG9pbnRlcmNhbmNlbCIsIm9ucG9pbnRlcmRvd24iLCJvbnBvaW50ZXJlbnRlciIsIm9ucG9pbnRlcmxlYXZlIiwib25wb2ludGVybW92ZSIsIm9uZ2xvYmFscG9pbnRlcm1vdmUiLCJvbnBvaW50ZXJvdXQiLCJvbnBvaW50ZXJvdmVyIiwib25wb2ludGVydGFwIiwib25wb2ludGVydXAiLCJvbnBvaW50ZXJ1cG91dHNpZGUiLCJvbnJpZ2h0Y2xpY2siLCJvbnJpZ2h0ZG93biIsIm9ucmlnaHR1cCIsIm9ucmlnaHR1cG91dHNpZGUiLCJvbnRhcCIsIm9udG91Y2hjYW5jZWwiLCJvbnRvdWNoZW5kIiwib250b3VjaGVuZG91dHNpZGUiLCJvbnRvdWNobW92ZSIsIm9uZ2xvYmFsdG91Y2htb3ZlIiwib250b3VjaHN0YXJ0Iiwib253aGVlbCIsIl9pbnRlcm5hbEV2ZW50TW9kZSIsImxpc3RlbmVyIiwic2lnbmFsIiwibGlzdGVuZXJGbiIsImhhbmRsZUV2ZW50IiwiZW1pdHRlciIsIm9mZiIsIm9uIiwiRE9NUGlwZSIsIl9hdHRhY2hlZERvbUVsZW1lbnRzIiwiYWRkUmVuZGVyYWJsZSIsImRvbUNvbnRhaW5lciIsIl9pbnN0cnVjdGlvblNldCIsInVwZGF0ZVJlbmRlcmFibGUiLCJfZG9tQ29udGFpbmVyIiwidmFsaWRhdGVSZW5kZXJhYmxlIiwiYXR0YWNoZWREb21FbGVtZW50cyIsImdsb2JhbERpc3BsYXlTdGF0dXMiLCJhbmNob3IiLCJfYW5jaG9yIiwiYXgiLCJheSIsInRyYW5zZm9ybU9yaWdpbiIsImMiLCJvcGFjaXR5IiwiZ3JvdXBBbHBoYSIsIldlYkdMUGlwZXMiLCJXZWJHUFVQaXBlcyIsIkNhbnZhc1BpcGVzIl0sInNvdXJjZVJvb3QiOiIifQ==